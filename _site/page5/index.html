<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Page 5 of 28 for Kabads. Musings, mutterings and murmerings. | I worked in education for 20 years and always had a hand in Technology. I create cloud automation solutions with Infrastructure as Code.</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Kabads. Musings, mutterings and murmerings." />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I worked in education for 20 years and always had a hand in Technology. I create cloud automation solutions with Infrastructure as Code." />
<meta property="og:description" content="I worked in education for 20 years and always had a hand in Technology. I create cloud automation solutions with Infrastructure as Code." />
<link rel="canonical" href="http://localhost:4000/page5/" />
<meta property="og:url" content="http://localhost:4000/page5/" />
<meta property="og:site_name" content="Kabads. Musings, mutterings and murmerings." />
<link rel="prev" href="http://localhost:4000/page4/" />
<link rel="next" href="http://localhost:4000/page6/" />
<script type="application/ld+json">
{"@type":"WebPage","headline":"Kabads. Musings, mutterings and murmerings.","url":"http://localhost:4000/page5/","description":"I worked in education for 20 years and always had a hand in Technology. I create cloud automation solutions with Infrastructure as Code.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Kabads. Musings, mutterings and murmerings." /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Kabads. Musings, mutterings and murmerings.</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="home"><p><a href="/categories/cycling.html">Cycling</a> |&nbsp<a href="/categories/education.html">Education</a> |&nbsp<a href="/categories/emacs.html">Emacs</a> |&nbsp<a href="/categories/exercise.html">Exercise</a> |&nbsp<a href="/categories/politics.html">Politics</a> |&nbsp<a href="/categories/reading.html">Reading</a> |&nbsp<a href="/categories/ruby.html">Ruby</a> |&nbsp<a href="/categories/sysadmin.html">Sysadmin</a> |&nbsp</p><h2 class="post-list-heading"></h2>
  <ul class="post-list"><li><span class="post-meta">Aug 11, 2018</span>
      <h3>
        <a class="post-link" href="/sysadmin/2018/08/11/configure-autofs.html">
          Configure Autofs on Arch Linux
          

        </a>
      </h3><p>Autofs is a way of auto-mounting devices to a running system. Theses steps will walk through enabling it on an Archlinux system.</p>

<h1 id="what-is-autofs">What is Autofs?</h1>
<p>It mounts a filesystem that is not always connected (e.g. network or device). Once a connection is made to that device, then autofs will handle the mounting of that device. It can also handle unmounting of a device, if it becomes unavailable. <code class="highlighter-rouge">/etc/fstab</code> automatically tries to mount during boot - however, it won’t try to mount once a device is connected after boot. You may boot whilst you have no network access - this means that you won’t be able to mount that device. However, autofs will look after that, once you connect to the network (after boot).</p>

<h1 id="install-the-package">Install the package</h1>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pacman -S autofs
</code></pre></div></div>

<h1 id="configure-the-master-autofs">Configure the master autofs</h1>

<p>In the file <code class="highlighter-rouge">/etc/autofs/auto.master</code> add:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/var/autofs		/etc/autofs/auto.misc
</code></pre></div></div>

<p>Each line in the file has three fields - the first two being mandatory, and the last being optional. The first is the mount-point - where will it get mounted. The second is the map-file that is a template. The last one is a time field.</p>

<p>You can also pass the <code class="highlighter-rouge">--timeout=30</code> at the end of the file which means it will be unmounted after that time of not being used.</p>

<h1 id="configure-the-automisc-file">Configure the <code class="highlighter-rouge">auto.misc</code> file</h1>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>usb     	-fstype=ntfs            :/dev/sdc2
</code></pre></div></div>

<p>Start the service to test:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo systemctl start autofs.service
</code></pre></div></div>

<p>And then enable so that it will run at boot:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo systemctl enable autofs. service 
</code></pre></div></div>

<p>You will need to attempt to use the filesystem for it to mount</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /mnt/usb
</code></pre></div></div>

<p>and the disc should mount.</p>

</li><li><span class="post-meta">Aug 4, 2018</span>
      <h3>
        <a class="post-link" href="/sysadmin/2018/08/04/working-with-terraform.html">
          Working with Terraform
          

        </a>
      </h3><p>Terraform is a cloud orchestration scripting language. This allows the capturing of cloud infrastructure. Instead of relying on your network and resources to be sat whilst you work on other projects, by using terraform, you can tear-down your infrastructure and then create it again from where you left of (saving money on the infrastructure that would be incurring a cost).</p>

<p>Another advantage is that what you are creating is a resource for the project that is reproducible. You can show the team the work that you’ve completed and even also create documentation alongside, or within the resorce.</p>
</li><li><span class="post-meta">Mar 18, 2018</span>
      <h3>
        <a class="post-link" href="/sysadmin/emacs/2018/03/18/sync-google-calendar-with-org-agenda.html">
          Sync Google Calendar With Org Agenda
          

        </a>
      </h3><p><a data-flickr-embed="true" href="https://www.flickr.com/photos/kabads/40931410022/in/datetaken/" title="screen"><img src="https://farm1.staticflickr.com/790/40931410022_e1823676da.jpg" width="500" height="316" alt="screen" /></a><script async="" src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>I use <a href="https://orgmode.org">org-mode</a> an awful lot - it helps me manage my tasks and code all in one place. However, the organisation that I work for have just migrated over to Google Suite and manage meetings extensively using Google Calendar. I really wanted my Google Calendar to sync with my <a href="https://orgmode.org/manual/Agenda-commands.html">org-agenda</a>. Org-agenda is a tool that pulls in any scheduled activities from all your files in to one dynamic view. It’s pretty much what drives my working day. Having meetings arranged with colleagues in my org-agenda will help me schedule my day.</p>

<p>The package <a href="https://github.com/myuhe/org-gcal.el">org-gcal</a> provides two way syncing with Google Calendar (and has other documentation).</p>

<p>This is how I did it.</p>

<h2 id="install-org-cal">Install org-cal</h2>

<p>Using elpa, I installed the package:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>M-x package-list
</code></pre></div></div>

<p>Highlight the <code class="highlighter-rouge">org-gcal</code> package and install.</p>

<h2 id="create-api-credentials">Create Api Credentials</h2>

<p>Then, go to google and get credentials to access your calendar. You will need to go to the <a href="https://console.developers.google.com/cloud-resource-manager">google developers portal</a> where you may need to enable the developers’ api. You will need to find Api &amp; Services and then click on credentials. You will create some OAuth 2.0 client IDs credentials - one being the API key and the other being a secret. Make a note of these, or download the JSON file that Google provides.</p>

<p><a data-flickr-embed="true" href="https://www.flickr.com/photos/kabads/26101808357/in/datetaken/" title="Screenshot-2018-3-23 Credentials - org-gcal"><img src="https://farm1.staticflickr.com/799/26101808357_5446e2c69d.jpg" width="500" height="229" alt="Screenshot-2018-3-23 Credentials - org-gcal" /></a><script async="" src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>Enable these credentials for Google Calendar.</p>

<p><a data-flickr-embed="true" href="https://www.flickr.com/photos/kabads/40931425052/in/datetaken/" title="Screenshot-2018-3-23 APIs Services - org-gcal"><img src="https://farm1.staticflickr.com/818/40931425052_9051ec90df.jpg" width="500" height="241" alt="Screenshot-2018-3-23 APIs Services - org-gcal" /></a><script async="" src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<h2 id="identify-calendar">Identify Calendar</h2>

<p>Then, the README for org-cal tells you to find the link for your calendar. This didn’t work for me. Instead, I found the link in the url in the address bar of my browser (click on the image to see more detail):</p>

<p><a data-flickr-embed="true" href="https://www.flickr.com/photos/kabads/40263945734" title="url"><img src="https://farm1.staticflickr.com/805/40263945734_3272338f4e_c.jpg" width="800" height="105" alt="url" /></a><script async="" src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<h2 id="create-settings">Create settings</h2>

<p>(require ‘org-gcal)
   (setq org-gcal-client-id “your-id-foo.apps.googleusercontent.com”
      org-gcal-client-secret “your-secret”
      org-gcal-file-alist ‘((“your-mail@gmail.com” .  “~/schedule.org”)
                            (“another-mail@gmail.com” .  “~/task.org”)))</p>

<p>Copy that string in to your <code class="highlighter-rouge">~.emacs</code> file, substituting the proper parts (your org-gcal-client-id and secret and the files that you wish to create when you sync).</p>

<p>Save the file and then execute <code class="highlighter-rouge">M-x load-file &lt;RET&gt;.emacs</code> to reload this file.</p>

<h2 id="sync-and-org-agenda-file-to-front">Sync and org-agenda-file-to-front</h2>

<p>Now you need to sync your calendar, which will create a new org file (as you specified in the settings.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>M-x org-gcal-sync
</code></pre></div></div>

<p>Once that file is created open it <code class="highlighter-rouge">C-x C-f</code> &lt;/path/to/file&gt; <RET>` and then `M-x org-agenda-file-to-front`. This command will include the new file.</RET></p>

<p>You can also create a hook to run <code class="highlighter-rouge">org-gcal-sync</code> when you open your agenda by placing this snippet in your <code class="highlighter-rouge">.emacs</code> file:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(add-hook 'org-agenda-mode-hook (lambda () (org-gcal-sync) ))
</code></pre></div></div>

</li><li><span class="post-meta">Mar 13, 2018</span>
      <h3>
        <a class="post-link" href="/sysadmin/2018/03/13/moving-boot-partition.html">
          Moving Boot Partition (EFI/EPS partition)
          

        </a>
      </h3><p><a href="https://gparted.org/docs/moving-space-between-partitions/C/figures/9823OS_14_03.png"> <img src="https://gparted.org/docs/moving-space-between-partitions/C/figures/9823OS_14_03.png" width="200" height="150" alt="Moving partitions can cause your system to not boot" /> </a></p>

<p>If you’ve been using Linux for a few years, you’ll probably remember that 100MB for a /boot partition was no problem. However, that has changed. Whilst you don’t need a datacentre for a /boot partitions, you might want to install other kernels to help you tweak your system and yet not delete kernels that you are using.</p>

<p>This article makes a few assumptions - you will be using systemd-boot to boot and you are familiar with resizing partitions, mounting them and moving files around.</p>

<p>You will need to use gparted to resize a partition to free some space up. This is to create a new EFI partition. This is where the kernels have to live (if you are using systemd-boot) along with the efi files. Using gparted, you can make a partition somewhat smaller, especially if that partition isn’t completely full. With the free space you have, use gdisk to create a new EFI partition.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gdisk /dev/sdb
</code></pre></div></div>

<p>With gdisk, give that partition a file type of <code class="highlighter-rouge">ef00</code>.</p>

<p>Your new partition will have a new letter - to save a reboot you can issue partprobe to pick up the new partition - in this case <code class="highlighter-rouge">/dev/sdb5</code>.</p>

<p>Then once you’ve created the new partition, it will need a file system.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo mkfs.vfat -F32 /dev/sdb5
</code></pre></div></div>

<p>Mount that partition somewhere:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo mount /dev/sdb5 /media/mountpoint 
</code></pre></div></div>

<p>Then, copy over all the files you have in your current boot partition.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo cp -R /boot/* /media/mountpoint/.
</code></pre></div></div>

<p>Then, run the bootctl command to install it. In my case, I will still using <code class="highlighter-rouge">gummiboot</code>, so I moved that directory out and then issued in the install command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bootctl --path=/media/mountpoint install
</code></pre></div></div>

<p>Then, you can change the filetype of your old EFI partition:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gdisk /dev/sdb1
</code></pre></div></div>

<p>Change the filetype to <code class="highlighter-rouge">8300</code> - this means it won’t be selected for boot.</p>

<p>Ensure that the new boot partition is in your <code class="highlighter-rouge">/etc/fstab</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/dev/sdb5 /boot 	 defaults 0 0
</code></pre></div></div>

<p>Time for reboot - have a live CD/DVD handy just in case.</p>

<p>Once the system reboots, you can intall more kernels and have fun messing around withem.</p>

<p>In my case, I had to copy a file in the loader directory in <code class="highlighter-rouge">/boot</code> partition to create a new conf file for my <code class="highlighter-rouge">linux-lts</code> kernel.</p>

<p>** Further reading</p>

<p>If you want to get this project underway, you will need more information than just this post - I can highly recommend the <a href="https://wiki.archlinux.org/index.php/Systemd-boot">the ArchLinux Wiki</a>.</p>
</li><li><span class="post-meta">Feb 11, 2018</span>
      <h3>
        <a class="post-link" href="/cycling/2018/02/11/cycle-jaunt-around-bath.html">
          Cycle Jaunt Around Bath
          

        </a>
      </h3><p>Sunday involved a train ride to bath with a Brompton in fold, and then cycling around the Two Tunnels circular route. A quick stop at <a href="http://hopeandanchormidford.co.uk">The Hope and Anchor</a> pub to avoid the sleet and get a quick half-way coffee, is highly recommended.</p>

<p><a data-flickr-embed="true" href="https://secure.flickr.com/photos/kabads/albums/72157669458021059" title="Cycle Jaunt around Bath"><img src="https://farm5.staticflickr.com/4626/28426294529_b92230306f_z.jpg" width="640" height="640" alt="Cycle Jaunt around Bath" /></a><script async="" src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>
</li></ul>

  <p class="rss-subscribe">subscribe <a href="/feed.xml">via RSS</></p></div>

<!-- Pagination links -->
<div class="pagination">
  
  <a href="/page4/" class="previous">Previous</a>
  
  <span class="page_number ">Page: 5 of 28</span>
  
  <a href="/page6/" class="next">Next</a>
  
</div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Kabads. Musings, mutterings and murmerings.</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Kabads. Musings, mutterings and murmerings.</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/kabads"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">kabads</span></a></li><li><a href="https://www.twitter.com/kabads"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">kabads</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>I worked in education for 20 years and always had a hand in Technology.  I create cloud automation solutions with Infrastructure as Code.</p>
      </div>
    </div>

  </div>

</footer>
<!-- Start Open Web Analytics Tracker -->
<script type="text/javascript">
//<![CDATA[
var owa_baseUrl = 'https://home.monkeez.org/owa/';
var owa_cmds = owa_cmds || [];
owa_cmds.push(['setSiteId', '8f339fcf5fd7912384a8bc7f0ccd08e7']);
owa_cmds.push(['trackPageView']);
owa_cmds.push(['trackClicks']);

(function() {
	var _owa = document.createElement('script'); _owa.type = 'text/javascript'; _owa.async = true;
	owa_baseUrl = ('https:' == document.location.protocol ? window.owa_baseSecUrl || owa_baseUrl.replace(/http:/, 'https:') : owa_baseUrl );
	_owa.src = owa_baseUrl + 'modules/base/js/owa.tracker-combined-min.js';
	var _owa_s = document.getElementsByTagName('script')[0]; _owa_s.parentNode.insertBefore(_owa, _owa_s);
}());
//]]>
</script>

</body>

</html>
