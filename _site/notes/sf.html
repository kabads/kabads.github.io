<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-11-15 Sun 09:26 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Salesforce Development</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Adam C" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style>*{background-color: #dce7f7}</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Salesforce Development</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org26f8840">1. Salesforce Platform Basics</a></li>
<li><a href="#org0226c9b">2. Salesforce Architecture</a></li>
<li><a href="#org59bd2ee">3. Navigate Setup</a></li>
<li><a href="#org2f0fd47">4. App Exchange</a></li>
<li><a href="#orgf8d8c82">5. Create a Trailhead playground</a>
<ul>
<li><a href="#org5dd1626">5.1. Get your Trailhead Playground Username and Password</a></li>
<li><a href="#org8969f31">5.2. Install Apps</a></li>
</ul>
</li>
<li><a href="#orga69ea93">6. Platform Development Basics</a>
<ul>
<li><a href="#org847dd77">6.1. Getting Started With Platform Development</a></li>
<li><a href="#org9f2febe">6.2. Develop without code</a>
<ul>
<li><a href="#org2eb711f">6.2.1. No-code and Low Code Development</a></li>
</ul>
</li>
<li><a href="#org073c139">6.3. Code with SF languages</a></li>
<li><a href="#orgebaffd1">6.4. Extend the SF Platform</a></li>
<li><a href="#orgfe8237c">6.5. IoT</a></li>
<li><a href="#org67d681b">6.6. Bots</a></li>
</ul>
</li>
<li><a href="#org6d41312">7. Data Modelling</a>
<ul>
<li><a href="#orgf63e1d2">7.1. Understand Custom &amp; Standard Objects</a>
<ul>
<li><a href="#orgb97bcb5">7.1.1. Create a Custom Object</a></li>
<li><a href="#orgf9a3889">7.1.2. Create a Custom Field</a></li>
<li><a href="#orgfae8647">7.1.3. Create a Record</a></li>
</ul>
</li>
<li><a href="#org9cb62d1">7.2. Create Object Relationships</a>
<ul>
<li><a href="#orgac007f9">7.2.1. Lookup Relationships</a></li>
<li><a href="#orgadb71e4">7.2.2. Master-Detail Relationships</a></li>
<li><a href="#orgf220729">7.2.3. More on relationships</a></li>
</ul>
</li>
<li><a href="#org5e898b9">7.3. Work with Schema Builder</a>
<ul>
<li><a href="#org0ea4f5d">7.3.1. Create an Object with the Schema Builder</a></li>
<li><a href="#orgaa96e85">7.3.2. Create Fields for the Object with the Schema Builder</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org4fc2d26">8. Data Management</a>
<ul>
<li><a href="#org96cd5bc">8.1. Import Data</a>
<ul>
<li><a href="#orgf10d221">8.1.1. Data loader</a></li>
</ul>
</li>
<li><a href="#org776f2e9">8.2. Export Data</a>
<ul>
<li><a href="#org8b83725">8.2.1. Data Export Service</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org890a397">9. Formulas and Validations</a>
<ul>
<li><a href="#orge3a89d9">9.1. Formula Editor</a></li>
<li><a href="#org6a6f2d7">9.2. Use the Formula Editor</a></li>
<li><a href="#org3268003">9.3. Implement Roll-Up Summary Fields</a>
<ul>
<li><a href="#orge30a00d">9.3.1. Creating a Summary Field</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orga92a220">10. Salesforce DX</a>
<ul>
<li><a href="#org9065e7f">10.1. Install the command line interface</a></li>
<li><a href="#orgb51b173">10.2. Setup the project on your local machine</a></li>
<li><a href="#org8708c60">10.3. Create and Test the Scratch Org</a></li>
<li><a href="#org92579c1">10.4. Assign a permission set to the Dreamhouse App</a></li>
<li><a href="#org55b742c">10.5. Import Test Data</a></li>
<li><a href="#org2b4051b">10.6. Test Your App in the Scratch Org</a></li>
</ul>
</li>
<li><a href="#org82fce6f">11. Lightning Flow</a>
<ul>
<li><a href="#orge7c3cc8">11.1. Choose the right automation tool</a>
<ul>
<li><a href="#org0f52f1f">11.1.1. Process Builder</a></li>
<li><a href="#orga1d5109">11.1.2. Flow Builder</a></li>
<li><a href="#org0916a32">11.1.3. Combining Process Builder and Flow Builder</a></li>
</ul>
</li>
<li><a href="#orgd5486e7">11.2. Apex</a></li>
<li><a href="#org30be136">11.3. Approval Process</a>
<ul>
<li><a href="#org7bff82e">11.3.1. Customize how records get Approved with Approvals</a></li>
<li><a href="#orga190bf2">11.3.2. How to build an approval process</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org56411de">12. Apex Basics and Database</a>
<ul>
<li><a href="#orgba91c43">12.1. Get Started with Apex</a>
<ul>
<li><a href="#orgadf1c29">12.1.1. Data Types</a></li>
<li><a href="#org54fc5a8">12.1.2. Apex Classes</a></li>
</ul>
</li>
<li><a href="#orgf15b356">12.2. Use sObjects</a>
<ul>
<li><a href="#orgf1d8b54">12.2.1. Creating sObject Variables</a></li>
</ul>
</li>
<li><a href="#org9cd0e03">12.3. sObject and Field Names</a></li>
<li><a href="#org0b229db">12.4. Creating sObjects and adding Fields</a></li>
<li><a href="#org14bf99f">12.5. Working with the Generic sObject Type</a></li>
<li><a href="#org62bf317">12.6. Casting Generic sObjects to Specific sObject Types</a></li>
<li><a href="#org13d9857">12.7. Manipulate Records with DML</a>
<ul>
<li><a href="#org5db0b66">12.7.1. ID Field Auto-Assignedd to New Records</a></li>
<li><a href="#org650042e">12.7.2. Bulk DML</a></li>
<li><a href="#org598f910">12.7.3. Upserting Records</a></li>
<li><a href="#org36a4b01">12.7.4. Deleting Records</a></li>
</ul>
</li>
<li><a href="#org6f665c0">12.8. DML Statement Exceptions</a></li>
<li><a href="#orgc18bbad">12.9. Database Methods</a>
<ul>
<li><a href="#org21fd5f8">12.9.1. Example of Inserts with Partial Success</a></li>
<li><a href="#org3b06047">12.9.2. DML Statements or Database Methods?</a></li>
<li><a href="#orgbc71e52">12.9.3. Working with Related Records</a></li>
</ul>
</li>
<li><a href="#org725c2c9">12.10. Write SOQL Queries</a>
<ul>
<li><a href="#org3ac43a7">12.10.1. Use the Query Editor</a></li>
<li><a href="#org7064221">12.10.2. Basic SOQL Syntax</a></li>
<li><a href="#orgaca3bd3">12.10.3. Filtering Query Results with Conditions</a></li>
<li><a href="#orgad7845f">12.10.4. Ordering Query Results</a></li>
<li><a href="#orga00043b">12.10.5. Limit the Number of Records Returned</a></li>
<li><a href="#org5f9829d">12.10.6. Combining all the above operators</a></li>
<li><a href="#org951cd2f">12.10.7. Accessing Variables in SOQL Queries</a></li>
<li><a href="#orgcd4c2ee">12.10.8. Querying Relatede Records</a></li>
<li><a href="#orgdca7616">12.10.9. Dot Notation</a></li>
<li><a href="#org9988cbe">12.10.10. Querying Record in Batches by Using SOQL For Loops</a></li>
</ul>
</li>
<li><a href="#orgbca77da">12.11. When to use SOSL instead of SOQL?</a></li>
<li><a href="#orgecfb73c">12.12. Write SOSL Queries</a>
<ul>
<li><a href="#org7bf5477">12.12.1. Using the Query Editor</a></li>
<li><a href="#org2ce3a6d">12.12.2. Basing SOSL Syntax</a></li>
<li><a href="#org5c69321">12.12.3. Single Words and Phrases</a></li>
<li><a href="#orgb6f4624">12.12.4. Search Examples</a></li>
<li><a href="#orgecf4625">12.12.5. SOSL Apex Example</a></li>
<li><a href="#org5861a5a">12.12.6. Filtering SOSL queries</a></li>
<li><a href="#org07bedef">12.12.7. Activity for this Unit</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org025f901">13. Apex Triggers</a>
<ul>
<li><a href="#orgfa7b372">13.1. Get Started with Apex Triggers</a>
<ul>
<li><a href="#org5937f36">13.1.1. Trigger Syntax</a></li>
<li><a href="#orgbef64be">13.1.2. Example of a Trigger</a></li>
<li><a href="#org7a41f5e">13.1.3. Types of Triggers</a></li>
<li><a href="#org319a7b3">13.1.4. Using Context Variables</a></li>
<li><a href="#org25a3691">13.1.5. Trigger context Variables</a></li>
<li><a href="#org01c1191">13.1.6. Calling a Class Method from a Trigger</a></li>
<li><a href="#orgf979c8d">13.1.7. Adding Related Records</a></li>
<li><a href="#org36db65a">13.1.8. Use Trigger Exceptions</a></li>
<li><a href="#orgcdc27c5">13.1.9. Triggers and Callouts</a></li>
<li><a href="#orga9e0491">13.1.10. Unit Challenge</a></li>
</ul>
</li>
<li><a href="#orgdee4c63">13.2. Bulk Apex Triggers</a>
<ul>
<li><a href="#orgcd496c7">13.2.1. Bulk Trigger Design Patterns</a></li>
<li><a href="#org05aaa0c">13.2.2. Operating on Record Sets</a></li>
<li><a href="#org8de3fcf">13.2.3. Performing Bulk SOQL</a></li>
<li><a href="#org9b0db62">13.2.4. Performing Bulk DML</a></li>
<li><a href="#org087d122">13.2.5. Bulk Design Pattern in Action: Trigger Example for Getting Records</a></li>
<li><a href="#org68c79d6">13.2.6. Challenge for this Unit</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org6c8d4b3">14. Apex Testing</a>
<ul>
<li><a href="#org9bfa431">14.1. Get Started with Apex Test Units</a>
<ul>
<li><a href="#org435f2e4">14.1.1. Apex Unit Tests</a></li>
<li><a href="#org23daf70">14.1.2. Code Coverage Requirement for Deployment</a></li>
<li><a href="#org0903543">14.1.3. Test Method Syntax</a></li>
<li><a href="#org0acda2e">14.1.4. To Run a test</a></li>
<li><a href="#orgb41cc95">14.1.5. Increase your Code Coverage</a></li>
<li><a href="#orgbc77767">14.1.6. Create and Execute a Test Suite</a></li>
<li><a href="#org4a87217">14.1.7. Creating Test Data</a></li>
<li><a href="#orgce636ea">14.1.8. Unit Challenge</a></li>
</ul>
</li>
<li><a href="#orgab28024">14.2. Test Apex Triggers</a>
<ul>
<li><a href="#org1f6d93a">14.2.1. Unit Challenge</a></li>
</ul>
</li>
<li><a href="#org5cb7d0f">14.3. Creating Test Data for Apex Tests</a>
<ul>
<li><a href="#orgdd92c5c">14.3.1. Adding a Test Utility Class</a></li>
<li><a href="#org3e46f74">14.3.2. Calling Utility Methods for Test Data Creation</a></li>
<li><a href="#org9374355">14.3.3. Testing for Different Conditions</a></li>
<li><a href="#org10f82d3">14.3.4. Unit Challenge</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgdbdf940">15. Visualforce Basics</a>
<ul>
<li><a href="#orga142dc8">15.1. Where you can use Visualforce</a>
<ul>
<li><a href="#org000766e">15.1.1. Open a Visualforce Page from the App Launcher</a></li>
<li><a href="#org00ad49f">15.1.2. Add a Visualforce Page to the Navigation Bar</a></li>
<li><a href="#org6cff94e">15.1.3. Display a Visualforce Page within a Standard Page Layout</a></li>
<li><a href="#orgd6f9399">15.1.4. Add a Visualforce Page as a Component in the Lightning App Builder</a></li>
<li><a href="#org96b485d">15.1.5. Lanunch A Visualforce Page as a Quick Action</a></li>
<li><a href="#orgff7ed0a">15.1.6. Display a Visualforce Page by Overriding Standard Buttons or Links</a></li>
<li><a href="#org282042f">15.1.7. Display a Visualforce Page using Custom Buttons or Links</a></li>
</ul>
</li>
<li><a href="#orgc9968c5">15.2. Create and Edit Visualforce Pages</a>
<ul>
<li><a href="#org5d0a85b">15.2.1. Creating Visualforce Pages in Developer Console</a></li>
<li><a href="#orgdd259f6">15.2.2. Add Atttributes Using Auto-Suggest</a></li>
<li><a href="#orgc5ea754">15.2.3. Add and Compose Components to Form a Page Structure</a></li>
<li><a href="#org1a51d7e">15.2.4. Unit Challenge</a></li>
</ul>
</li>
<li><a href="#org57e155b">15.3. Use Simple Variables and Formulas</a>
<ul>
<li><a href="#org5df6f5d">15.3.1. Introduction to Global Variables and Visualforce Expressions</a></li>
<li><a href="#orgbf369ce">15.3.2. Global Variables</a></li>
<li><a href="#org4a1eee0">15.3.3. Formula Expressions</a></li>
<li><a href="#org55062e6">15.3.4. Conditional Expressions</a></li>
<li><a href="#org776d2a6">15.3.5. Unit Challenge</a></li>
</ul>
</li>
<li><a href="#orgf6b510f">15.4. Use Standard Controllers</a>
<ul>
<li><a href="#orga000f9e">15.4.1. Find a Record ID and Add It to the Request URL</a></li>
<li><a href="#org00ba810">15.4.2. Display Data from a Single Record</a></li>
<li><a href="#orga248b08">15.4.3. Display Fields from Related Records</a></li>
<li><a href="#org0f12181">15.4.4. Unit Challenge</a></li>
</ul>
</li>
<li><a href="#org79e01df">15.5. Display Records, Fields and Tables</a>
<ul>
<li><a href="#orgd4a2512">15.5.1. Introduction to Output Components</a></li>
<li><a href="#org30d60c8">15.5.2. Create a Visualforce Page with a Standard Controller</a></li>
<li><a href="#org1ff79a9">15.5.3. Display Record Details</a></li>
<li><a href="#org47ae122">15.5.4. Display Individual Fields</a></li>
<li><a href="#orgec8fc92">15.5.5. Display a Table</a></li>
<li><a href="#orgc642c34">15.5.6. Unit Challenge</a></li>
</ul>
</li>
<li><a href="#orgeb249b1">15.6. Input Data Using Forms</a>
<ul>
<li><a href="#org6c2cb44">15.6.1. Introduction to Visualforce forms</a></li>
<li><a href="#org6947742">15.6.2. Create a Basic form</a></li>
<li><a href="#org8d8fe49">15.6.3. Add Field Labels and Platform Styling</a></li>
<li><a href="#orgc92e391">15.6.4. Display Form Errors and Messages</a></li>
<li><a href="#org2e9462f">15.6.5. Edit Related Records</a></li>
<li><a href="#org63a4542">15.6.6. Unit Challenge</a></li>
<li><a href="#orgeff5fa5">15.6.7. Use Standard List Controllers</a></li>
<li><a href="#org75785f3">15.6.8. Introduction to the Standard List Controller</a></li>
<li><a href="#orgb6c686d">15.6.9. Display a List of Records</a></li>
<li><a href="#org13260e7">15.6.10. Add List View Filtering to the List</a></li>
<li><a href="#orgf2b41d2">15.6.11. Add Pagination to the List</a></li>
<li><a href="#org58c3b05">15.6.12. Unit Challenge</a></li>
</ul>
</li>
<li><a href="#org2d31548">15.7. Use Static Resources</a>
<ul>
<li><a href="#orgaeb9644">15.7.1. Introduction to Static Resources</a></li>
<li><a href="#org06e6542">15.7.2. Create and Upload a Simple Static Resource</a></li>
<li><a href="#org9dc6af4">15.7.3. Create and Upload a Zipped Static Resource</a></li>
<li><a href="#orgc8522f0">15.7.4. Add Zipped Static Resources to a Visualforce Page</a></li>
<li><a href="#org35cd861">15.7.5. Unit Challenge</a></li>
</ul>
</li>
<li><a href="#org4f1af01">15.8. Create And Use Custom Controllers</a>
<ul>
<li><a href="#org4e786e6">15.8.1. Create a Visualforce Page that Uses a Custom Controller</a></li>
<li><a href="#orge7abb90">15.8.2. Add a method to Retrieve Records</a></li>
<li><a href="#org73a1499">15.8.3. Add a New Action Method</a></li>
<li><a href="#orgf860ed3">15.8.4. Unit Challenge</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org5b9cde1">16. Developer Console</a>
<ul>
<li><a href="#org605f0b9">16.1. Inspect Objects at Checkpoints</a>
<ul>
<li><a href="#org9fb5cfa">16.1.1. Unit Challenge</a></li>
</ul>
</li>
<li><a href="#orgdabdcfa">16.2. Execute SOQL anD SOSL Queries</a>
<ul>
<li><a href="#orgbcaed94">16.2.1. Unit Challenge</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org8534460">17. Optimizing Search</a>
<ul>
<li><a href="#orgec60ee9">17.1. With Statements</a></li>
<li><a href="#org58a9a77">17.2. Display Suggested Results with REST</a></li>
<li><a href="#org0f92270">17.3. Working with Admins</a>
<ul>
<li><a href="#orge9766d6">17.3.1. Synonyms</a></li>
<li><a href="#org3a3c098">17.3.2. Promoted Search Terms</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<p>
## #+HTML<sub>HEAD</sub><sub>EXTRA</sub>: &lt;style&gt;*{font-family: sans-serif}&lt;/style&gt;
</p>
<p>
Areas covered:
</p>

<div id="outline-container-org26f8840" class="outline-2">
<h2 id="org26f8840"><span class="section-number-2">1</span> Salesforce Platform Basics</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li>define the sf platform</li>
<li>describe the scenario provided (Dreamhouse)</li>
<li>Create a playground</li>
<li>Difference between declarative and programmatic development</li>
</ul>

<p>
Object is an important term in sf. 
</p>

<p>
An app is a set of objects, fields and other functionality that supports a business process. 
Objects are tables in the sf database. There are standard obejects and custom objects. 
Records are rows in the object database. 
Fields are columns in the object database. 
</p>

<p>
Org is short for organisation and refers to a specific instance of sf. 
</p>

<p>
To create a new field: 
</p>
<ul class="org-ul">
<li>go to setup</li>
<li>click on the object manager tab</li>
<li>click the object that you want to create a field for</li>
<li>under Fields and Relationships, click new</li>
<li>choose what type of field you want</li>
<li>give it a name (label)</li>
<li>save.</li>
</ul>
</div>
</div>

<div id="outline-container-org0226c9b" class="outline-2">
<h2 id="org0226c9b"><span class="section-number-2">2</span> Salesforce Architecture</h2>
<div class="outline-text-2" id="text-2">
<p>
Sf is a cloud company. Everything is integrated. It is a multi-tenated platform. It uses metadata. This is the structure of your data. 
</p>

<p>
Then there are APIs. This helps abstract away a lot of the work somewhere else. You can even take it to Minecraft! 
</p>
</div>
</div>


<div id="outline-container-org59bd2ee" class="outline-2">
<h2 id="org59bd2ee"><span class="section-number-2">3</span> Navigate Setup</h2>
<div class="outline-text-2" id="text-3">
<p>
This is where most of the work will be done. As well as design and data structure, you can administer users here. The quick find box is your friend. 
</p>

<ul class="org-ul">
<li>Administration (users)</li>
<li>Platform tools (customization)</li>
<li>Settings (org information and security)</li>
</ul>
</div>
</div>

<div id="outline-container-org2f0fd47" class="outline-2">
<h2 id="org2f0fd47"><span class="section-number-2">4</span> App Exchange</h2>
<div class="outline-text-2" id="text-4">
<p>
Installing apps on sf is more complicated than installing apps on your phone.
</p>
</div>
</div>

<div id="outline-container-orgf8d8c82" class="outline-2">
<h2 id="orgf8d8c82"><span class="section-number-2">5</span> Create a Trailhead playground</h2>
<div class="outline-text-2" id="text-5">
<p>
This is similar to the Developer Edition, but specifically for Trailhead. It comes with data and pre-installed packages. 
</p>

<p>
To create a playground: 
</p>
<ul class="org-ul">
<li>click the name of your org</li>
<li>give your playground a name</li>
<li>click create</li>
</ul>
</div>

<div id="outline-container-org5dd1626" class="outline-3">
<h3 id="org5dd1626"><span class="section-number-3">5.1</span> Get your Trailhead Playground Username and Password</h3>
<div class="outline-text-3" id="text-5-1">
<ul class="org-ul">
<li>go to setup</li>
<li>Enter Users in Quick Find</li>
<li>Locate your name</li>
<li>Click Reset Password</li>
<li>Click the link in the email sent</li>
<li>Enter a new password, confirm it and click Change Password</li>
</ul>
</div>
</div>

<div id="outline-container-org8969f31" class="outline-3">
<h3 id="org8969f31"><span class="section-number-3">5.2</span> Install Apps</h3>
<div class="outline-text-3" id="text-5-2">
<p>
You need the package id (which is a long string that starts with '04t'). 
</p>

<p>
To install a package: 
</p>
<ul class="org-ul">
<li>copy the package installation link</li>
<li>paste it into a new browser tab (if you have an incognito tab, you'll have to log in)</li>
<li>select 'Install for Admins Only'</li>
<li>click install</li>
</ul>

<p>
You'll get a confirmation page once it has installed. 
</p>
</div>
</div>
</div>


<div id="outline-container-orga69ea93" class="outline-2">
<h2 id="orga69ea93"><span class="section-number-2">6</span> Platform Development Basics</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-org847dd77" class="outline-3">
<h3 id="org847dd77"><span class="section-number-3">6.1</span> Getting Started With Platform Development</h3>
<div class="outline-text-3" id="text-6-1">
<p>
You get to build your own functionality. You get to create custom data models and applications for desktop and mobile. 
</p>

<p>
This uses Heroku. This is highly scalable for front-end and back-end. You get the database tools you need. 
</p>

<p>
You get access to APIs. With these you can integrate and connect all enterprise data, networks, and identity information.
</p>
</div>
</div>
<div id="outline-container-org9f2febe" class="outline-3">
<h3 id="org9f2febe"><span class="section-number-3">6.2</span> Develop without code</h3>
<div class="outline-text-3" id="text-6-2">
<p>
You're not just looking at a user interface sat on top of a relational database. You are looking at an abstraction of the database that's driven by the platform's metadata-aware architecture. 
</p>

<p>
Objects are our database tables. Fields are the columns and records are rows. You can create custom objects for yourself. 
</p>

<p>
Because the platform is metadata-aware, you can build things quicker, as Sf will auto-generate a significant part of the user experience. 
</p>

<p>
You can see in the <b>Schema Builder</b> the relationships between the objects.
</p>
</div>

<div id="outline-container-org2eb711f" class="outline-4">
<h4 id="org2eb711f"><span class="section-number-4">6.2.1</span> No-code and Low Code Development</h4>
<div class="outline-text-4" id="text-6-2-1">
<p>
You are encouraged to minimize your code. You get to use point and click <i>declarative</i> code. 
</p>

<p>
There are other tasks that are <i>low-code</i> - this means that you can design something with a gui that has logic flow (e.g. <b>Process Builder</b>). 
</p>
</div>
</div>
</div>
<div id="outline-container-org073c139" class="outline-3">
<h3 id="org073c139"><span class="section-number-3">6.3</span> Code with SF languages</h3>
<div class="outline-text-3" id="text-6-3">
<p>
<i>Lightning Component Framework</i> is a UI development framework similar to AngularJS or React.
<i>Apex</i> is a proprietary programming language similar to Java. 
<i>Visualforce</i> is a markup language that lets you create custom salesforce pages with code that looks a lot like HTML, and use Apex and Javascript.
</p>
</div>
</div>
<div id="outline-container-orgebaffd1" class="outline-3">
<h3 id="orgebaffd1"><span class="section-number-3">6.4</span> Extend the SF Platform</h3>
<div class="outline-text-3" id="text-6-4">
<p>
Put simply, every object in your orhg has an API name that lets you access data for that object. You can use <b>SOQL</b> query to gain access to this data:
</p>

<pre class="example">
Property__c property = [SELECT Name, Price__c from Property__c WHERE Id=:propId];
</pre>

<p>
The _<sub>c</sub> denotes that this is a custom object or field. 
</p>
</div>
</div>

<div id="outline-container-orgfe8237c" class="outline-3">
<h3 id="orgfe8237c"><span class="section-number-3">6.5</span> IoT</h3>
<div class="outline-text-3" id="text-6-5">
<p>
You can connect smart devices with SF. 
</p>
</div>
</div>

<div id="outline-container-org67d681b" class="outline-3">
<h3 id="org67d681b"><span class="section-number-3">6.6</span> Bots</h3>
<div class="outline-text-3" id="text-6-6">
<p>
Chatbots can be built right in to your org to help your employees navigate. 
</p>
</div>
</div>
</div>

<div id="outline-container-org6d41312" class="outline-2">
<h2 id="org6d41312"><span class="section-number-2">7</span> Data Modelling</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-orgf63e1d2" class="outline-3">
<h3 id="orgf63e1d2"><span class="section-number-3">7.1</span> Understand Custom &amp; Standard Objects</h3>
<div class="outline-text-3" id="text-7-1">
<p>
Standard objects  are objects that are included with SF, which are common to all businesses. 
</p>

<p>
Custom Objects are objects that you create to store information that's specific to your company or industry. 
</p>

<p>
Objects are containers for your data, but they also give functionality. You get stuff like page layout automatically. 
</p>
</div>

<div id="outline-container-orgb97bcb5" class="outline-4">
<h4 id="orgb97bcb5"><span class="section-number-4">7.1.1</span> Create a Custom Object</h4>
<div class="outline-text-4" id="text-7-1-1">
<ul class="org-ul">
<li>click setup</li>
<li>click object manager tab</li>
<li>click Create | Custom object</li>
<li>for Label enter the label required</li>
<li>choose a plural label</li>
<li>check the box for Launch New Custom Tab Wizard after saving this object</li>
<li>change any values as required</li>
<li>on the New Custom Object Tab page click the Tab Style field and choose a style you like. The style sets the icon to display in the UI for the object</li>
<li>click next, next, save</li>
</ul>
</div>
</div>

<div id="outline-container-orgf9a3889" class="outline-4">
<h4 id="orgf9a3889"><span class="section-number-4">7.1.2</span> Create a Custom Field</h4>
<div class="outline-text-4" id="text-7-1-2">
<ul class="org-ul">
<li>from setup go to Object Manager</li>
<li>choose the object that you wish to add a field for</li>
<li>click Fields and Relationships in the right pane</li>
<li>click New</li>
<li>click the data type required</li>
<li>click next</li>
<li>provide a field label</li>
<li>provide a description</li>
<li>check the required box (to make this field mandatory)</li>
<li>click next, next save</li>
</ul>
</div>
</div>

<div id="outline-container-orgfae8647" class="outline-4">
<h4 id="orgfae8647"><span class="section-number-4">7.1.3</span> Create a Record</h4>
<div class="outline-text-4" id="text-7-1-3">
<ul class="org-ul">
<li>choose the object that you'd like to create a new record for (e.g. Account)</li>
<li>click new in the top corner</li>
<li>enter the required data</li>
<li>click save</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org9cb62d1" class="outline-3">
<h3 id="org9cb62d1"><span class="section-number-3">7.2</span> Create Object Relationships</h3>
<div class="outline-text-3" id="text-7-2">
<p>
Object relationships are a special field type that connects two objects together. 
</p>

<p>
A standard object like Account will probably have Contacts as a result of activity. It would be good to associat the Contacts with the Account. 
</p>

<p>
When you look at Account object, you'll see there's a section for contacts on the <b>Related</b> tab. You can also add a contact to an account here. 
</p>

<p>
This is an example of a standard relationship in sf. You can build custom relationships as well. 
</p>

<p>
Different types of relationships in SF:
</p>
<ul class="org-ul">
<li><b>Lookup</b> relationships</li>
<li><b>Master-Detail</b> relationships</li>
</ul>
</div>

<div id="outline-container-orgac007f9" class="outline-4">
<h4 id="orgac007f9"><span class="section-number-4">7.2.1</span> Lookup Relationships</h4>
<div class="outline-text-4" id="text-7-2-1">
<p>
A <b>Lookup</b> relationship is essentially a link to two objects so that you can 'look up' one object from the other. This can be one-to-one or one-to-many. 
</p>
</div>

<ol class="org-ol">
<li><a id="org544a7bf"></a>Create a lookup relationship<br />
<div class="outline-text-5" id="text-7-2-1-1">
<ul class="org-ul">
<li>click the object manager</li>
<li>click create | custom object</li>
<li>enter the label</li>
<li>enter the plural label</li>
<li>check the box for Launch New Custom Tab Wizard after saving this custom object</li>
<li>leave the other values as required</li>
<li>press save</li>
<li>click Tab Style field and select a style you like</li>
<li>click next, next, save</li>
<li>on the object manager page for the custom object that you created click <b>Fields and Relationships</b></li>
<li>click new</li>
<li>choose the data type (autonumber is good for lookup relationships)</li>
<li>give the field label</li>
<li>choose the display format</li>
<li>choose a starting number (if you chose auto-number)</li>
<li>click next, next, save</li>
</ul>

<p>
Then create a custom relationship field:
</p>
<ul class="org-ul">
<li>go to the object that you want create the relationship with</li>
<li>click fields and relationships</li>
<li>click new</li>
<li>choose lookup relationship and click next</li>
<li>choose the object that is <b>Related to</b> this object</li>
<li>click next</li>
<li>for field name, enter a name that relates to the related object (not this one)</li>
<li>click next, next, save</li>
</ul>
</div>
</li>
</ol>
</div>

<div id="outline-container-orgadb71e4" class="outline-4">
<h4 id="orgadb71e4"><span class="section-number-4">7.2.2</span> Master-Detail Relationships</h4>
<div class="outline-text-4" id="text-7-2-2">
<p>
Lookups can be casual, but master-detail relationships are tighter. One object is the master and another is a detail. The master object controls certain behaviours of the detail object, like who can view the detail's data. 
</p>

<p>
If you delete the master object, usually the detail object is also deleted. 
</p>
</div>

<ol class="org-ol">
<li><a id="org6b887aa"></a>Create a Master-Detail Relationship<br />
<div class="outline-text-5" id="text-7-2-2-1">
<ul class="org-ul">
<li>on the object manager page, click fields and relationships for the object that is going to be the master</li>
<li>click new</li>
<li>select Master-Detail relationship</li>
<li>choose the object that it is related to</li>
<li>click next</li>
<li>enter the field name (which should be related to the master object)</li>
<li>click next, next, save</li>
</ul>

<p>
You can then view the related tab in an object to see which details have a relationship with that master. 
</p>
</div>
</li>
</ol>
</div>

<div id="outline-container-orgf220729" class="outline-4">
<h4 id="orgf220729"><span class="section-number-4">7.2.3</span> More on relationships</h4>
<div class="outline-text-4" id="text-7-2-3">
<p>
Typically, choose lookup relationships if the relationship sometimes exists. This means that an object can exist in its own right (e.g. a Contact object doesn't have to have an Account object). 
</p>

<p>
In a master-detail relationship, the detail won't work on its own. You should always create the relationship field on the detail object. 
</p>

<p>
You can also have a hierarchicial relationship. Hierarchical relationships are only available on the User object. You can use them for creating management chains between users. 
</p>
</div>
</div>
</div>

<div id="outline-container-org5e898b9" class="outline-3">
<h3 id="org5e898b9"><span class="section-number-3">7.3</span> Work with Schema Builder</h3>
<div class="outline-text-3" id="text-7-3">
<p>
To get to the <b>Schema Builder</b> go to set up and then enter schema builder in the quick find box. This will bring up the objects, with their fields, with links showing the relationships. 
</p>

<p>
You can drag these around the canvas. It can help visualize the data better. 
</p>
</div>

<div id="outline-container-org0ea4f5d" class="outline-4">
<h4 id="org0ea4f5d"><span class="section-number-4">7.3.1</span> Create an Object with the Schema Builder</h4>
<div class="outline-text-4" id="text-7-3-1">
<ul class="org-ul">
<li>click the Elements tab in the left side bar</li>
<li>click Object and drag it on to the canvas</li>
<li>enter information about your object</li>
<li>click save</li>
</ul>
</div>
</div>

<div id="outline-container-orgaa96e85" class="outline-4">
<h4 id="orgaa96e85"><span class="section-number-4">7.3.2</span> Create Fields for the Object with the Schema Builder</h4>
<div class="outline-text-4" id="text-7-3-2">
<ul class="org-ul">
<li>from the elements tab, choose a field type and drag it on to the object you just created</li>
<li>fill out the details about your new field</li>
<li>click save</li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-org4fc2d26" class="outline-2">
<h2 id="org4fc2d26"><span class="section-number-2">8</span> Data Management</h2>
<div class="outline-text-2" id="text-8">
</div>
<div id="outline-container-org96cd5bc" class="outline-3">
<h3 id="org96cd5bc"><span class="section-number-3">8.1</span> Import Data</h3>
<div class="outline-text-3" id="text-8-1">
<p>
There are two ways to import data:
</p>
<ul class="org-ul">
<li>Data import wizard</li>
<li>Data loader</li>
</ul>
</div>

<div id="outline-container-orgf10d221" class="outline-4">
<h4 id="orgf10d221"><span class="section-number-4">8.1.1</span> Data loader</h4>
<div class="outline-text-4" id="text-8-1-1">
<ul class="org-ul">
<li>needs to have less than 50,000 records</li>
<li>objects need to be supported by the wizard</li>
<li>you don't need the import process to be automated.</li>
</ul>
</div>

<ol class="org-ol">
<li><a id="org88fa5f1"></a>Use data import<br />
<div class="outline-text-5" id="text-8-1-1-1">
<ul class="org-ul">
<li>start the wizard
<ul class="org-ul">
<li>from setup, enter data import wizard in quick find</li>
<li>click launch wizard!</li>
</ul></li>
<li>choose the data that you want to import
<ul class="org-ul">
<li>to import accounts, contacts, leads, solutions, person accounts, or campaign members, click standard objects. To import custom objects, click custom objects</li>
<li>specify whether you want to add new records to salesforce, update existing records, or add and update records simultaneously</li>
<li>specify matching and other criteria as necessary</li>
<li>specify the file that contains your data</li>
<li>choose a character encoding method</li>
<li>click next</li>
</ul></li>
<li>map your data fields to salesforce data fields
<ul class="org-ul">
<li>scan the list of mapped data fields and locate any unmapped fields</li>
<li>click map to the left of each unmapped field</li>
<li>in the map your field dialogue box, choose salesforce fields you want to map and click map</li>
<li>to change mappings that sf performed automatically, click change to the left of the appropriate field, then choose the salesforce fields you want to map and click map</li>
<li>click next</li>
</ul></li>
<li>review and start your import
<ul class="org-ul">
<li>review the import information on the review page</li>
<li>click start import</li>
</ul></li>
<li>check import status 
<ul class="org-ul">
<li>the user who started the import will receive an email</li>
</ul></li>
</ul>
</div>
</li>
</ol>
</div>
</div>

<div id="outline-container-org776f2e9" class="outline-3">
<h3 id="org776f2e9"><span class="section-number-3">8.2</span> Export Data</h3>
<div class="outline-text-3" id="text-8-2">
<p>
Two methods exist:
</p>
<ul class="org-ul">
<li>data export service</li>
<li>data loader</li>
</ul>
</div>

<div id="outline-container-org8b83725" class="outline-4">
<h4 id="org8b83725"><span class="section-number-4">8.2.1</span> Data Export Service</h4>
<div class="outline-text-4" id="text-8-2-1">
<ul class="org-ul">
<li>from setup enter data export in quick find</li>
<li>select data export</li>
<li>select export now or schedule export</li>
<li>select the desired encoding for the export file</li>
<li>if you want images, docs, attachments, select the appropriate options</li>
<li>if you schedule your export, select the frequency, start time and dates</li>
<li>under exported data, select the types of data to include in the export</li>
<li>click start or save</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-org890a397" class="outline-2">
<h2 id="org890a397"><span class="section-number-2">9</span> Formulas and Validations</h2>
<div class="outline-text-2" id="text-9">
</div>
<div id="outline-container-orge3a89d9" class="outline-3">
<h3 id="orge3a89d9"><span class="section-number-3">9.1</span> Formula Editor</h3>
<div class="outline-text-3" id="text-9-1">
<ul class="org-ul">
<li>from setup, open the object manager and click the required object</li>
<li>click fields &amp; relationships and new</li>
<li>select formula, and next</li>
<li>provide field label</li>
<li>choose the data type</li>
<li>click next</li>
</ul>
</div>
</div>

<div id="outline-container-org6a6f2d7" class="outline-3">
<h3 id="org6a6f2d7"><span class="section-number-3">9.2</span> Use the Formula Editor</h3>
<div class="outline-text-3" id="text-9-2">
<p>
There are two flavours, simple and advanced. Nearly always use the advanced. It has more tools to create powerful formulas. 
</p>

<p>
The <b>Insert Field</b> button opens a menu that allows you to select fields to use in your formula. Inserting from this menu automatically generates the correct syntax for accessing fields. 
</p>

<p>
The <b>Insert Operator</b> button opens a drop-down list of the available mathematical and logical operators. 
</p>

<p>
The <b>Function</b> menu is where you view and insert formula functions. Functions return a value according to the function used. 
</p>

<p>
The <b>text</b> area is where you enter your formula. Formulas are case sensitive. Whitespace doesn't matter. The standard order of operations applios. 
</p>

<p>
Use <b>Check Syntax</b> button to ensure that everything is in working order before saving. 
</p>
</div>
</div>

<div id="outline-container-org3268003" class="outline-3">
<h3 id="org3268003"><span class="section-number-3">9.3</span> Implement Roll-Up Summary Fields</h3>
<div class="outline-text-3" id="text-9-3">
<p>
Roll-up summary fields calculate values from a set of related records, such as those in a related list. You can create roll-up summary fields that automatically display a value on a master record based on the value of records in a detail record. These detail records must be directly related to the master through a master-detail relationship. 
</p>
</div>

<div id="outline-container-orge30a00d" class="outline-4">
<h4 id="orge30a00d"><span class="section-number-4">9.3.1</span> Creating a Summary Field</h4>
<div class="outline-text-4" id="text-9-3-1">
<ul class="org-ul">
<li>from setup click object manager and click the object required</li>
<li>click fields and relationships</li>
<li>click new</li>
<li>choose roll-up summary field types and click next</li>
<li>enter field label</li>
<li>click next</li>
<li>the summarized object is the detail object that you want to summarize. Choose that detail object</li>
<li>choose the summary type and choose the field to perform the operation on</li>
<li>click next, next and save.</li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-orga92a220" class="outline-2">
<h2 id="orga92a220"><span class="section-number-2">10</span> Salesforce DX</h2>
<div class="outline-text-2" id="text-10">
<p>
A scratch org is a dedicated, configurable, short term environment. 
A Developer Hub is the main salesforce org that you will use to create your scratch orgs.
</p>
</div>

<div id="outline-container-org9065e7f" class="outline-3">
<h3 id="org9065e7f"><span class="section-number-3">10.1</span> Install the command line interface</h3>
<div class="outline-text-3" id="text-10-1">
<p>
Then login to your dev org with the sfdx cli: 
</p>
<pre class="example">
sfdx force:auth:web:login -d -a DevHub
</pre>
</div>
</div>

<div id="outline-container-orgb51b173" class="outline-3">
<h3 id="orgb51b173"><span class="section-number-3">10.2</span> Setup the project on your local machine</h3>
<div class="outline-text-3" id="text-10-2">
<pre class="example">
mkdir my_sfdx_project
cd my_sfdx_project
git clone https://github.com/trailheadapps/dreamhouse-lwc.git
cd dreamhouse-lwc
</pre>

<p>
Create a branch:
</p>
<pre class="example">
git checkout -b my_branch
</pre>
</div>
</div>

<div id="outline-container-org8708c60" class="outline-3">
<h3 id="org8708c60"><span class="section-number-3">10.3</span> Create and Test the Scratch Org</h3>
<div class="outline-text-3" id="text-10-3">
<p>
Create the scratch org and give it an alias:
</p>
<pre class="example">
sfdx force:org:create -s -f config/project-scratch-def.json -a dreamhouse-org
</pre>

<p>
Open the scratch you just created:
</p>
<pre class="example">
sfdx force:org:open
</pre>

<p>
Because you set the scratch org as the default using the -s flag, the system remembers the authentication token and uses it to log in. 
</p>

<p>
Now, push the dreamhouse repo to the scratch org:
</p>
<pre class="example">
sfdx force:source:push
</pre>
</div>
</div>

<div id="outline-container-org92579c1" class="outline-3">
<h3 id="org92579c1"><span class="section-number-3">10.4</span> Assign a permission set to the Dreamhouse App</h3>
<div class="outline-text-3" id="text-10-4">
<pre class="example">
sfdx force:user:permission:assign -n Dreamhouse 
</pre>
</div>
</div>

<div id="outline-container-org55b742c" class="outline-3">
<h3 id="org55b742c"><span class="section-number-3">10.5</span> Import Test Data</h3>
<div class="outline-text-3" id="text-10-5">
<pre class="example">
sfdx force:data:tree:import --plan data/sample-data-plan.json
</pre>
</div>
</div>
<div id="outline-container-org2b4051b" class="outline-3">
<h3 id="org2b4051b"><span class="section-number-3">10.6</span> Test Your App in the Scratch Org</h3>
<div class="outline-text-3" id="text-10-6">
<p>
If the scratch org isn't open, open it with this command:
</p>
<pre class="example">
sfdx force:org:open
</pre>

<p>
Then click the app launcher and choose dreamhouse. Click properties, and you should see 12 new properties. 
</p>
</div>
</div>
</div>

<div id="outline-container-org82fce6f" class="outline-2">
<h2 id="org82fce6f"><span class="section-number-2">11</span> Lightning Flow</h2>
<div class="outline-text-2" id="text-11">
</div>
<div id="outline-container-orge7c3cc8" class="outline-3">
<h3 id="orge7c3cc8"><span class="section-number-3">11.1</span> Choose the right automation tool</h3>
<div class="outline-text-3" id="text-11-1">
<ul class="org-ul">
<li>Process Builder</li>
<li>Flow Builder</li>
</ul>
</div>

<div id="outline-container-org0f52f1f" class="outline-4">
<h4 id="org0f52f1f"><span class="section-number-4">11.1.1</span> Process Builder</h4>
<div class="outline-text-4" id="text-11-1-1">
<p>
Use Process Builder to make processes. This is a web application that shows a GUI. It appears that Process Builder is more high level. 
</p>

<p>
Use process builder when you need to start a behind the scenes business process automatically. 
</p>

<p>
Processes can start when:
</p>
<ul class="org-ul">
<li>a record is created</li>
<li>a record is updated</li>
<li>a platform event occurs</li>
</ul>

<p>
Every process consists of a <b>trigger</b>, at least one <b>criteria node</b> and at least one <b>action</b>. You can configure immediate actions, or scheduled actions. 
</p>
</div>

<ol class="org-ol">
<li><a id="org17011c5"></a>Trigger<br />
<div class="outline-text-5" id="text-11-1-1-1">
<p>
Identify when the process should run. Is this when a record is created, or when it is created or updated?
</p>
</div>
</li>

<li><a id="orgd24c300"></a>Criteria<br />
<div class="outline-text-5" id="text-11-1-1-2">
<p>
This determines whether or not to execute actions. It will return <i>true</i> or <i>false</i>. 
</p>
</div>
</li>


<li><a id="org8ef9029"></a>Action<br />
<div class="outline-text-5" id="text-11-1-1-3">
<p>
What should the process do? This is if the criteria is true. If it is immediate, it haapens as soon as the criteria is true. 
</p>

<p>
If the action is scheduled, it can happen at a given time (e.g. 10 days before a record's close date), or 2 days from now. 
</p>
</div>

<ol class="org-ol">
<li><a id="orga59feec"></a>Actions available:<br />
<div class="outline-text-6" id="text-11-1-1-3-1">
<ul class="org-ul">
<li>create records</li>
<li>update the record that started the process or any related record</li>
<li>submit that record for approval</li>
<li>send emails using a specified email template</li>
<li>post to a chatter feed</li>
</ul>

<p>
If you need more than this, build and autolaunched flow or an Apex class to fill that gap. Then call the flow or Apex class from the process. 
</p>
</div>
</li>
</ol>
</li>

<li><a id="orga7a45ad"></a>Process Types<br />
<div class="outline-text-5" id="text-11-1-1-4">
<p>
Process builder can automate a few kinds of business processes. The main difference is the trigger: when the process starts. 
</p>

<ul class="org-ul">
<li>record change: a record is created or edited</li>
<li>invocable: a different process can call this one</li>
<li>platform event: a platform message is received</li>
</ul>
</div>
</li>

<li><a id="orgb091039"></a>Build a Process<br />
<div class="outline-text-5" id="text-11-1-1-5">
<ul class="org-ul">
<li>enter process builder in the quick find box</li>
<li>name the process</li>
<li>enter description</li>
<li>configure the process to start</li>
<li>click <b>Add Object</b> (this will start the trigger)</li>
<li>select the object type</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="org59eb00e"></a>Add a Trigger<br />
<div class="outline-text-6" id="text-11-1-1-5-1">
<ul class="org-ul">
<li>select what you want the trigger criteria to be</li>
<li>click save</li>
</ul>
</div>
</li>
<li><a id="org9bd4503"></a>Add criteria<br />
<div class="outline-text-6" id="text-11-1-1-5-2">
<ul class="org-ul">
<li>click <b>Add Criteria</b></li>
<li>name the criteria</li>
<li>leave <b>Conditions are met</b> selected</li>
<li>enter the fields and operators required</li>
<li>click <b>Advanced</b> and select <b>Yes</b> - this means the process ignores record changes that aren't relevant to your defined criteria.</li>
<li>click save</li>
</ul>
</div>
</li>
<li><a id="orga52b475"></a>Add a schedule<br />
<div class="outline-text-6" id="text-11-1-1-5-3">
<ul class="org-ul">
<li>click <b>Set Schedule</b></li>
<li>set the schedule to the required setting</li>
</ul>
</div>
</li>
<li><a id="orga81a3f9"></a>Add Actions<br />
<div class="outline-text-6" id="text-11-1-1-5-4">
<ul class="org-ul">
<li>under <b>immediate actions</b> click <b>Add Action</b></li>
<li>for the action type select the action required (this can be setting the value of a field to equal that of a different field)</li>
<li>click save</li>
</ul>
</div>
</li>
<li><a id="orgb845406"></a>Scheduled Action<br />
<div class="outline-text-6" id="text-11-1-1-5-5">
<ul class="org-ul">
<li>click <b>Add Action</b></li>
<li>choose the <b>Action Type</b></li>
<li>provide a name</li>
<li>select the record type</li>
<li>click save</li>
</ul>
</div>
</li>
</ol>
</li>
</ol>
</div>


<div id="outline-container-orga1d5109" class="outline-4">
<h4 id="orga1d5109"><span class="section-number-4">11.1.2</span> Flow Builder</h4>
<div class="outline-text-4" id="text-11-1-2">
<p>
Use Flow Builder to make flows. It appears that flow builder is more low level. 
</p>

<p>
Use Flow Builder to: 
</p>
<ul class="org-ul">
<li>automate a guided visual experience</li>
<li>add more functionality for a behind-the-scenes process than is available in Process Builder. Use Flow Builder to build the more complex functionality. Then call the resulting flow from the process.</li>
<li>start a behind the scenes business process:
<ul class="org-ul">
<li>when a user clicks something like a button</li>
<li>when a record is created</li>
<li>when a record is updated</li>
<li>when a platform event occurs</li>
<li>at a specified time or frequency</li>
</ul></li>
</ul>
</div>

<ol class="org-ol">
<li><a id="org44ca0b5"></a>Flow Building Blocks<br />
<div class="outline-text-5" id="text-11-1-2-1">
<p>
Every flow is made up of three building blocks:
</p>
<ul class="org-ul">
<li>elements</li>
<li>connectors</li>
<li>resources</li>
</ul>
</div>

<ol class="org-ol">
<li><a id="org99465ce"></a>Elements<br />
<div class="outline-text-6" id="text-11-1-2-1-1">
<p>
Elements appear on the canvas. To add an element, click it, or drag it there from the toolbox.
</p>

<p>
Flow elements fit in to four categories:
</p>
<ul class="org-ul">
<li>screen (to display data to your users)</li>
<li>logic (control the flow of the flow - create branches, update data, loop over sets of data, or wait for a particular time)</li>
<li>actions (do something in salesforce when you have the information)</li>
<li>integrations (connect your flow to an external database by using core actions or Apex actions)</li>
</ul>
</div>
</li>

<li><a id="orgfe5e5c6"></a>Connectors<br />
<div class="outline-text-6" id="text-11-1-2-1-2">
<p>
Connectors define the path that the flow takes at runtime. They tell the flow element to execute next.
</p>
</div>
</li>

<li><a id="org438b36a"></a>Resources<br />
<div class="outline-text-6" id="text-11-1-2-1-3">
<p>
Resources are containers that represent a given value, such as field values or formulas. You can reference resources throughout your flow. For example, look up an account's ID, store that ID in a variable, and later reference that ID to update the account. 
</p>
</div>
</li>
</ol>
</li>

<li><a id="orgf78604a"></a>Build a Flow<br />
<div class="outline-text-5" id="text-11-1-2-2">
<ul class="org-ul">
<li>from the toolbox drag the elements that you need</li>
<li>name the element</li>
<li>connect the elements by dragging the bottom part of the element to the next element on the canvas</li>
<li>click <b>save</b></li>
</ul>
</div>
</li>

<li><a id="org1e00254"></a>Distribute A Flow<br />
<ol class="org-ol">
<li><a id="org7b41f8e"></a>Activate the Flow<br />
<div class="outline-text-6" id="text-11-1-2-3-1">
<ul class="org-ul">
<li>in the quick find box, type Flows</li>
<li>click the flow that you want to change</li>
<li>from the button bar in the flow builder, click <b>Activate</b></li>
</ul>
</div>
</li>

<li><a id="org68fc741"></a>Add the Flow to a page<br />
<div class="outline-text-6" id="text-11-1-2-3-2">
<ul class="org-ul">
<li>from quick find box enter <b>Builder</b> and select <b>Lightning App Builder</b></li>
<li>click <b>New</b></li>
<li>select the page that you want to add the flow to and clickt <b>Next</b></li>
<li>give the page a name and click <b>Next</b></li>
<li>drag the flow component to the page and place it where you need it</li>
<li>save your changes</li>
<li>if this is a new page, you will need to <b>Activate</b> the page</li>
</ul>
</div>
</li>

<li><a id="orga669d5b"></a>Check the Permissions for the Flow<br />
<div class="outline-text-6" id="text-11-1-2-3-3">
<p>
You may need to change the permissions of the flow to ensure that users can use it. 
</p>
</div>
</li>
</ol>
</li>
</ol>
</div>

<div id="outline-container-org0916a32" class="outline-4">
<h4 id="org0916a32"><span class="section-number-4">11.1.3</span> Combining Process Builder and Flow Builder</h4>
<div class="outline-text-4" id="text-11-1-3">
<p>
When process builder isn't enough, you can add a Flow Builder to it. 
</p>

<p>
Configure the more complex functionality with the Flow Builder and then add the Flow to a Process built with Process Builder.
</p>

<p>
Build the Flow Builder as documented <a href="#orgf78604a">11.1.2.2</a>, and then add it to the Process Builder. 
</p>

<p>
To add a Flow Builder Process to a Process Builder Process, add it to the Action box. 
</p>
</div>
</div>
</div>





<div id="outline-container-orgd5486e7" class="outline-3">
<h3 id="orgd5486e7"><span class="section-number-3">11.2</span> Apex</h3>
<div class="outline-text-3" id="text-11-2">
<p>
When you need something more than can be provided by Process Builder or Flow Builder, you can code it with Apex. 
</p>
</div>
</div>

<div id="outline-container-org30be136" class="outline-3">
<h3 id="org30be136"><span class="section-number-3">11.3</span> Approval Process</h3>
<div class="outline-text-3" id="text-11-3">
<p>
This is another tool, which isn't included in Lightning Flow, but it offers a declarative way to automate a process.
</p>
</div>
<div id="outline-container-org7bff82e" class="outline-4">
<h4 id="org7bff82e"><span class="section-number-4">11.3.1</span> Customize how records get Approved with Approvals</h4>
<div class="outline-text-4" id="text-11-3-1">
<p>
An approval automates how Salesforce records are approved in your org. 
</p>

<p>
In an approval process you specify:
</p>
<ul class="org-ul">
<li>the steps necessary for a record to be approved</li>
<li>the actions to take based on what happened during the approval process (approved or rejected).</li>
</ul>
</div>
</div>

<div id="outline-container-orga190bf2" class="outline-4">
<h4 id="orga190bf2"><span class="section-number-4">11.3.2</span> How to build an approval process</h4>
<div class="outline-text-4" id="text-11-3-2">
<ul class="org-ul">
<li>in the quick find box, enter <b>Approval Process</b></li>
<li>for the <b>Manage Approval Process For</b> select the object that is required</li>
<li>click <b>Create New Approval Process</b> and <b>Use Jump Start Wizard</b></li>
<li>configure the approval process 
<ul class="org-ul">
<li>give it a name</li>
<li>give fields and values accordingly</li>
<li>enter any criteria required</li>
<li>select the approver</li>
</ul></li>
<li>save the approval process</li>
<li>click <b>View Approval Process Detail Page</b></li>
<li>under <b>Final Approval Actions</b>, click <b>Add New</b> and <b>Field Update</b></li>
<li>provide the values required</li>
<li>click save</li>
<li>under <b>Final Rejection Actions</b> click <b>Add New</b> and <b>Field Update</b></li>
<li>provide the required settings</li>
<li>click save</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-org56411de" class="outline-2">
<h2 id="org56411de"><span class="section-number-2">12</span> Apex Basics and Database</h2>
<div class="outline-text-2" id="text-12">
</div>
<div id="outline-container-orgba91c43" class="outline-3">
<h3 id="orgba91c43"><span class="section-number-3">12.1</span> Get Started with Apex</h3>
<div class="outline-text-3" id="text-12-1">
<p>
Apex is saved, compiled and executed on the Lightning platform. It is object oriented, strongly typed, multitenant aware, integrates with the database, data focussed, easy to use, easy to test, and versioned.
</p>
</div>
<div id="outline-container-orgadf1c29" class="outline-4">
<h4 id="orgadf1c29"><span class="section-number-4">12.1.1</span> Data Types</h4>
<div class="outline-text-4" id="text-12-1-1">
<ul class="org-ul">
<li>primitive (Integer, Double, Long, Date, Datetime, String, ID, Boolean, etc.)</li>
<li>sObject (such as Account or MyCustomObject)</li>
<li>collection:
<ul class="org-ul">
<li>a list (or array)</li>
<li>a set of primitives</li>
<li>a map of primitives</li>
</ul></li>
<li>a typed list of values</li>
<li>user defined Apex classes</li>
<li>system supplied Apex classes</li>
</ul>
</div>

<ol class="org-ol">
<li><a id="org4f0201d"></a>Apex Collections: List<br />
<div class="outline-text-6" id="text-12-1-1-0-1">
<p>
You can declare a variable to be a list in two ways:
</p>
<ul class="org-ul">
<li>List&lt;String&gt; colours = new List&lt;String&gt;;</li>
<li>String[] colours = new List&lt;String&gt;;</li>
</ul>

<p>
It's easier to create a list rather than an array, as you can't be sure of how many items will be in a list. 
</p>

<p>
You can add items to the list:
</p>

<p>
colours.add('orange');
colours.add('purple');
</p>
</div>
</li>
</ol>
</div>
<div id="outline-container-org54fc5a8" class="outline-4">
<h4 id="org54fc5a8"><span class="section-number-4">12.1.2</span> Apex Classes</h4>
<div class="outline-text-4" id="text-12-1-2">
<p>
Class methods can be called by triggers and other classes. 
</p>

<p>
To create an Apex class, go to the developer console and type <b>File</b> &gt; <b>New</b> &gt; <b>Class</b>. 
</p>

<p>
You can execute code by using the <b>Debug</b> &gt; <b>Open Execute Anonymous Window</b>. Here you can instantiate your class:
</p>
<pre class="example">
EmailManager em = new EmailManager();
em.sendMail('email@email.com', 'Trailhead', '123 body1);
</pre>
<p>
Click <b>Execute</b>.
</p>

<p>
Check the output using the debug logs. 
</p>
</div>
</div>
</div>

<div id="outline-container-orgf15b356" class="outline-3">
<h3 id="orgf15b356"><span class="section-number-3">12.2</span> Use sObjects</h3>
<div class="outline-text-3" id="text-12-2">
<p>
Every record in SF is natively represented as an <b>sObject</b> in Apex. The Account sObject is an abstraction of the account record and holds the account field information in memory as an object. 
</p>

<p>
Each Salesforce record is represented as an <b>sObject</b> before it is inserted into the database. When a record is retrieved, it is stored as an sObject. If you have added custom objects to your org, they will be represented with an sObject and the <b>_<sub>c</sub></b> suffix. 
</p>
</div>

<div id="outline-container-orgf1d8b54" class="outline-4">
<h4 id="orgf1d8b54"><span class="section-number-4">12.2.1</span> Creating sObject Variables</h4>
<div class="outline-text-4" id="text-12-2-1">
<ul class="org-ul">
<li>declare a variable and assign it to an sObject instance</li>
</ul>
<pre class="example">
Accout acct = new Account(Name='Acme');
</pre>
</div>
</div>
</div>

<div id="outline-container-org9cd0e03" class="outline-3">
<h3 id="org9cd0e03"><span class="section-number-3">12.3</span> sObject and Field Names</h3>
<div class="outline-text-3" id="text-12-3">
<p>
The name of the sObjects corresponds to the API names of the corresponding standard or custom objects. 
</p>

<p>
API names can differ from the label names. 
</p>

<p>
For custom objects and custom fields the API name always ends with the suffix <i>_<sub>c</sub></i>. For custom relationships, the API name ends with <i>_<sub>r</sub></i>. 
</p>

<p>
To find standard object look up the field API names here <a href="https://developer.salesforce.com/docs/atlas.en-us.224.0.object_reference.meta/object_reference/">https://developer.salesforce.com/docs/atlas.en-us.224.0.object_reference.meta/object_reference/</a>. 
</p>

<p>
Your custom objects will be visible in your org. 
</p>
</div>
</div>

<div id="outline-container-org0b229db" class="outline-3">
<h3 id="org0b229db"><span class="section-number-3">12.4</span> Creating sObjects and adding Fields</h3>
<div class="outline-text-3" id="text-12-4">
<p>
You can create a new object with:
</p>
<pre class="example">
Account acct = new Account();
</pre>

<p>
However, you can also pass in variables at instantiation:
</p>
<pre class="example">
Account acct = new Account(Name='Acme', Phone='01256 1234455', NumberofEmployees=100);
</pre>

<p>
You can also use the dot notation:
</p>
<pre class="example">
Account acct = new Account();
acct.Name = 'Acme';
acct.Phone = '012451234455';
acct.NumberofEmployees=100;
</pre>
</div>
</div>

<div id="outline-container-org14bf99f" class="outline-3">
<h3 id="org14bf99f"><span class="section-number-3">12.5</span> Working with the Generic sObject Type</h3>
<div class="outline-text-3" id="text-12-5">
<p>
When you don't know the type of an sObject your method is calling, you can use the generic sObject data type.
</p>

<p>
Variables that are declared with the generic sObject data type can reference any Salesforce record, whether it is a standard or custom object record. 
</p>
</div>
</div>

<div id="outline-container-org62bf317" class="outline-3">
<h3 id="org62bf317"><span class="section-number-3">12.6</span> Casting Generic sObjects to Specific sObject Types</h3>
<div class="outline-text-3" id="text-12-6">
<p>
When you're dealing with generic objects, sometimes you need to cast them to a specific sObject type. One of the benefits of doing so is to be able to access fields using dot notation, which is not available on generic sObject. 
</p>

<p>
This is how you cast a generic sObject to a specific object class:
</p>
<pre class="example">
Acct acct = (Account)myGenericObject;
String name = acct.Name;
String phone = acct.Phone;
</pre>

<p>
The (Account) is the casting definition here. 
</p>
</div>
</div>

<div id="outline-container-org13d9857" class="outline-3">
<h3 id="org13d9857"><span class="section-number-3">12.7</span> Manipulate Records with DML</h3>
<div class="outline-text-3" id="text-12-7">
<p>
DML = Data Manipulation Language.
</p>

<p>
Once you have created an object, you can insert it into the database with:
</p>
<pre class="example">
insert Acct;
</pre>

<p>
The following DML statements are:
</p>
<ul class="org-ul">
<li>insert</li>
<li>update</li>
<li>upsert</li>
<li>delete</li>
<li>undelete</li>
<li>merge</li>
</ul>

<p>
Each DML statement accepts a single sObject or a list of sObjects. Operating on a list of sObjects is a more efficient way for processing records. 
</p>

<p>
The upsert DML operation creates new records and updates sObjects records within a single statement, using a specified field to determine the prescence of existing objects, or the ID field if no field is specified. 
</p>

<p>
The merge field statement merges up to three records of the same sObject type into one of the records, deleting the others, and reparenting any relating records. 
</p>
</div>

<div id="outline-container-org5db0b66" class="outline-4">
<h4 id="org5db0b66"><span class="section-number-4">12.7.1</span> ID Field Auto-Assignedd to New Records</h4>
<div class="outline-text-4" id="text-12-7-1">
<p>
When inserting records, the system assigns an ID for each record. This snippet shows you how to find the ID of an sObject. 
</p>

<pre class="example">
insert acct;
ID acctID = acct.Id;
System.debug('ID = ' + acctID);
</pre>
</div>
</div>

<div id="outline-container-org650042e" class="outline-4">
<h4 id="org650042e"><span class="section-number-4">12.7.2</span> Bulk DML</h4>
<div class="outline-text-4" id="text-12-7-2">
<p>
You can perform DML operations either on a single object or in a bulk on a list of sObjects. Performing bulk DML is recommended as you will not hit any limits. This example inserts contacts in bulk by inserting a list of contacts in one call:
</p>

<pre class="example">
// Create a list of contacts
List&lt;Contact&gt; conList = new List&lt;Contact&gt; {
    new Contact(FirstName='Joe',LastName='Smith',Department='Finance'),
	new Contact(FirstName='Kathy',LastName='Smith',Department='Technology'),
	new Contact(FirstName='Caroline',LastName='Roth',Department='Finance'),
	new Contact(FirstName='Kim',LastName='Shain',Department='Education')};

// Bulk insert all contacts with one DML call
insert conList;
// List to hold the new contacts to update
List&lt;Contact&gt; listToUpdate = new List&lt;Contact&gt;();
// Iterate through the list and add a title only
//   if the department is Finance
for(Contact con : conList) {
    if (con.Department == 'Finance') {
	con.Title = 'Financial analyst';
	// Add updated contact sObject to the list.
	listToUpdate.add(con);
    }
}
// Bulk update all contacts with one DML call
update listToUpdate;
</pre>
</div>
</div>

<div id="outline-container-org598f910" class="outline-4">
<h4 id="org598f910"><span class="section-number-4">12.7.3</span> Upserting Records</h4>
<div class="outline-text-4" id="text-12-7-3">
<p>
If you have a list of new and existing records, you can process insertions and updates in the list by using the <b>upsert</b> statement. 
</p>

<p>
If you don't specify a field when calling this argument, the <b>upsert</b> statement uses the sObject's ID to match the sObject with existing records. You can specify a field to use for matching. 
</p>

<p>
The syntax follows this format:
</p>
<pre class="example">
upsert sObject | sObject[]
upsert sObject | sObject[] field
</pre>

<p>
The optional field is a field token. To specify the MyExternalID field, the statement would be:
</p>
<pre class="example">
upsert sObjectList Account.Fields.MyExternalID;
</pre>

<p>
Upsert uses the sObject record's primary key (the ID) an idLookup field, or an external ID field to determine whether it should create a new record or update an existing one:
</p>

<ul class="org-ul">
<li>if the key is not matched, a new object will be created</li>
<li>if the key is matched, the existing record is updated</li>
<li>if the key is matched multiple times, an error is generated and the object is neither inserted or updated</li>
</ul>

<p>
This example shows how to update an existing contact record and insert a new one in one call. It updates the existing Josh record and inserts Kathy. 
</p>

<pre class="example">
// Insert the Josh contact
Contact josh = new Contact(FirstName='Josh',LastName='Kaplan',Department='Finance');       
insert josh;
// Josh's record has been inserted
//   so the variable josh has now an ID
//   which will be used to match the records by upsert
josh.Description = 'Josh\'s record has been updated by the upsert operation.';
// Create the Kathy contact, but don't persist it in the database
Contact kathy = new Contact(FirstName='Kathy',LastName='Brown',Department='Technology');
// List to hold the new contacts to upsert
List&lt;Contact&gt; contacts = new List&lt;Contact&gt; { josh, kathy };
// Call upsert
upsert contacts;
// Result: Josh is updated and Kathy is created.
</pre>

<p>
If an <b>insert</b> statement had been used, a duplicate Josh record would have been created. 
</p>
</div>
</div>

<div id="outline-container-org36a4b01" class="outline-4">
<h4 id="org36a4b01"><span class="section-number-4">12.7.4</span> Deleting Records</h4>
<div class="outline-text-4" id="text-12-7-4">
<p>
Deleted records aren't permanently deleted from the Lightning Platform, but are put in a Recycling Bin for 15 days. They can be restored within the 15 days. This example shows you how to delete a record based on a SQL lookup:
</p>
<pre class="example">
Contact[] contactsDel = [SELECT Id FROM Contact WHERE LastName='Smith']; 
delete contactsDel;
</pre>

<p>
Any record with the last name of 'Smith' will be deleted. 
</p>
</div>
</div>
</div>

<div id="outline-container-org6f665c0" class="outline-3">
<h3 id="org6f665c0"><span class="section-number-3">12.8</span> DML Statement Exceptions</h3>
<div class="outline-text-3" id="text-12-8">
<p>
If a DML operation fails, it returns an exception type of <i>DmlException</i>. You can catch exceptions in your code to handle error conditions. 
</p>

<p>
This example produces a <i>DmlException</i> (it attempts to insert an account without the required Name field). The exception is then caught. 
</p>

<pre class="example">
try {
    // This causes an exception because 
    //   the required Name field is not provided.
    Account acct = new Account();
    // Insert the account 
    insert acct;
} catch (DmlException e) {
    System.debug('A DML exception has occurred: ' +
		e.getMessage());
}
</pre>
</div>
</div>

<div id="outline-container-orgc18bbad" class="outline-3">
<h3 id="orgc18bbad"><span class="section-number-3">12.9</span> Database Methods</h3>
<div class="outline-text-3" id="text-12-9">
<p>
Apex contains a Database class, which provides methods that perform DML operations and mirror the DML statement counterparts. 
</p>

<p>
The methods are static and are called on the class name:
</p>

<ul class="org-ul">
<li><code>Database.insert()</code></li>
<li><code>Database.update()</code></li>
<li><code>Database.upsert()</code></li>
<li><code>Database.delete()</code></li>
<li><code>Database.undelete()</code></li>
<li><code>Database.merge()</code></li>
</ul>

<p>
Unlike DML statements, Database methods have an optional <code>allOrNone</code> parameter that allows you to specify whether the operation should partially succeed. When this parameter is set to <i>false</i> if errors occur on a partial set of records, the successful records will be committed and the errors will be returned for the failed records. Also, no exceptions are thrown with the partial success option. 
</p>

<p>
You can retrieve results by assigning them to a list variable:
</p>
<pre class="example">
Database.SaveResult[] results = Database.insert(recordList, false);
</pre>

<p>
By default, the <b>allOrNone</b> parameter is set to <i>true</i>. 
</p>
</div>

<div id="outline-container-org21fd5f8" class="outline-4">
<h4 id="org21fd5f8"><span class="section-number-4">12.9.1</span> Example of Inserts with Partial Success</h4>
<div class="outline-text-4" id="text-12-9-1">
<p>
This example, uses the Database methods, and the bulk DML with the partial success method. One of the contacts in the list does not have fields (deliberately) and will cause an error because a contact cannot be saved without the <b>required</b> <b>Lastname</b> field. Three other contacts are saved. The last part iterates through the returned results and writes debug messages to the debug log
</p>

<pre class="example">
// Create a list of contacts
List&lt;Contact&gt; conList = new List&lt;Contact&gt; {
	new Contact(FirstName='Joe',LastName='Smith',Department='Finance'),
	new Contact(FirstName='Kathy',LastName='Smith',Department='Technology'),
	new Contact(FirstName='Caroline',LastName='Roth',Department='Finance'),
	new Contact()};

// Bulk insert all contacts with one DML call
Database.SaveResult[] srList = Database.insert(conList, false);
// Iterate through each returned result
for (Database.SaveResult sr : srList) {
    if (sr.isSuccess()) {
	// Operation was successful, so get the ID of the record that was processed
	System.debug('Successfully inserted contact. Contact ID: ' + sr.getId());
    } else {
	// Operation failed, so get all errors
	for(Database.Error err : sr.getErrors()) {
	    System.debug('The following error has occurred.');
	    System.debug(err.getStatusCode() + ': ' + err.getMessage());
	    System.debug('Contact fields that affected this error: ' + err.getFields());
	 }
    }
}
</pre>
</div>
</div>
<div id="outline-container-org3b06047" class="outline-4">
<h4 id="org3b06047"><span class="section-number-4">12.9.2</span> DML Statements or Database Methods?</h4>
<div class="outline-text-4" id="text-12-9-2">
<p>
Use DML statements if you want any error that occurs during bulk DML processing to be thrown as an Apex exception that immediately interrupts control flow (by using try..catch blocks). This is similar to the way exceptions are handled in most database procedural languages. 
</p>

<p>
Use Database class methods if you want to allow partial success of a bulk DML operation - if a record fails, the remainder of the DML operation can still succeed. Your application can then inspect the rejected records and possibly retry the operation. 
</p>
</div>
</div>

<div id="outline-container-orgbc71e52" class="outline-4">
<h4 id="orgbc71e52"><span class="section-number-4">12.9.3</span> Working with Related Records</h4>
<div class="outline-text-4" id="text-12-9-3">
<p>
Create and manage records that are related to each other through relationships. 
</p>
</div>
<ol class="org-ol">
<li><a id="org7de09f1"></a>Inserting Related Records<br />
<div class="outline-text-5" id="text-12-9-3-1">
<p>
This example shows how to add a contact to an account (the related record) by setting AccountId field on the contact. The Contact and Account are linked through a lookup relationship. 
</p>

<pre class="example">
Account acct = new Account(Name='SFDC Account');
insert acct;
// Once the account is inserted, the sObject will be 
// populated with an ID.
// Get this ID.
ID acctID = acct.ID;
// Add a contact to this account.
Contact mario = new Contact(
    FirstName='Mario',
    LastName='Ruiz',
    Phone='415.555.1212',
    AccountId=acctID);
insert mario;
</pre>
</div>
</li>

<li><a id="orgd93b985"></a>Updating Related Records<br />
<div class="outline-text-5" id="text-12-9-3-2">
<p>
Fields on related records require a separate DML call. You will need to lookup anything that is already existing before carrying out the <b>insert</b>. 
</p>

<p>
The following example, shows the SELECT statement, then the setting of the fields to the required data, and then the related record's field:
</p>
<pre class="example">
// Query for the contact, which has been associated with an account.
Contact queriedContact = [SELECT Account.Name 
			  FROM Contact 
			  WHERE FirstName = 'Mario' AND LastName='Ruiz'
			  LIMIT 1];
// Update the contact's phone number
queriedContact.Phone = '(415)555-1213';
// Update the related account industry
queriedContact.Account.Industry = 'Technology';
// Make two separate calls 
// 1. This call is to update the contact's phone.
update queriedContact;
// 2. This call is to update the related account's Industry field.
update queriedContact.Account; 
</pre>
</div>
</li>

<li><a id="org33304be"></a>Deleting Related Records<br />
<div class="outline-text-5" id="text-12-9-3-3">
<p>
The <i>delete</i> operation supports cascading deletions. If you delete a parent object, you delete its children automatically, as long as each chil record can be deleted. 
</p>

<p>
This example will delete an Account and any related contacts. 
</p>

<pre class="example">
Account[] queriedAccounts = [SELECT Id FROM Account WHERE Name='SFDC Account'];
delete queriedAccounts;
</pre>
</div>
</li>
</ol>
</div>
</div>

<div id="outline-container-org725c2c9" class="outline-3">
<h3 id="org725c2c9"><span class="section-number-3">12.10</span> Write SOQL Queries</h3>
<div class="outline-text-3" id="text-12-10">
<p>
To read a record from the database, you must write a query, in the form of Salesforce Object Query Language. 
</p>

<p>
You can embed SOQL in your Apex code. When it is embedded, it is referred to as <b>inline SOQL</b>. 
</p>

<p>
Wrap the SOQL statement within square brackets and assign the return to a variable:
</p>

<pre class="example">
Account [] accts = [SELECT Name, Phone FROM Account];
</pre>
</div>

<div id="outline-container-org3ac43a7" class="outline-4">
<h4 id="org3ac43a7"><span class="section-number-4">12.10.1</span> Use the Query Editor</h4>
<div class="outline-text-4" id="text-12-10-1">
<p>
The developer console has a specially designed tool for queries. It's a good way to test the SOQL you are writing. 
</p>
</div>
</div>
<div id="outline-container-org7064221" class="outline-4">
<h4 id="org7064221"><span class="section-number-4">12.10.2</span> Basic SOQL Syntax</h4>
<div class="outline-text-4" id="text-12-10-2">
<pre class="example">
SELECT fields FROM ObjectName [WHERE Condition]
</pre>
<p>
The WHERE clause is optional. 
</p>

<p>
Unlike other SQL languages, you cannot specify <code>SELECT * FROM</code> for all fields. You must specify every field you want to return. However, you do not need to specify the <code>Id</code> field as this is always returned. You may want to specify it if it is the only field that you require. 
</p>
</div>
</div>

<div id="outline-container-orgaca3bd3" class="outline-4">
<h4 id="orgaca3bd3"><span class="section-number-4">12.10.3</span> Filtering Query Results with Conditions</h4>
<div class="outline-text-4" id="text-12-10-3">
<p>
You can limit the amount of results you get with conditions (i.e. using the WHERE clause). 
</p>

<pre class="example">
SELECT Name,Phone FROM Account WHERE Name='SFDC Computing'
</pre>
<p>
or even further:
</p>
<pre class="example">
SELECT Name,Phone FROM Account WHERE (Name='SFDC Computing' AND NumberOfEmployees&gt;25)
</pre>
<p>
or further still:
</p>
<pre class="example">
SELECT Name,Phone FROM Account WHERE (Name='SFDC Computing' OR (NumberOfEmployees&gt;25 AND BillingCity='Los Angeles'))
</pre>

<p>
Instead of using the equal operator (<code>=</code>) for comparison, you can perform fuzzy matches by using the <code>LIKE</code> operator. For example, you can retrieve all accounts whose names start with SFDC by using this condition: <code>WHERE Name LIKE 'SFDC%'</code>. The <code>%</code> wildcard character matches any or no character. The <code>_</code> character in contrast can be used to match just one character.
</p>
</div>
</div>

<div id="outline-container-orgad7845f" class="outline-4">
<h4 id="orgad7845f"><span class="section-number-4">12.10.4</span> Ordering Query Results</h4>
<div class="outline-text-4" id="text-12-10-4">
<p>
This can be done with the <code>ORDER BY</code> clause. 
</p>
<pre class="example">
SELECT Name,Phone FROM Account ORDER BY Name
</pre>
<p>
By default, the order returned is ordered using <code>ASC</code>. You can reverse this:
</p>
<pre class="example">
SELECT Name,Phone FROM Account ORDER BY Name DESC
</pre>

<p>
You cannot sort on rich text fields, or multi-select lists. 
</p>
</div>
</div>

<div id="outline-container-orga00043b" class="outline-4">
<h4 id="orga00043b"><span class="section-number-4">12.10.5</span> Limit the Number of Records Returned</h4>
<div class="outline-text-4" id="text-12-10-5">
<p>
You can limit the number of results returned using the <code>LIMIT n</code> clause. 
</p>

<pre class="example">
Account oneAccountOnly = [SELECT Name,Phone FROM Account LIMIT 1];
</pre>
</div>
</div>
<div id="outline-container-org5f9829d" class="outline-4">
<h4 id="org5f9829d"><span class="section-number-4">12.10.6</span> Combining all the above operators</h4>
<div class="outline-text-4" id="text-12-10-6">
<pre class="example">
SELECT Name,Phone FROM Account 
		   WHERE (Name = 'SFDC Computing' AND NumberOfEmployees&gt;25)
		   ORDER BY Name
		   LIMIT 10
</pre>
<p>
To get output to the debug console, assign it to a variable and output that variable to the debug console:
</p>
<pre class="example">
Account[] accts = [SELECT Name,Phone FROM Account 
		   WHERE (Name='SFDC Computing' AND NumberOfEmployees&gt;25)
		   ORDER BY Name
		   LIMIT 10];
System.debug(accts.size() + ' account(s) returned.');
// Write all account array info
System.debug(accts);
</pre>
</div>
</div>

<div id="outline-container-org951cd2f" class="outline-4">
<h4 id="org951cd2f"><span class="section-number-4">12.10.7</span> Accessing Variables in SOQL Queries</h4>
<div class="outline-text-4" id="text-12-10-7">
<p>
You may have a variable that you would like to search for. Use the <code>:</code> notation to refer to that variable, thus:
</p>
<pre class="example">
String targetDepartment = 'Wingo';
Contact[] techContacts = [SELECT FirstName,LastName 
			  FROM Contact WHERE Department=:targetDepartment];
</pre>
</div>
</div>

<div id="outline-container-orgcd4c2ee" class="outline-4">
<h4 id="orgcd4c2ee"><span class="section-number-4">12.10.8</span> Querying Relatede Records</h4>
<div class="outline-text-4" id="text-12-10-8">
<p>
Records can be linked to each through relationships: lookup relationships or master-detail relationships. The Contact has a lookup relationship to Account. When you create a Contact, you cat associate it with an Account. These will be listed on the <b>Related List</b> on the Account's page. You can find these using SOQL. 
</p>

<p>
To get child records, you add an inner query for the child records. The <code>FROM</code> clause of the inner query runs against the relationship name, rather than a Salesforce object name. 
</p>

<p>
This example contains an inner clause to get all contacts that are associated with each returned account. The <code>FROM</code> clause specifies the Contacts relationship, which is a default relationship on Account that links accounts and contacts:
</p>

<pre class="example">
SELECT Name, (SELECT LastName FROM Contacts) FROM Account WHERE Name = 'SFDC Computing'
</pre>
<p>
This example shows the SOQL query embedded in Apex and shows how to get the child records from the SOQL result by using the Contact relationship name on the Object:
</p>
<pre class="example">
Account[] acctsWithContacts = [SELECT Name, (SELECT FirstName,LastName FROM Contacts)
			       FROM Account 
			       WHERE Name = 'SFDC Computing'];
// Get child records
Contact[] cts = acctsWithContacts[0].Contacts;
System.debug('Name of first associated contact: ' 
	     + cts[0].FirstName + ', ' + cts[0].LastName);
</pre>
</div>
</div>

<div id="outline-container-orgdca7616" class="outline-4">
<h4 id="orgdca7616"><span class="section-number-4">12.10.9</span> Dot Notation</h4>
<div class="outline-text-4" id="text-12-10-9">
<p>
You can traverse a relationship from a child object (contact) to a field on its parent (Account.Name) by using dot notation. For example, the following Apex snippet queries contact records whose first name is Carol and is able to retrieve the name of Carol's associated account by traversing the relationship between accounts and contacts. 
</p>

<pre class="example">
Contact[] cts = [SELECT Account.Name FROM Contact 
		 WHERE FirstName = 'Carol' AND LastName='Ruiz'];
Contact carol = cts[0];
String acctName = carol.Account.Name;
System.debug('Carol\'s account name is ' + acctName);
</pre>

<p>
Here, the key part is <code>carol.Account.name</code>. 
</p>
</div>
</div>

<div id="outline-container-org9988cbe" class="outline-4">
<h4 id="org9988cbe"><span class="section-number-4">12.10.10</span> Querying Record in Batches by Using SOQL For Loops</h4>
<div class="outline-text-4" id="text-12-10-10">
<p>
With a SOQL for loop, you can include a SOQL within a <code>for</code> loop. The results of a SOQL query can be iterated over within the loop. SOQL for loops use a different method for retrieving records - records are retrieved using efficient chunking with calls to the <code>query</code> and <code>queryMore</code> methods of the SOAP API. By using SOQL for loops, you can avoid hitting the heap size limit. 
</p>

<p>
SOQL <code>for</code> loops iterate over all the sObject records returned by a SOQL query. 
The syntax of a SOQL <code>for</code> loop is either:
</p>
<pre class="example">
for (variable : [soql_query]){
  code_block
}
</pre>
<p>
or 
</p>
<pre class="example">
for (variable_list : [soql_query]){
  code_block
}
</pre>

<p>
Both <code>variable</code> and <code>variable_list</code> must be the same type as the sObjects that are returned by the <code>sql_query</code>. 
</p>

<p>
It is preferable to use the sObject list format of the SOQL for loop as the loop executes once for each batch of 200 sObjects. Doing so enables you to work on batches of records and perform DML operations in batch, which helps avoid reaching governor limits. 
</p>

<pre class="example">
insert new Account[]{new Account(Name = 'for loop 1'), 
		     new Account(Name = 'for loop 2'), 
		     new Account(Name = 'for loop 3')};
// The sObject list format executes the for loop once per returned batch
// of records
Integer i=0;
Integer j=0;
for (Account[] tmp : [SELECT Id FROM Account WHERE Name LIKE 'for loop _']) {
    j = tmp.size();
    i++;
}
System.assertEquals(3, j); // The list should have contained the three accounts
		       // named 'yyy'
System.assertEquals(1, i); // Since a single batch can hold up to 200 records and,
		       // only three records should have been returned, the 
		       // loop should have executed only once
</pre>

<p>
More about SOQL can be read here <a href="https://developer.salesforce.com/docs/atlas.en-us.224.0.soql_sosl.meta/soql_sosl/sforce_api_calls_soql_sosl_intro.htm">https://developer.salesforce.com/docs/atlas.en-us.224.0.soql_sosl.meta/soql_sosl/sforce_api_calls_soql_sosl_intro.htm</a>
</p>
</div>

<ol class="org-ol">
<li><a id="orge53038f"></a>Activity for this Unit<br />
<div class="outline-text-5" id="text-12-10-10-1">
<p>
Create an Apex class that returns contacts based on incoming parameters.
For this challenge, you will need to create a class that has a method accepting two strings. The method searches for contacts that have a last name matching the first string and a mailing postal code matching the second. It gets the ID and Name of those contacts and returns them.
</p>

<p>
The Apex class must be called ContactSearch and be in the public scope
The Apex class must have a public static method called searchForContacts
    The method must accept two incoming strings as parameters
    The method should then find any contact that has a last name matching the first string, and mailing postal code (API name: MailingPostalCode) matching the second string
    The method should finally return a list of Contact records of type List that includes the ID and Name fields
</p>

<pre class="example">
public class ContactSearch {
    public static List&lt;Contact&gt; searchForContacts(String lastNameSearch, String PostalCode){
	List&lt;Contact&gt; Contacts = [select Id, Name from Contact where Lastname=:lastNameSearch AND MailingPostalCode=:PostalCode];        
	return Contacts;
    }
}
</pre>
</div>
</li>
</ol>
</div>
</div>


<div id="outline-container-orgbca77da" class="outline-3">
<h3 id="orgbca77da"><span class="section-number-3">12.11</span> When to use SOSL instead of SOQL?</h3>
<div class="outline-text-3" id="text-12-11">
<p>
Whether you use SOQL or SOSL depends on what you know about the objecs or the fields you want to search. SOSL is a programmatic way of performing a text-based search against the search index. 
</p>

<p>
Use SOQL when you know which objects the data resides in and you want to:
</p>
<ul class="org-ul">
<li>retrieve data from a single object or from multiple objects that are related to one another</li>
<li>count the number of records that meet specific criteria</li>
<li>sort results as part of a query</li>
<li>retrieve data from number, date, or checkbox</li>
</ul>

<p>
Use SOSL when you don't know which object or fields the data resides in, and you want to:
</p>
<ul class="org-ul">
<li>retrieve data for a specific term that you know exists within a field. Because SOSL can tokenize multiple terms within a field and build a search index from this, SOSL searches are faster and can return more relevant results</li>
<li>retrieve multiple objects and fields efficiently where the objects might or might not be related to one another</li>
<li>retrieve data for a particular division in an organization using the division feature</li>
<li>retrieve data that has asian characters (e.g. Chinese characters)</li>
</ul>
</div>
</div>

<div id="outline-container-orgecfb73c" class="outline-3">
<h3 id="orgecfb73c"><span class="section-number-3">12.12</span> Write SOSL Queries</h3>
<div class="outline-text-3" id="text-12-12">
<p>
Salesforce Object Search Language is a tool used to perform text searches in records. 
</p>

<p>
You can embed SOSL queries to Apex - this is known as <b>inline SOSL</b>. 
</p>

<p>
This example searches for accounts and contacts that have any fields with the word 'SFDC';
</p>
<pre class="example">
List&lt;List&lt;SObject&gt;&gt; searchList = [FIND 'SFDC' IN ALL FIELDS 
				      RETURNING Account(Name), Contact(FirstName,LastName)];
</pre>

<p>
Unlike SOQL, SOSL can query all objects. 
</p>

<p>
SOSL matches fields based on a word match while SOQL performs an exact match by default (when not using wildcards). 
</p>
</div>

<div id="outline-container-org7bf5477" class="outline-4">
<h4 id="org7bf5477"><span class="section-number-4">12.12.1</span> Using the Query Editor</h4>
<div class="outline-text-4" id="text-12-12-1">
<p>
Enter the following in the <b>Query Editor</b> and press the <b>Execute</b> button:
</p>
<pre class="example">
FIND {Wingo} IN ALL FIELDS RETURNING Account(Name), Contact(FirstName,LastName,Department)
</pre>

<p>
All accounts and contact records in your org that satisfy the criteria will display in the query results. 
</p>
</div>
</div>

<div id="outline-container-org2ce3a6d" class="outline-4">
<h4 id="org2ce3a6d"><span class="section-number-4">12.12.2</span> Basing SOSL Syntax</h4>
<div class="outline-text-4" id="text-12-12-2">
<p>
SOSL allows you to specify the following search criteria:
</p>
<ul class="org-ul">
<li>Text expression (single word or phrase) to search for</li>
<li>Scope of the fields to search</li>
<li>List of objects and fields to retrieve</li>
<li>Conditions for selecting rows in the source objects</li>
</ul>

<p>
This is the syntax of a basic SOSL query:
</p>
<pre class="example">
FIND 'SearchQuery' [IN SearchGroup] [RETURNING ObjectsAndFields]
</pre>

<p>
You can also include wildcard characters (such as <code>*</code> and <code>?</code>). The <code>*</code> matches zero or more characters. The <code>?</code> wildcard matches only one character at a time. 
</p>

<p>
Text searches are <b><i>case insensitive</i></b>. 
</p>

<p>
<i>SearchGroup</i> is optional. In the scope of the fields to search. If not specified, the default search scope is all fields. <i>SearchGroup</i> can take one or more of the following values:
</p>
<ul class="org-ul">
<li>ALL FIELDS</li>
<li>NAME FIELDS</li>
<li>EMAIL FIELDS</li>
<li>PHONE FIELDS</li>
<li>SIDEBAR FIELDS</li>
</ul>

<p>
<i>ObjectsAndFields</i> is optional. It is the information to return in the search result - a list of one or more sObjects and, within each sObject, list of one or more fields, with optional values to filter against. If not specified, the search results contain the IDs of all objects found. 
</p>
</div>
</div>

<div id="outline-container-org5c69321" class="outline-4">
<h4 id="org5c69321"><span class="section-number-4">12.12.3</span> Single Words and Phrases</h4>
<div class="outline-text-4" id="text-12-12-3">
<p>
A <i>SearchQuery</i> contains two types of texts:
</p>
<ul class="org-ul">
<li>Single word</li>
<li>Phrase</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="org21f0d8d"></a>Single word<br />
<div class="outline-text-5" id="text-12-12-3-1">
<p>
Words in a <i>SearchQuery</i> are delimited by spaces, punctuation and changes from letters to digits (and vice-versa). Words are always case-insensitive.
</p>
</div>
</li>
<li><a id="orge20d93f"></a>Phrase<br />
<div class="outline-text-5" id="text-12-12-3-2">
<p>
A collection of words and spaces surrounded by double quotes such as "john smith". Multiple words can be combined together with logic and grouping operators to from a more complex query. 
</p>
</div>
</li>
</ol>
</div>

<div id="outline-container-orgb6f4624" class="outline-4">
<h4 id="orgb6f4624"><span class="section-number-4">12.12.4</span> Search Examples</h4>
<div class="outline-text-4" id="text-12-12-4">
<p>
This table lists various example search strings and the SOSL search results:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Search in all fields for:</th>
<th scope="col" class="org-left">Search Description</th>
<th scope="col" class="org-left">Matched Records and Fields</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">The Query</td>
<td class="org-left">returns records that has both words, in any location of text</td>
<td class="org-left">Account: The SFDC Query Man (Name field matched)</td>
</tr>

<tr>
<td class="org-left">Wingo OR Man</td>
<td class="org-left">returns records with fields containing Wingo or Man</td>
<td class="org-left">Contact: Carol Ruiz, Department: 'Wingo' or Account: The SFDC Query Man (Name field matched)</td>
</tr>

<tr>
<td class="org-left">1212</td>
<td class="org-left">returns records whose fields contains the word 1212</td>
<td class="org-left">Account: The SFDC Query Man, Phone: '(415)555-1212'</td>
</tr>

<tr>
<td class="org-left">wing*</td>
<td class="org-left">returns records with a field starting with wing</td>
<td class="org-left">Contact: Maria Ruiz, Department: 'Wingo' and Account: The SFDC Query Man, Description: 'Expert in wing technologies.'</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgecf4625" class="outline-4">
<h4 id="orgecf4625"><span class="section-number-4">12.12.5</span> SOSL Apex Example</h4>
<div class="outline-text-4" id="text-12-12-5">
<p>
This SOSL query combines two search terms by using OR logical operator - it searches for Wingo or SFDC in any field. The results are returned in a list of lists. Each list contains an array of the returned records. At index 0, the list contains the array of accounts. At index 1, the list contains the array of contacts. 
</p>

<p>
E.g.: 
</p>
<pre class="example">
list[0] // are accounts
lists[1] // are contacts 
</pre>

<p>
Here is the code that returns this list of lists:
</p>
<pre class="example">
List&lt;List&lt;sObject&gt;&gt; searchList = [FIND 'Wingo OR SFDC' IN ALL FIELDS 
		   RETURNING Account(Name),Contact(FirstName,LastName,Department)];
Account[] searchAccounts = (Account[])searchList[0];
Contact[] searchContacts = (Contact[])searchList[1];
System.debug('Found the following accounts.');
for (Account a : searchAccounts) {
    System.debug(a.Name);
}
System.debug('Found the following contacts.');
for (Contact c : searchContacts) {
    System.debug(c.LastName + ', ' + c.FirstName);
}
</pre>
</div>
</div>

<div id="outline-container-org5861a5a" class="outline-4">
<h4 id="org5861a5a"><span class="section-number-4">12.12.6</span> Filtering SOSL queries</h4>
<div class="outline-text-4" id="text-12-12-6">
<p>
You can filter queries using the <code>RETURNING</code> clause by using a <code>WHERE</code> clause.
E.g.:
</p>
<pre class="example">
RETURNING Account(Name, Industry WHERE Industry='Apparel')
</pre>
</div>
</div>

<div id="outline-container-org07bedef" class="outline-4">
<h4 id="org07bedef"><span class="section-number-4">12.12.7</span> Activity for this Unit</h4>
<div class="outline-text-4" id="text-12-12-7">
<p>
To pass this challenge, create an Apex class that returns both contacts and leads that have first or last name matching the incoming parameter.
</p>

<p>
The Apex class must be called ContactAndLeadSearch and be in the public scope
The Apex class must have a public static method called searchContactsAndLeads
    The method must accept an incoming string as a parameter
    The method should then find any contact or lead that matches the string as part of either the first or last name
    The method should finally use a return type of List&lt;List&lt; SObject&gt;&gt;
NOTE: Because SOSL indexes data for searching, you must create a Contact record and Lead record before checking this challenge. Both records must have the last name Smith. The challenge uses these records for the SOSL search
</p>

<pre class="example">
public class ContactAndLeadSearch {
    public static List&lt;List&lt;Sobject&gt;&gt; searchContactsAndLeads(String search){
       List&lt;List&lt;Sobject&gt;&gt; sobjects = [Find :search in name fields returning contact(name), lead(name)];
	return sobjects;
    }
}
</pre>

<p>
More about SOSL can be read here <a href="https://developer.salesforce.com/docs/atlas.en-us.224.0.soql_sosl.meta/soql_sosl/sforce_api_calls_soql_sosl_intro.htm">https://developer.salesforce.com/docs/atlas.en-us.224.0.soql_sosl.meta/soql_sosl/sforce_api_calls_soql_sosl_intro.htm</a>
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org025f901" class="outline-2">
<h2 id="org025f901"><span class="section-number-2">13</span> Apex Triggers</h2>
<div class="outline-text-2" id="text-13">
</div>
<div id="outline-container-orgfa7b372" class="outline-3">
<h3 id="orgfa7b372"><span class="section-number-3">13.1</span> Get Started with Apex Triggers</h3>
<div class="outline-text-3" id="text-13-1">
<p>
Apex triggers enables you to perform custom actions after events to records in Salesforce, such as insertions, updates or deletions. 
</p>

<p>
Typically, you use triggers to perform operations based on specific conditions, to modify related records or restrict certain operations from happening. You can use triggers to do anything you can do in Apex, including executing SOQL and DML or calling custom Apex methods. 
</p>

<p>
Use triggers to perform tasks that can't be done by using the point-and-click tools in the Salesforce user interface. 
</p>

<p>
Triggers can be defined for top-level standard objects such as Account or Contact, custom objects and some standard child objects. 
</p>
</div>

<div id="outline-container-org5937f36" class="outline-4">
<h4 id="org5937f36"><span class="section-number-4">13.1.1</span> Trigger Syntax</h4>
<div class="outline-text-4" id="text-13-1-1">
<p>
This is different from a class definition's syntax. A trigger definition starts with the <code>trigger</code> keyword. It is then followed by the name of the trigger, the Salesforce object that the trigger is associated with, and the conditions under which it fires. 
</p>
<pre class="example">
trigger TriggerName on ObjectName(trigger_events){
    code_block
}
</pre>

<p>
To execute a trigger before or after an insert, update, delete and undelete operations, specify multiple trigger events in a comma-separated list. The events you can specify are:
</p>
<ul class="org-ul">
<li>before insert</li>
<li>before update</li>
<li>before delete</li>
<li>after insert</li>
<li>after update</li>
<li>after delete</li>
<li>after undelete</li>
</ul>
</div>
</div>

<div id="outline-container-orgbef64be" class="outline-4">
<h4 id="orgbef64be"><span class="section-number-4">13.1.2</span> Example of a Trigger</h4>
<div class="outline-text-4" id="text-13-1-2">
<ul class="org-ul">
<li>in the developer console, click <b>File</b> &gt; <b>New</b> &gt; <b>Apex Trigger</b></li>
<li>enter the name of the trigger</li>
<li>select the Object that this will affect</li>
<li>click submit</li>
<li>add code to the developer's canvas</li>
</ul>

<p>
For example: 
</p>
<pre class="example">
trigger HelloWorld on Account (before insert){
    System.debug('Hello world');
}
</pre>

<ul class="org-ul">
<li>to save press <b>Ctrl-S</b></li>
<li>to test this example trigger, create a new account</li>
</ul>
</div>
</div>

<div id="outline-container-org7a41f5e" class="outline-4">
<h4 id="org7a41f5e"><span class="section-number-4">13.1.3</span> Types of Triggers</h4>
<div class="outline-text-4" id="text-13-1-3">
<p>
There are two types of triggers:
</p>
<ul class="org-ul">
<li><b>Before triggers</b> are used to validate or update record values before they are saved to the DB</li>
<li><b>After triggers</b> are used to access field values that are set by the system (such as record's <code>Id</code> or <code>LastModifiedDate</code> field), and to affect changes in other records. The records that fire <i>after trigger</i> are read-only</li>
</ul>
</div>
</div>

<div id="outline-container-org319a7b3" class="outline-4">
<h4 id="org319a7b3"><span class="section-number-4">13.1.4</span> Using Context Variables</h4>
<div class="outline-text-4" id="text-13-1-4">
<p>
To access records tha caused the trigger to fire use context variables. For examle, <code>Trigger.New</code> contains all the records that were inserted in insert or update triggers. 
</p>

<p>
<code>Trigger.Old</code> provides the old version of the sObjects before they were updated in update triggers, or a list of deleted sObjects in delete triggers. Triggers can fire when one record is isnerted, or when many records are inserted in bulk via the API or Apex. Therefore, context variables, such as <code>Trigger.New</code>, can contain only one record or multiple records. You can iterate over <code>Trigger.New</code> to get each individual sObject. 
</p>

<p>
This example is a modified version of the <b>HelloWorldTrigger</b>. It iterates over each account in a for loop and updates the Description fields for each:
</p>
<pre class="example">
trigger HelloWorldTrigger on Account (before insert){
    for(Account a: Trigger.New){
	a.Description = 'New Description';
    }
}
</pre>

<p>
The system saves the records that fired the before trigger after the trigger finishes execution. You can modify records in the trigger without explicitly calling the DML insert or update operation. If you perform DML statements on those records, you get an error. 
</p>

<p>
Some other context variables return a Boolean value to indicate whether the trigger was fired due to an update or some other event. These variables are useful when a trigger combines multiple events. For example: 
</p>

<pre class="example">
trigger ContextExampleTrigger on Account (before insert, after insert, after delete) {
    if (Trigger.isInsert) {
	if (Trigger.isBefore) {
	    // Process before insert
	} else if (Trigger.isAfter) {
	    // Process after insert
	}        
    }
    else if (Trigger.isDelete) {
	// Process after delete
    }
}
</pre>
</div>
</div>

<div id="outline-container-org25a3691" class="outline-4">
<h4 id="org25a3691"><span class="section-number-4">13.1.5</span> Trigger context Variables</h4>
<div class="outline-text-4" id="text-13-1-5">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Variable</th>
<th scope="col" class="org-left">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>isExecuting</code></td>
<td class="org-left">Returns true if the current context for the Apex code is a trigger, not a Visualforce page, a Web service, or an executeanonymous() API call.</td>
</tr>

<tr>
<td class="org-left"><code>isInsert</code></td>
<td class="org-left">Returns true if this trigger was fired due to an insert operation, from the Salesforce user interface, Apex, or the API.</td>
</tr>

<tr>
<td class="org-left"><code>isUpdate</code></td>
<td class="org-left">Returns true if this trigger was fired due to an update operation, from the Salesforce user interface, Apex, or the API.</td>
</tr>

<tr>
<td class="org-left"><code>isDelete</code></td>
<td class="org-left">Returns true if this trigger was fired due to an update operation, from the Salesforce user interface, Apex, or the API.</td>
</tr>

<tr>
<td class="org-left"><code>isBefore</code></td>
<td class="org-left">Returns true if this trigger was fired before any record was saved.</td>
</tr>

<tr>
<td class="org-left"><code>isAfter</code></td>
<td class="org-left">Returns true if this trigger was fired after all records were saved.</td>
</tr>

<tr>
<td class="org-left"><code>isUndelete</code></td>
<td class="org-left">Returns true if this trigger was fired after a record is recovered from the Recycle Bin. This recovery can occur after an undelete operation from the Salesforce user interface, Apex, or the API.</td>
</tr>

<tr>
<td class="org-left"><code>new</code></td>
<td class="org-left">Returns a list of the new versions of the sObject records. This sObject list is only available in insert, update, and undelete triggers, and the records can only be modified in before triggers.</td>
</tr>

<tr>
<td class="org-left"><code>newMap</code></td>
<td class="org-left">A map of IDs to the new versions of the sObject records. This map is only available in before update, after insert, after update, and after undelete triggers.</td>
</tr>

<tr>
<td class="org-left"><code>old</code></td>
<td class="org-left">Returns a list of the old versions of the sObject records. This sObject list is only available in update and delete triggers.</td>
</tr>

<tr>
<td class="org-left"><code>oldMap</code></td>
<td class="org-left">A map of IDs to the old versions of the sObject records. This map is only available in update and delete triggers.</td>
</tr>

<tr>
<td class="org-left"><code>operationType</code></td>
<td class="org-left">Returns an enum of type System.TriggerOperation corresponding to the current operation. Possible values of the System.TriggerOperation enum are: <code>BEFORE_INSERT</code>, <code>BEFORE_UPDATE</code>, <code>BEFORE_DELETE</code>, <code>AFTER_INSERT</code>, <code>AFTER_UPDATE</code>, <code>AFTER_DELETE</code>, and <code>AFTER_UNDELETE</code>. If you vary your programming logic based on different trigger types, consider using the switch statement with different permutations of unique trigger execution enum states.</td>
</tr>

<tr>
<td class="org-left"><code>size</code></td>
<td class="org-left">The total number of records in a trigger invocation, both old and new.The total number of records in a trigger invocation, both old and new.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org01c1191" class="outline-4">
<h4 id="org01c1191"><span class="section-number-4">13.1.6</span> Calling a Class Method from a Trigger</h4>
<div class="outline-text-4" id="text-13-1-6">
<p>
You can call public utility methods from a trigger. Calling methods of other classes enables code re-use, reduces the size of your triggers, and improves maintenance of your Apex code. It also allows for object-oriented code programming. 
</p>

<p>
This example shows how to call a static method from a trigger. If the trigger was fired because of an insert event, the example calls the static <code>sendMail()</code> method on the <code>EmailManager</code> class. This utility method sends an email to the specified recipient and contains the number of contact records inserted. 
</p>

<pre class="example">
trigger ExampleTrigger on Contact (after insert, after delete) {
    if (Trigger.isInsert) {
	Integer recordCount = Trigger.New.size();
	// Call a utility method from another class
	EmailManager.sendMail('Your email address', 'Trailhead Trigger Tutorial', 
		    recordCount + ' contact(s) were inserted.');
    }
    else if (Trigger.isDelete) {
	// Process after delete
    }
}
</pre>

<p>
When you next create a contact, you will receive an email with the specified information. 
</p>
</div>
</div>

<div id="outline-container-orgf979c8d" class="outline-4">
<h4 id="orgf979c8d"><span class="section-number-4">13.1.7</span> Adding Related Records</h4>
<div class="outline-text-4" id="text-13-1-7">
<p>
Triggers are often used to access and manage records related to the records in teh trigger contexc- the records that caused the trigger to fire. 
</p>

<p>
This example trigger adds a related opportunity for each new or updated account if no opportunity is already associated with the account. The trigger:
</p>
<ul class="org-ul">
<li>performs a SOQL query to get all child opportunities for the accounts that the trigger fired on</li>
<li>iterates over the list of sObjects in <code>Trigger.New</code> to get each account sObject</li>
<li>checks if the account doesn't have any related opportunity sObjects, the for loop creates one</li>
<li>if the trigger created any new opportunities, the final statement <code>insert</code> them</li>
</ul>

<pre class="example">
trigger AddRelatedRecord on Account(after insert, after update) {
    List&lt;Opportunity&gt; oppList = new List&lt;Opportunity&gt;();

    // Get the related opportunities for the accounts in this trigger
    Map&lt;Id,Account&gt; acctsWithOpps = new Map&lt;Id,Account&gt;(
	[SELECT Id,(SELECT Id FROM Opportunities) FROM Account WHERE Id IN :Trigger.New]);

    // Add an opportunity for each account if it doesn't already have one.
    // Iterate through each account.
    for(Account a : Trigger.New) {
	System.debug('acctsWithOpps.get(a.Id).Opportunities.size()=' + acctsWithOpps.get(a.Id).Opportunities.size());
	// Check if the account already has a related opportunity.
	if (acctsWithOpps.get(a.Id).Opportunities.size() == 0) {
	    // If it doesn't, add a default opportunity
	    oppList.add(new Opportunity(Name=a.Name + ' Opportunity',
				       StageName='Prospecting',
				       CloseDate=System.today().addMonths(1),
				       AccountId=a.Id));
	}           
    }
    if (oppList.size() &gt; 0) {
	insert oppList;
    }
}
</pre>

<p>
This is a run-down of what the code does:
Declare the trigger:
</p>
<pre class="example">
trigger AddRelatedRecord on Account(after insert, after update) {
</pre>
<p>
Create a new list to hold opportunities: 
</p>
<pre class="example">
List&lt;Opportunity&gt; oppList = new List&lt;Opportunity&gt;();
</pre>
<p>
Get the related opportunities for the accounts in this trigger. The embedded <code>SELECT</code> statement looks for the relationship. We create a Map to hold the Id and the account. Finally, we only search for Ids in this trigger: 
</p>
<pre class="example">
Map&lt;Id,Account&gt; acctsWithOpps = new Map&lt;Id,Account&gt;(
    [SELECT Id,(SELECT Id FROM Opportunities) FROM Account WHERE Id IN :Trigger.New]);
</pre>
<p>
Iterate through the each of the accounts in <code>Trigger.New</code>. Print them to the screen. Then check if the account already has an opportunity, and if it doesn't add one:
</p>
<pre class="example">
for(Account a : Trigger.New) {
	System.debug('acctsWithOpps.get(a.Id).Opportunities.size()=' + acctsWithOpps.get(a.Id).Opportunities.size());
	// Check if the account already has a related opportunity.
	if (acctsWithOpps.get(a.Id).Opportunities.size() == 0) {
	    // If it doesn't, add a default opportunity
	    oppList.add(new Opportunity(Name=a.Name + ' Opportunity',
				       StageName='Prospecting',
				       CloseDate=System.today().addMonths(1),
				       AccountId=a.Id));
	}           
    }
</pre>
<p>
Then, insert any new records back to the database (if they exist):
</p>
<pre class="example">
    if (oppList.size() &gt; 0) {
	insert oppList;
    }
}
</pre>

<p>
Sometimes accessing all the records in <code>Trigger.New</code> is not efficient. We can improve on this. In Bulk Design Patterns unit, we use SOQL query to get only the accounts with no opportunities. Then, iterate over only those records. 
</p>
</div>
</div>

<div id="outline-container-org36db65a" class="outline-4">
<h4 id="org36db65a"><span class="section-number-4">13.1.8</span> Use Trigger Exceptions</h4>
<div class="outline-text-4" id="text-13-1-8">
<p>
You sometimes need to add restrictions to certain database operations (e.g. preventing records from being saved when certain conditions are met. To prevent saving records in a trigger, call the <code>addError()</code> method on the sObject. This method throws a fatal error inside a trigger. The error message is displayed in the user interface and is logged. 
</p>

<p>
This example prevents the deletion of an account if it has related opportunities. By default, this delete would delete all the cascading related records. This stops that. 
</p>

<pre class="example">
trigger AccountDeletion on Account (before delete) {

    // Prevent the deletion of accounts if they have related opportunities.
    for (Account a : [SELECT Id FROM Account
		     WHERE Id IN (SELECT AccountId FROM Opportunity) AND
		     Id IN :Trigger.old]) {
	Trigger.oldMap.get(a.Id).addError(
	    'Cannot delete account with related opportunities.');
    }

}
</pre>

<p>
Calling <code>addError()</code> in a trigger causes the entire set of operations to rollback, except when a bulk DML is called with partial success. 
</p>

<p>
If a DML statement in Apex spawned the trigger, any error rolls back the entire operation. 
</p>

<p>
If a bulk DML call in the Lightning Platform API spawned the trigger, the runtime engine sets the bad records aside. It then attempts a partial save of the records that did not generate errors. 
</p>
</div>
</div>

<div id="outline-container-orgcdc27c5" class="outline-4">
<h4 id="orgcdc27c5"><span class="section-number-4">13.1.9</span> Triggers and Callouts</h4>
<div class="outline-text-4" id="text-13-1-9">
<p>
Callouts can go to external webservices and get information. They must be done asynchronously so the trigger doesn't block any process, while you are waiting for the response. It is made in the background. 
</p>

<p>
To make a callout from a trigger, call a class method that executes asynchronously. Such a method is called a <b>future method</b> and is annotated with <code>@future(callout=true)</code>. This example class contains the future method that makes the callout:
</p>
<pre class="example">
public class CalloutClass {
    @future(callout=true)
    public static void makeCallout() {
	HttpRequest request = new HttpRequest();
	// Set the endpoint URL.
	String endpoint = 'http://yourHost/yourService';
	request.setEndPoint(endpoint);
	// Set the HTTP verb to GET.
	request.setMethod('GET');
	// Send the HTTP request and get the response.
	HttpResponse response = new HTTP().send(request);
    }
}
</pre>

<p>
Then, this trigger can make the call to the future method:
</p>
<pre class="example">
trigger CalloutTrigger on Account (before insert, before update) {
    CalloutClass.makeCallout();
}
</pre>

<p>
More information about using Callouts can be found here: <a href="https://developer.salesforce.com/docs/atlas.en-us.224.0.apexcode.meta/apexcode/apex_callouts.htm">https://developer.salesforce.com/docs/atlas.en-us.224.0.apexcode.meta/apexcode/apex_callouts.htm</a>
</p>
</div>
</div>

<div id="outline-container-orga9e0491" class="outline-4">
<h4 id="orga9e0491"><span class="section-number-4">13.1.10</span> Unit Challenge</h4>
<div class="outline-text-4" id="text-13-1-10">
<p>
Create an Apex trigger for Account that matches Shipping Address Postal Code with Billing Address Postal Code based on a custom field.
For this challenge, you need to create a trigger that, before insert or update, checks for a checkbox, and if the checkbox field is true, sets the Shipping Postal Code (whose API name is ShippingPostalCode) to be the same as the Billing Postal Code (BillingPostalCode).
</p>

<p>
The Apex trigger must be called 'AccountAddressTrigger'.
The Account object will need a new custom checkbox that should have the Field Label 'Match Billing Address' and Field Name of 'Match<sub>Billing</sub><sub>Address</sub>'. The resulting API Name should be 'Match<sub>Billing</sub><sub>Address</sub>_<sub>c</sub>'.
With 'AccountAddressTrigger' active, if an Account has a Billing Postal Code and 'Match<sub>Billing</sub><sub>Address</sub>_<sub>c</sub>' is true, the record should have the Shipping Postal Code set to match on insert or update.
</p>

<p>
This is the solution:
</p>
<pre class="example">
trigger AccountAddressTrigger on Account (before insert, before update) {
    for (Account a : Trigger.New){
	if (a.Match_Billing_Address__c == true){
	    a.ShippingPostalCode = a.BillingPostalCode;
	}
    }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdee4c63" class="outline-3">
<h3 id="orgdee4c63"><span class="section-number-3">13.2</span> Bulk Apex Triggers</h3>
<div class="outline-text-3" id="text-13-2">
<p>
This section deals with operating on collections of sObjects and performing efficient SOQL and DML operations.
</p>
</div>

<div id="outline-container-orgcd496c7" class="outline-4">
<h4 id="orgcd496c7"><span class="section-number-4">13.2.1</span> Bulk Trigger Design Patterns</h4>
<div class="outline-text-4" id="text-13-2-1">
<p>
Triggers are optimized to operate in bulk. When using bulk, you have better performance, consume less server resources and are less likely to exceed platform limits. 
</p>

<p>
Bulkified code can process large numbers of records efficiently and run within governor limits. 
</p>

<p>
The following sections demonstrate thte main ways of bulkifying your apex code in triggers: operating on all records in the trigger, and performing SOQL and DML on collections of objects instead of single sObjects at a time. The SOQL and DML bulk best practices apply to any Apex code, including SOQL and DML in classes. The examples given are based on triggers and use the <code>Trigger.New</code> context variable. 
</p>
</div>
</div>

<div id="outline-container-org05aaa0c" class="outline-4">
<h4 id="org05aaa0c"><span class="section-number-4">13.2.2</span> Operating on Record Sets</h4>
<div class="outline-text-4" id="text-13-2-2">
<p>
Let's first look at the most basic bulk design concept in triggers. Typically, triggers operate on one record if the action that fired the trigger originates from the user interface. But, if the origin of the action was bulk DML or the API, the trigger operates on a record set. For example, when you import many records via the API, triggers operate on the full record set. Good programming practice is to assume that the trigger operates on a collection of records so that it works in all circumstances. 
</p>

<p>
This example trigger assumes that only one record caused the trigger to fire:
</p>
<pre class="example">
trigger MyTriggerNotBulk on Account(before insert) {
    Account a = Trigger.New[0];
    a.Description = 'New description';
}
</pre>

<p>
This example is a modified version of the above. It uses a loop to iterate over all available objects. This will work if <code>Trigger.New</code> contains one record, or many:
</p>

<pre class="example">
trigger MyTriggerBulk on Account(before insert) {
    for(Account a : Trigger.New) {
	a.Description = 'New description';
    }
}
</pre>
</div>
</div>

<div id="outline-container-org8de3fcf" class="outline-4">
<h4 id="org8de3fcf"><span class="section-number-4">13.2.3</span> Performing Bulk SOQL</h4>
<div class="outline-text-4" id="text-13-2-3">
<p>
SOQL queries can be powerful. You can retrieve related records and check a combination of multiple conditions in one query. By using SOQL queries, you write less code and make fewer queries to the database. This helps prevent you hitting any limits which are 100 SOQL query limits for synchronous Apex or 200 asynchronous Apex. 
</p>

<p>
The following trigger shows a SOQL query pattern to avoid. It makes a SOQL query inside a for loop to get the related opportunities for each account, which runs for each Account sObject in <code>Trigger.New</code>. This could result in too many SOQL queries. 
</p>

<pre class="example">
trigger SoqlTriggerNotBulk on Account(after update) {   
    for(Account a : Trigger.New) {
	// Get child records for each account
	// Inefficient SOQL query as it runs once for each account!
	Opportunity[] opps = [SELECT Id,Name,CloseDate 
			     FROM Opportunity WHERE AccountId=:a.Id];

	// Do some other processing
    }
}
</pre>

<p>
This modifies the above and shows best practices for running SOQL queries. The SOQL does the heavy lifting and is called once outside the main loop. 
</p>

<ul class="org-ul">
<li>the SOQL query uses an inner query <code>(SELECT Id FROM Opportunities)</code> to get related opportunities of accounts</li>
<li>the SOQL query is connected to the trigger context records by using the <code>IN</code> clause and binding the <code>Trigger.New</code> variable in the <code>WHERE</code> clause - <code>WHERE Id IN :Trigger.New</code>. This where condition filters the accounts to only those records that fired this trigger</li>
</ul>

<p>
Combining the two parts in the query gives us all the records we need in one call: the accounts in this trigger with the related opportunities of each account. 
</p>

<p>
Then the for loop iterates over them by using the collection variable - in this case <code>acctsWithOpps</code>. The collection variable holds all the results of the SOQL query. The for loop only operates on the records we want. Because only related records are obtained, no further queries are needed within the loop to get those records. 
</p>

<pre class="example">
trigger SoqlTriggerBulk on Account(after update) {  
    // Perform SOQL query once.    
    // Get the accounts and their related opportunities.
    List&lt;Account&gt; acctsWithOpps = 
	[SELECT Id,(SELECT Id,Name,CloseDate FROM Opportunities) 
	 FROM Account WHERE Id IN :Trigger.New];

    // Iterate over the returned accounts    
    for(Account a : acctsWithOpps) { 
	Opportunity[] relatedOpps = a.Opportunities;  
	// Do some other processing
    }
}
</pre>

<p>
If you don't need the account parent records, you can retrieve only the opportunities that are related to the accounts within this trigger context. This list is specified in the <code>WHERE</code> clause by matching the AccountId field of the opportunity to the ID of accounts in <code>Trigger.New</code>: <code>WHERE AccountId IN :Trigger.New</code>. This means that you will not use a nested query. This example shows how to do this. 
</p>

<pre class="example">
trigger SoqlTriggerBulk on Account(after update) {  
    // Perform SOQL query once.    
    // Get the related opportunities for the accounts in this trigger.
    List&lt;Opportunity&gt; relatedOpps = [SELECT Id,Name,CloseDate FROM Opportunity
	WHERE AccountId IN :Trigger.New];

    // Iterate over the related opportunities    
    for(Opportunity opp : relatedOpps) { 
	// Do some other processing
    }
}
</pre>
</div>
<ol class="org-ol">
<li><a id="orgb66094f"></a>SOQL for loop<br />
<div class="outline-text-5" id="text-13-2-3-1">
<p>
You can reduce the previous example in size by combining the SOQL query with the for loop in one statement: the SOQL for loop. 
</p>

<pre class="example">
trigger SoqlTriggerBulk on Account(after update) {  
    // Perform SOQL query once.    
    // Get the related opportunities for the accounts in this trigger,
    // and iterate over those records.
    for(Opportunity opp : [SELECT Id,Name,CloseDate FROM Opportunity
	WHERE AccountId IN :Trigger.New]) {

	// Do some other processing
    }
}
</pre>

<p>
Triggers execute in batches of 200 at a time. So, if 400 records cause a trigger, the trigger fires twice. For this reason, you don't get the benefit of SOQL for loop record batching in triggers, because triggers batch up as well. The SOQL for loop is called twice in this example, but a standalone SOQL query would also be called twice. However, the SOQL for loop still looks more elegant than iterating over a collection variable. 
</p>
</div>
</li>
</ol>
</div>

<div id="outline-container-org9b0db62" class="outline-4">
<h4 id="org9b0db62"><span class="section-number-4">13.2.4</span> Performing Bulk DML</h4>
<div class="outline-text-4" id="text-13-2-4">
<p>
You should always aim to perform DML calss on a collection of sObjects where possible. The Apex runtime allows up to 150 DML calls in one transaction. 
</p>

<p>
This example is inefficient as an <code>update</code> is performed inside the loop. It is called once per opportunity. 
</p>

<pre class="example">
trigger DmlTriggerNotBulk on Account(after update) {   
    // Get the related opportunities for the accounts in this trigger.        
    List&lt;Opportunity&gt; relatedOpps = [SELECT Id,Name,Probability FROM Opportunity
	WHERE AccountId IN :Trigger.New];          
    // Iterate over the related opportunities
    for(Opportunity opp : relatedOpps) {      
	// Update the description when probability is greater 
	// than 50% but less than 100% 
	if ((opp.Probability &gt;= 50) &amp;&amp; (opp.Probability &lt; 100)) {
	    opp.Description = 'New description for opportunity.';
	    // Update once for each opportunity -- not efficient!
	    update opp;
	}
    }    
}
</pre>
<p>
This example does the same, but the <code>update</code> is carried out on a list of opportunities:
</p>
<pre class="example">
trigger DmlTriggerBulk on Account(after update) {   
    // Get the related opportunities for the accounts in this trigger.        
    List&lt;Opportunity&gt; relatedOpps = [SELECT Id,Name,Probability FROM Opportunity
	WHERE AccountId IN :Trigger.New];

    List&lt;Opportunity&gt; oppsToUpdate = new List&lt;Opportunity&gt;();
    // Iterate over the related opportunities
    for(Opportunity opp : relatedOpps) {      
	// Update the description when probability is greater 
	// than 50% but less than 100% 
	if ((opp.Probability &gt;= 50) &amp;&amp; (opp.Probability &lt; 100)) {
	    opp.Description = 'New description for opportunity.';
	    oppsToUpdate.add(opp);
	}
    }

    // Perform DML on a collection
    update oppsToUpdate;
}
</pre>

<p>
Two lists are created - one for the first SOQL query and the second to collect those that need updating. The second list (<code>oppsToUpdate</code>) collects those that need acting on, and then finally and update is performed on that list, outside of the loop. 
</p>
</div>
</div>

<div id="outline-container-org087d122" class="outline-4">
<h4 id="org087d122"><span class="section-number-4">13.2.5</span> Bulk Design Pattern in Action: Trigger Example for Getting Records</h4>
<div class="outline-text-4" id="text-13-2-5">
<p>
We are refactoring the <code>AddRelatedRecord</code> trigger. In the previous example, it operated in bulk, but could still be more efficient, because it iterates over all <code>Trigger.New</code>. This example modifies the SOQL query to get only records of interest and then iterate over those records. 
</p>

<p>
The <code>AddRelatedRecord</code> trigger fires after accounts are inserted or updated and adds a default opportunity for every account that doesn't already have an opportunity. 
</p>

<p>
First problem is to figure out how to get the child opportunity records.
</p>

<p>
Because this is a <code>after</code> trigger, we can query affected records from the database. They've already been committed to the database, so we can query them. Let's write a SOQL query that returns all accounts in this trigger that don't have related opportunities: 
</p>
<pre class="example">
[SELECT Id,Name FROM Account WHERE Id IN :Trigger.New AND
					     Id NOT IN (SELECT AccountId FROM Opportunity)]
</pre>
<p>
Here, the embedded query does the lookup - we just need to find ones that are not in that lookup. 
</p>

<p>
Now that we have these, let's iterate over these with a SOQL for loop:
</p>
<pre class="example">
for(Account a : [SELECT Id,Name FROM Account WHERE Id IN :Trigger.New AND
					 Id NOT IN (SELECT AccountId FROM Opportunity)]){
}
</pre>

<p>
That is the basic of the trigger. All we need to do now is create the default opportunity, which we will do in bulk. 
</p>
</div>
</div>

<div id="outline-container-org68c79d6" class="outline-4">
<h4 id="org68c79d6"><span class="section-number-4">13.2.6</span> Challenge for this Unit</h4>
<div class="outline-text-4" id="text-13-2-6">
<p>
To complete this challenge, you need to add a trigger for Opportunity. The trigger will add a task to any opportunity inserted or updated with the stage of 'Closed Won'. The task's subject must be 'Follow Up Test Task'.
</p>

<p>
The Apex trigger must be called 'ClosedOpportunityTrigger'
With 'ClosedOpportunityTrigger' active, if an opportunity is inserted or updated with a stage of 'Closed Won', it will have a task created with the subject 'Follow Up Test Task'.
To associate the task with the opportunity, fill the 'WhatId' field with the opportunity ID.
This challenge specifically tests 200 records in one operation.
</p>

<p>
Solution:
</p>
<pre class="example">
trigger ClosedOpportunityTrigger on Opportunity (after insert, after update) {
    List&lt;Task&gt; taskList = new List&lt;Task&gt;();

    for (Opportunity opp : [SELECT Id, StageName FROM Opportunity WHERE StageName = 'Closed Won' AND Id in :Trigger.New ]){
	 taskList.add(new Task(Subject='Follow Up Test Task', WhatId = opp.Id));
    }

    if (taskList.size() &gt; 0){
	insert taskList;
    }
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6c8d4b3" class="outline-2">
<h2 id="org6c8d4b3"><span class="section-number-2">14</span> Apex Testing</h2>
<div class="outline-text-2" id="text-14">
</div>
<div id="outline-container-org9bfa431" class="outline-3">
<h3 id="org9bfa431"><span class="section-number-3">14.1</span> Get Started with Apex Test Units</h3>
<div class="outline-text-3" id="text-14-1">
</div>
<div id="outline-container-org435f2e4" class="outline-4">
<h4 id="org435f2e4"><span class="section-number-4">14.1.1</span> Apex Unit Tests</h4>
<div class="outline-text-4" id="text-14-1-1">
<p>
The Apex testing framework enables you to write and execute tetsts for your Apex classes and triggers. 
</p>

<p>
Apex code can only be written in a sandbox or Dev org. It can be deployed to production from a dev or sandbox org. You can aslo deploy Apex code by uploading a package via AppExchange. 
</p>

<p>
The benefits of testing are:
</p>
<ul class="org-ul">
<li>ensure that any Apex class and triggers work as expected</li>
<li>having a suite of regression tests that can be run everytime classes and triggers are updated to ensure that future updates you make do not break existing functionality</li>
<li>meeting the code coverage requirements for deploying Apex to production or distributinng Apex to customers via packages</li>
<li>high-quality apps delivered to production org</li>
<li>high-quality apps delivered to package subscribers</li>
</ul>

<p>
Apex Hammer is run on your behalf on all tests before any major service upgrade. It does not run in all orgs. 
</p>
</div>
</div>

<div id="outline-container-org23daf70" class="outline-4">
<h4 id="org23daf70"><span class="section-number-4">14.1.2</span> Code Coverage Requirement for Deployment</h4>
<div class="outline-text-4" id="text-14-1-2">
<p>
Before you can deploy your code, at least 75% of it must be covered by tests, and all those tests must pass. Each trigger must have some coverage. Even though code coverage is a requirement for deployment, don't write tests only to meet this requirement. Make sure to test the common use cases in your app,  including positive and negative test cases, and bulk and single-recording processing. 
</p>
</div>
</div>

<div id="outline-container-org0903543" class="outline-4">
<h4 id="org0903543"><span class="section-number-4">14.1.3</span> Test Method Syntax</h4>
<div class="outline-text-4" id="text-14-1-3">
<p>
Test methods take no arguments and have the following syntax:
</p>
<pre class="example">
@isTest static void testName(){
   // code_block
}
</pre>

<p>
Alternatively, a test method can have this syntax:
</p>
<pre class="example">
static testMethod void testName(){
    // code_block
}
</pre>

<p>
Using the <code>isTest</code> annotation instead of <code>testMethod</code> keyword is more flexible as you can specify parameters in the annotation. 
</p>

<p>
The visibility of a test method doesn't matter, so declaring a test method as public or private doesn't make a difference as the testing framework is always able to access test methods. For this reason, the access modifiers are ommitted in the syntax. 
</p>

<p>
Test methods must be defined in test classes, which are classes annotated with <code>isTest</code>. This sample class shows a definition of a test class with one test method:
</p>
<pre class="example">
@isTest
private class MyTestClass{
    @isTest static void myTest(){
	// code_block
    }
}
</pre>

<p>
Test classes can either be public or private. If the class is being used for unit testing only, keep it private. Public test classes are typically used for test data factory classes.
</p>

<p>
The following example test class is a test with 3 test methods. The class method that's being tested takes a temperature in Fahrenheit as an input and returns a Celsius conversion. 
</p>

<p>
Add this as a new class:
</p>
<pre class="example">
public class TemperatureConverter {
    // Takes a Fahrenheit temperature and returns the Celsius equivalent.
    public static Decimal FahrenheitToCelsius(Decimal fh) {
	Decimal cs = (fh - 32) * 5/9;
	return cs.setScale(2);
    }
}
</pre>
<p>
Then add the test class:
</p>
<pre class="example">
@isTest
private class TemperatureConverterTest {
    @isTest static void testWarmTemp() {
	Decimal celsius = TemperatureConverter.FahrenheitToCelsius(70);
	System.assertEquals(21.11,celsius);
    }

    @isTest static void testFreezingPoint() {
	Decimal celsius = TemperatureConverter.FahrenheitToCelsius(32);
	System.assertEquals(0,celsius);
    }
    @isTest static void testBoilingPoint() {
	Decimal celsius = TemperatureConverter.FahrenheitToCelsius(212);        
	System.assertEquals(100,celsius,'Boiling point temperature is not expected.');
    } 

    @isTest static void testNegativeTemp() {
	Decimal celsius = TemperatureConverter.FahrenheitToCelsius(-10);
	System.assertEquals(-23.33,celsius);
    }

}
</pre>
<p>
The verifications are done with the <code>System.assertEquals()</code> method, which takes two parameters. The first is the expected value, and the second is the actual value. There is a version of this method that accepts a third, String value, which is a description of the comparison. This is logged if the assertion fails. 
</p>
</div>
</div>

<div id="outline-container-org0acda2e" class="outline-4">
<h4 id="org0acda2e"><span class="section-number-4">14.1.4</span> To Run a test</h4>
<div class="outline-text-4" id="text-14-1-4">
<p>
In the developer console,
</p>
<ul class="org-ul">
<li>click <b>Test</b> &gt; <b>New Run</b></li>
<li>under <b>Test Classes</b> choose the class that is to be run</li>
<li>to add all the test methods in the class, click <b>Add Selected</b></li>
<li>click <b>Run</b></li>
<li>in the Tests Tab, you see the status of your tests as they're running. Expand the test run, and expand again, until you see the list of individual tests that were run. Check for green ticks.</li>
</ul>

<p>
After you've run your tests, code coverage is automatically generated for the Apex classes and triggers in the org. You can check the code coverage percentage in the Tests tab of the <b>Developer Console</b>. 
</p>

<p>
Whenever you modify the code, rerun your tests to refresh code coverage results. 
</p>

<p>
A known issue with Developer Console preventsit from updating code coverage correctly when running a subset of tasks. To update the code coverage, use <b>Test</b> | <b>Run All</b>.
</p>

<p>
Let's test for a failure. Change <code>testBoilingPoint()</code> to the following:
</p>

<pre class="example">
@isTest static void testBoilingPoint() {
    Decimal celsius = TemperatureConverter.FahrenheitToCelsius(212);        
    // Simulate failure
    System.assertEquals(0,celsius,'Boiling point temperature is not expected.');
}
</pre>

<p>
Check the results in the Tests tab. To get the error message, double click inside the <b>Errors</b> and the console will open up a debug output for that error. 
</p>
</div>
</div>

<div id="outline-container-orgb41cc95" class="outline-4">
<h4 id="orgb41cc95"><span class="section-number-4">14.1.5</span> Increase your Code Coverage</h4>
<div class="outline-text-4" id="text-14-1-5">
<p>
Don't just aim for 75%, but instead try to get as high a coverage as possible. The higher coverage, the more likely your code is robust. Even after writing a test method for all your class methods, code coverage is not at 100%. This could be because you are not covering all data values for conditional code execution. For example, some data values tend to be ignored when your class method has <code>if</code> statements that cause different branches. Ensure that tests are met for these values and branches. 
</p>

<p>
This example contains two if statements. This method returns a priority string value given a lead state. The method validates the state first and returns <code>null</code> if the state is invalid. If the state is CA, the method returns 'High'; otherwise it returns 'Normal' for any other state. 
</p>

<pre class="example">
public class TaskUtil {
    public static String getTaskPriority(String leadState) {
	// Validate input
	if (String.isBlank(leadState) || leadState.length() &gt; 2) {
	    return null;
	}

	String taskPriority;

	if (leadState == 'CA') {
	     taskPriority = 'High'; 
	} else {
	     taskPriority = 'Normal';
	}

	return taskPriority;
    }
}
</pre>

<p>
This is the test class for the above class:
</p>
<pre class="example">
@isTest
private class TaskUtilTest {
    @isTest static void testTaskPriority() {
	String pri = TaskUtil.getTaskPriority('NY');
	System.assertEquals('Normal', pri);
    }
}
</pre>
<p>
It only tests the class with one state. When you check the coverage, you only get 75% as an incorrect state wasn't tested, the state CA wasn't tested. These are added here:
</p>
<pre class="example">
@isTest
private class TaskUtilTest {
    @isTest static void testTaskPriority() {
	String pri = TaskUtil.getTaskPriority('NY');
	System.assertEquals('Normal', pri);
    }

    @isTest static void testTaskHighPriority() {
	String pri = TaskUtil.getTaskPriority('CA');
	System.assertEquals('High', pri);
    }

    @isTest static void testTaskPriorityInvalid() {
	String pri = TaskUtil.getTaskPriority('Montana');
	System.assertEquals(null, pri);
    }
}
</pre>
</div>
</div>

<div id="outline-container-orgbc77767" class="outline-4">
<h4 id="orgbc77767"><span class="section-number-4">14.1.6</span> Create and Execute a Test Suite</h4>
<div class="outline-text-4" id="text-14-1-6">
<p>
A test suite is a collection of Apex test classes that you run together. For example, create a suite of tests that you run everytime you prepare for a deplopment or Salesforce releases a new version. Set up a test suite in the Developer Console to define a set of test classes that you execute together regularly. 
</p>

<p>
To create a <b>Test Suite</b>:
</p>
<ul class="org-ul">
<li>in the <b>Developer Console</b> select <b>Test</b> &gt; <b>New Suite</b></li>
<li>enter a name for your new Test suite and click <b>OK</b></li>
<li>select the Classes that are required (ctrl-select is allowed here)</li>
<li>click the right arrow icon to shift them to the right pane</li>
<li>click save</li>
<li>click <b>Test</b> &gt; <b>New Suite Run</b></li>
<li>select the name of the Test Suite that you wish to run</li>
<li>select the right arrow to select the Test Suite</li>
<li>click <b>Run Suites</b></li>
<li>on the <b>Tests Tab</b>, monitor the status of your tests as they're running.</li>
<li>expand the tests to see the outcome of each one</li>
</ul>
</div>
</div>

<div id="outline-container-org4a87217" class="outline-4">
<h4 id="org4a87217"><span class="section-number-4">14.1.7</span> Creating Test Data</h4>
<div class="outline-text-4" id="text-14-1-7">
<p>
Salesforce records that are created in test methods aren't committed to the database. They're rolled back when the test finishes. This means you don't have to clean up each time. 
</p>

<p>
Apex does not have access to pre-existing data in the org, except for access to setup and metadata objects, such as the <b>User</b> or <b>Profile</b> objects. Set up test data for your tests. Creating test data makes your tests more robust and prevents failures that are caused by missing or changed data in the org. You can create test data directly in your test method, or by using a utility test class. 
</p>

<p>
There are times when a test method needs access to pre-existing data. To access org data, annotate the test method with <code>@isTest(SeeAllData=true)</code>. The test method examples in this unit don't access org data and therefore don't use the <code>SeeAllData</code> parameter. 
</p>

<ul class="org-ul">
<li>You can save up to 6MB of Apex code in each org. Test classes with @isTest don't count towards this limit.</li>
<li>Even though data is rolled back, no separate database is used for testing. As a result, for some sObjects, inserting fields with unique constraints will result in an error if a duplicate is inserted</li>
<li>Test methods don't send emails</li>
<li>Test methods can't make callouts to external services. You can use mock callouts in tests</li>
<li>SOSL searches performed in a test return empty results. To ensure predictable results, use <code>Test.setFixedSearchResults()</code> to define the records to be returned by the search</li>
</ul>
</div>
</div>

<div id="outline-container-orgce636ea" class="outline-4">
<h4 id="orgce636ea"><span class="section-number-4">14.1.8</span> Unit Challenge</h4>
<div class="outline-text-4" id="text-14-1-8">
<p>
Install a simple Apex class, write unit tests that achieve 100% code coverage for the class, and run your Apex tests.
</p>

<p>
The Apex class to test is called 'VerifyDate', and the code is available here. Copy and paste this class into your Developer Edition via the Developer Console.
'VerifyDate' is a class which tests if a date is within a proper range, and if not will return a date that occurs at the end of the month within the range.
The unit tests must be in a separate test class called 'TestVerifyDate'.
The unit tests must cover scenarios for all lines of code included in the Apex class, resulting in 100% code coverage.
Run your test class at least once (via 'Run All' tests the Developer Console) before attempting to verify this challenge.
</p>

<p>
Answer:
</p>
<pre class="example">
@isTest
public class TestVerifyDate {
    @isTest static void testCheckDates(){
	Date date1 = Date.newInstance(2020,11,09);
	Date date2 = Date.newInstance(2020,10,01);
	Date date_return = VerifyDate.CheckDates(date1, date2);
	Date answer = Date.newInstance(2020,11,30);
	System.assertEquals(answer, date_return);

	Date date3 = Date.newInstance(2020,11,01);
	Date date4 = Date.newInstance(2020,11,09);
	Date date_return1 = VerifyDate.CheckDates(date3, date4);
	Date answer2 = Date.newInstance(2020,11,09);
	System.assertEquals(answer2, date_return1);
    }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgab28024" class="outline-3">
<h3 id="orgab28024"><span class="section-number-3">14.2</span> Test Apex Triggers</h3>
<div class="outline-text-3" id="text-14-2">
<p>
Before deploying a trigger, write unit tests to perform the actions that fire the trigger and verify expected results.
</p>

<p>
This example needs the AccountDeletion class and it needs to be active. (You can do this by searching for <b>Apex Triggers</b>, in the quick find box, then clicking edit on the trigger, and then enabling the <b>Active</b> checkbox. 
</p>

<p>
To create an Apex Trigger Test, in the <b>Development Console</b>, click <b>File</b> &gt; <b>New</b> &gt; <b>Apex Class</b>. 
</p>

<pre class="example">
@isTest
private class TestAccountDeletion {
    @isTest static void TestDeleteAccountWithOneOpportunity() {
	// Test data setup
	// Create an account with an opportunity, and then try to delete it
	Account acct = new Account(Name='Test Account');
	insert acct;
	Opportunity opp = new Opportunity(Name=acct.Name + ' Opportunity',
				       StageName='Prospecting',
				       CloseDate=System.today().addMonths(1),
				       AccountId=acct.Id);
	insert opp;

	// Perform test
	Test.startTest();
	Database.DeleteResult result = Database.delete(acct, false);
	Test.stopTest();
	// Verify 
	// In this case the deletion should have been stopped by the trigger,
	// so verify that we got back an error.
	System.assert(!result.isSuccess());
	System.assert(result.getErrors().size() &gt; 0);
	System.assertEquals('Cannot delete account with related opportunities.',
			     result.getErrors()[0].getMessage());
    }

}
</pre>

<p>
The test method first sets up a test account with an opportunity. Next, it deletes the test account, which should fire the <b>AccountDeletion</b> trigger. The test method verifies that the trigger prevented the deletion of the account by checking the value of ~Database.delete()* method. The return value is a Database.DeleteResult object that contains information about the delete operation. The test method verifies that the deletion was not successful and verifies the error message obtained. 
</p>

<p>
Run the test:
</p>
<ul class="org-ul">
<li>click <b>Test</b> &gt; <b>New Run</b></li>
<li>under Test Classes, click <b>TestAccountDeletion</b></li>
<li>add all the methods by clicking <b>Add Selected</b></li>
</ul>

<p>
The <b>TestAccountDeletion</b> test class contains only one test method, which tests for a  single account record. Also, this test is a positive case. Always test for more scenarios to ensure the trigger works in all cases, including deleting an account without opportunities and bulk account deletions. 
</p>

<p>
Test data is set up inside the test method, which can be time-consuming as you add more test methods. If you have many test methods, put the test-data creation in a test utility class and call the utility class from multiple test methods. The next unit shows you how to do this. 
</p>
</div>

<div id="outline-container-org1f6d93a" class="outline-4">
<h4 id="org1f6d93a"><span class="section-number-4">14.2.1</span> Unit Challenge</h4>
<div class="outline-text-4" id="text-14-2-1">
<p>
Install a simple Apex trigger, write unit tests that achieves 100% code coverage for the trigger, and run your Apex tests.
</p>

<p>
The Apex trigger to test is called 'RestrictContactByName', and the code is available here. Copy and paste this trigger into your Developer Edition via the Developer Console.
'RestrictContactByName' is a trigger which blocks inserts and updates to any contact with a last name of 'INVALIDNAME'.
The unit tests must be in a separate Apex class called 'TestRestrictContactByName'.
The unit tests must cover scenarios for all lines of code included in the Apex trigger, resulting in 100% code coverage.
Run your test class at least once (via 'Run All' tests the Developer Console) before attempting to verify this challenge.
</p>

<pre class="example">
@isTest public class TestRestrictContactByName{
    @isTest static void TestRestrictContactByName(){
	// This contact will insert
	Contact valid = new Contact(Lastname='Cripps');
	// The trigger will reject this insert
	Contact invalid = new Contact(Lastname='INVALIDNAME');

	insert valid;
	Contact result1 = [SELECT Lastname FROM Contact WHERE Lastname='Cripps'];
	System.assertEquals('Cripps', result1.Lastname);
	// try catch will try to catch the error, which we can test
	try {
	    Test.startTest();
	    insert invalid;
	    Test.stopTest();
	}
	catch (Exception e){
	    Boolean expectedExceptionThrown = e.getMessage().contains('Insert failed');
	    System.AssertEquals(expectedExceptionThrown, true);
	}
    } 
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org5cb7d0f" class="outline-3">
<h3 id="org5cb7d0f"><span class="section-number-3">14.3</span> Creating Test Data for Apex Tests</h3>
<div class="outline-text-3" id="text-14-3">
<p>
This demonstrates how classes can be reused to set up test data. 
</p>
</div>

<div id="outline-container-orgdd92c5c" class="outline-4">
<h4 id="orgdd92c5c"><span class="section-number-4">14.3.1</span> Adding a Test Utility Class</h4>
<div class="outline-text-4" id="text-14-3-1">
<p>
This will create a <b>TestDataFactory</b> class which is a special type of class - it's a public class that is annotated with <code>@isTest</code> and can be accessed from a runningtest. Test utility classes contain methods that can be called by test methods to perform useful tasks, such as setting up test data. Test utility classes are excluded from the org's code size limit.
</p>

<p>
To add the <code>TestDataFactory</code> class:
</p>
<ul class="org-ul">
<li>click <b>File</b> &gt; <b>New</b> &gt; <b>Apex Class</b></li>
<li>enter <code>TestDataFactory</code> for the class name</li>
<li>click <b>OK</b></li>
<li>add code that you need with methods to set up data as required</li>
</ul>

<p>
This is an example:
#+BEGIN<sub>SRC</sub>
</p>

<p>
@isTest
public class TestDataFactory {
    public static List&lt;Account&gt; createAccountsWithOpps(Integer numAccts, Integer numOppsPerAcct) {
        List&lt;Account&gt; accts = new List&lt;Account&gt;();
</p>

<p>
for(Integer i=0;i&lt;numAccts;i++) {
    Account a = new Account(Name='TestAccount' + i);
    accts.add(a);
}
insert accts;
</p>

<p>
List&lt;Opportunity&gt; opps = new List&lt;Opportunity&gt;();
for (Integer j=0;j&lt;numAccts;j++) {
    Account acct = accts[j];
    // For each account just inserted, add opportunities
    for (Integer k=0;k&lt;numOppsPerAcct;k++) {
	opps.add(new Opportunity(Name=acct.Name + ' Opportunity ' + k,
			       StageName='Prospecting',
			       CloseDate=System.today().addMonths(1),
			       AccountId=acct.Id));
    }
}
// Insert all opportunities for all accounts.
insert opps;
</p>

<p>
        return accts;
    }
}#+END<sub>SRC</sub>
This adds a given number of Accounts (as specified by the numAccts parameter) and a number of Opportunities per account (as specified by numOppsPerAcct). 
</p>

<p>
The first loop creates all the accounts necessary, and then the second loop creates opportunities for each account.
</p>

<p>
You can call this with <code>TestDataFactory.createAccountsWithOpps(x, y);</code>.
</p>

<p>
The all important part is the <code>return</code> statement that returns the new accounts.
</p>

<p>
You can get the related opportunities in the test by using SOQL to look them up.
</p>
</div>
</div>

<div id="outline-container-org3e46f74" class="outline-4">
<h4 id="org3e46f74"><span class="section-number-4">14.3.2</span> Calling Utility Methods for Test Data Creation</h4>
<div class="outline-text-4" id="text-14-3-2">
<p>
To store all the accounts use the snippet above, but assign it to a list of Accounts: 
</p>
<pre class="example">
Account[] accts = TestDataFactory.createAccountsWithOpps(1,1);
</pre>
<p>
The array contains one account with one opportunity. 
</p>

<p>
The code can now be changed (I've left the old code in, but commented it out to show what was replaced):
</p>
<pre class="example">
@isTest
private class TestAccountDeletion {
    @isTest static void TestDeleteAccountWithOneOpportunity() {
	// Test data setup
	// Create one account with one opportunity by calling a utility method
	Account[] accts = TestDataFactory.createAccountsWithOpps(1,1);

	// Perform test
	Test.startTest();
	Database.DeleteResult result = Database.delete(accts[0], false);
	Test.stopTest();
	// Verify that the deletion should have been stopped by the trigger,
	// so check that we got back an error.
	System.assert(!result.isSuccess());
	System.assert(result.getErrors().size() &gt; 0);
	System.assertEquals('Cannot delete account with related opportunities.',
			     result.getErrors()[0].getMessage());
    }        
}
</pre>

<p>
The <code>insert accts</code> happens automatically in the TestDataFactory class.
</p>
</div>
</div>


<div id="outline-container-org9374355" class="outline-4">
<h4 id="org9374355"><span class="section-number-4">14.3.3</span> Testing for Different Conditions</h4>
<div class="outline-text-4" id="text-14-3-3">
<p>
One test method is not enough to test all the possible inputs for the trigger. We need to test some other conditions, such as when an account without opportunities is deleted. We also need to test the same scenarios with a bulk number of records instead of just a single record. Here is an update of the test class that contains the three additional test methods:
</p>

<pre class="example">
@isTest
private class TestAccountDeletion {
    @isTest static void TestDeleteAccountWithOneOpportunity() {
	// Test data setup
	// Create one account with one opportunity by calling a utility method
	Account[] accts = TestDataFactory.createAccountsWithOpps(1,1);

	// Perform test
	Test.startTest();
	Database.DeleteResult result = Database.delete(accts[0], false);
	Test.stopTest();
	// Verify that the deletion should have been stopped by the trigger,
	// so check that we got back an error.
	System.assert(!result.isSuccess());
	System.assert(result.getErrors().size() &gt; 0);
	System.assertEquals('Cannot delete account with related opportunities.',
			     result.getErrors()[0].getMessage());
    }

    @isTest static void TestDeleteAccountWithNoOpportunities() {
	// Test data setup
	// Create one account with no opportunities by calling a utility method
	Account[] accts = TestDataFactory.createAccountsWithOpps(1,0);

	// Perform test
	Test.startTest();
	Database.DeleteResult result = Database.delete(accts[0], false);
	Test.stopTest();
	// Verify that the deletion was successful
	System.assert(result.isSuccess());
    }

    @isTest static void TestDeleteBulkAccountsWithOneOpportunity() {
	// Test data setup
	// Create accounts with one opportunity each by calling a utility method
	Account[] accts = TestDataFactory.createAccountsWithOpps(200,1);

	// Perform test
	Test.startTest();
	Database.DeleteResult[] results = Database.delete(accts, false);
	Test.stopTest();
	// Verify for each record.
	// In this case the deletion should have been stopped by the trigger,
	// so check that we got back an error.
	for(Database.DeleteResult dr : results) {
	    System.assert(!dr.isSuccess());
	    System.assert(dr.getErrors().size() &gt; 0);
	    System.assertEquals('Cannot delete account with related opportunities.',
				 dr.getErrors()[0].getMessage());
	}
    }

    @isTest static void TestDeleteBulkAccountsWithNoOpportunities() {
	// Test data setup
	// Create accounts with no opportunities by calling a utility method
	Account[] accts = TestDataFactory.createAccountsWithOpps(200,0);

	// Perform test
	Test.startTest();
	Database.DeleteResult[] results = Database.delete(accts, false);
	Test.stopTest();
	// For each record, verify that the deletion was successful
	for(Database.DeleteResult dr : results) {
	    System.assert(dr.isSuccess());
	}
    }
}
</pre>
</div>
</div>

<div id="outline-container-org10f82d3" class="outline-4">
<h4 id="org10f82d3"><span class="section-number-4">14.3.4</span> Unit Challenge</h4>
<div class="outline-text-4" id="text-14-3-4">
<p>
Create a contact test factory.
Create an Apex class that returns a list of contacts based on two incoming parameters: one for the number of contacts to generate, and the other for the last name. The list should NOT be inserted into the system, only returned. The first name should be dynamically generated and should be unique for each contact record in the list.
</p>

<p>
The Apex class must be called 'RandomContactFactory' and be in the public scope.
The Apex class should NOT use the @isTest annotation.
The Apex class must have a public static method called 'generateRandomContacts' (without the @testMethod annotation).
The 'generateRandomContacts' method must accept an integer as the first parameter, and a string as the second. The first parameter controls the number of contacts being generated, the second is the last name of the contacts generated.
The 'generateRandomContacts' method should have a return type of List&lt;Contact&gt;.
The 'generateRandomContacts' method must be capable of consistently generating contacts with unique first names.
For example, the 'generateRandomContacts' might return first names based on iterated number (i.e. 'Test 1','Test 2').
The 'generateRandomContacts' method should not insert the contact records into the database.
</p>

<p>
Solution:
</p>
<pre class="example">
public class RandomContactFactory {
    public static List&lt;Contact&gt; generateRandomContacts(Integer count, String lName){
	List&lt;Contact&gt; contacts = new List&lt;Contact&gt;();
	for(Integer i=0; i&lt;count; i++){
	    String fName = 'Test '+ String.valueOf(i);
	    Contact b = new Contact(Firstname = fName, Lastname = lName);
	    contacts.add(b);
	}

	return contacts;
    } 
}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgdbdf940" class="outline-2">
<h2 id="orgdbdf940"><span class="section-number-2">15</span> Visualforce Basics</h2>
<div class="outline-text-2" id="text-15">
<p>
Visualforce is a web development framework that allows developers to build custom interfaces for mobile and desktop apps that are hosted on the Lightning Platform. 
</p>

<p>
Developers can extend Salesforce built-in features and replace them with new functionality, and build completely new apps. This is familiar to anyone who has built web apps. You compose Visualforce pages with HTML and original styling elements. Each page is accessed by a unique URL. 
</p>

<p>
This is a short example of a Visualforce page: 
</p>

<p>
#+BEGIN<sub>SRC</sub>&lt;apex:page standardController="Contact" &gt;
    &lt;apex:form &gt;
        &lt;apex:pageBlock title="Edit Contact"&gt;
            &lt;apex:pageBlockSection columns="1"&gt;
                &lt;apex:inputField value="{!Contact.FirstName}"/&gt;
                &lt;apex:inputField value="{!Contact.LastName}"/&gt;
                &lt;apex:inputField value="{!Contact.Email}"/&gt;
                &lt;apex:inputField value="{!Contact.Birthdate}"/&gt;
            &lt;/apex:pageBlockSection&gt;
            &lt;apex:pageBlockButtons &gt;
                &lt;apex:commandButton action="{!save}" value="Save"/&gt;
            &lt;/apex:pageBlockButtons&gt;
        &lt;/apex:pageBlock&gt;
    &lt;/apex:form&gt;
&lt;/apex:page&gt;
#+END<sub>SRC</sub>
This displays a contact data entry form. 
</p>

<p>
This markup does a lot: 
</p>
<ul class="org-ul">
<li>it connects to the visualforce standard controller, a part of the visualforce framework that provides automatic data access and modification, standard actions, and more</li>
<li>when accessed without a record ID, the page displays a blank data entry form. When you click <b>Save</b>, a new record is created from form data</li>
<li>when accessed with a record ID, the page looks up the data for that contact record and displays it in an editable form. When you click <b>Save</b>, your changes for the contact are saved back to the database</li>
<li>each input field is smart about how it presents a value
<ul class="org-ul">
<li>the email field knows what a valid email address looks like, and displays an error if an invalid email is entered</li>
<li>the date field displays a date widget when you click into the field to make entering a date easier</li>
</ul></li>
<li>The <b>Save</b> button calls the save action method, one of the standard actions provided by the standard controller</li>
</ul>
</div>

<div id="outline-container-orga142dc8" class="outline-3">
<h3 id="orga142dc8"><span class="section-number-3">15.1</span> Where you can use Visualforce</h3>
<div class="outline-text-3" id="text-15-1">
</div>
<div id="outline-container-org000766e" class="outline-4">
<h4 id="org000766e"><span class="section-number-4">15.1.1</span> Open a Visualforce Page from the App Launcher</h4>
<div class="outline-text-4" id="text-15-1-1">
<p>
Your visualforce apps and custom tabs are all available from the App Launcher. To open the App Launcher, click the 9 dotted icon. To see all apps and items, select <b>View All</b>. 
</p>

<p>
Click a custom app to activate it. 
</p>
</div>
</div>

<div id="outline-container-org00ad49f" class="outline-4">
<h4 id="org00ad49f"><span class="section-number-4">15.1.2</span> Add a Visualforce Page to the Navigation Bar</h4>
<div class="outline-text-4" id="text-15-1-2">
<p>
You can add visualforce tabs to an app and they display as items in the app's navigation bar. 
</p>
</div>
</div>

<div id="outline-container-org6cff94e" class="outline-4">
<h4 id="org6cff94e"><span class="section-number-4">15.1.3</span> Display a Visualforce Page within a Standard Page Layout</h4>
<div class="outline-text-4" id="text-15-1-3">
<p>
Extend your page layouts by embedding Visualforce pages on them to display completely custom content on a standard page. The behaviour here is identical to Salesforce Classic, except you need to view the record's Details to see the page layout. 
</p>
</div>
</div>

<div id="outline-container-orgd6f9399" class="outline-4">
<h4 id="orgd6f9399"><span class="section-number-4">15.1.4</span> Add a Visualforce Page as a Component in the Lightning App Builder</h4>
<div class="outline-text-4" id="text-15-1-4">
<p>
When you create a custom app page in the Lightning App Builder, you can add a Visualforce page to the page by using Visualforce component. 
</p>

<p>
Note: you should enable "Available for Lightning Experience, Lightning Communities, and the mobile app" for a Visualforce page to make it available in the Lightning App Builder. 
</p>
</div>
</div>

<div id="outline-container-org96b485d" class="outline-4">
<h4 id="org96b485d"><span class="section-number-4">15.1.5</span> Lanunch A Visualforce Page as a Quick Action</h4>
<div class="outline-text-4" id="text-15-1-5">
<p>
You can add your page to the quick actions. You add them to the appropriate publisher area on the object's page layout.
</p>
</div>
</div>

<div id="outline-container-orgff7ed0a" class="outline-4">
<h4 id="orgff7ed0a"><span class="section-number-4">15.1.6</span> Display a Visualforce Page by Overriding Standard Buttons or Links</h4>
<div class="outline-text-4" id="text-15-1-6">
<p>
You can override the actions available on an object with a Visualforce page. When the user clicks a button or link that has been overridden, your page displays instead of the standard page. This is the same setup as Salesforce Classic. 
</p>
</div>
</div>

<div id="outline-container-org282042f" class="outline-4">
<h4 id="org282042f"><span class="section-number-4">15.1.7</span> Display a Visualforce Page using Custom Buttons or Links</h4>
<div class="outline-text-4" id="text-15-1-7">
<p>
You can create new actions for your objects, in the form of buttons and links, by defining them on an object. Javascript buttons and links aren't supported in Lightning Experience, but Visualforce (and URL) items are. The process of defining Visualforce buttons and links is identical to that in Salesforce Classic so we won't bother to show it here. 
</p>
</div>
</div>
</div>

<div id="outline-container-orgc9968c5" class="outline-3">
<h3 id="orgc9968c5"><span class="section-number-3">15.2</span> Create and Edit Visualforce Pages</h3>
<div class="outline-text-3" id="text-15-2">
<p>
Each visualforce tag corresponds to a coarse or fine-grained user interface component, such as a selection of a page, a list view, or an individual field. Visualforce boasts nearly 150 built-in components, and provides a way for developers to create their own components. Visualforce markup can be freely mixed with HTML, CSS and javascript libraries, giving you considerable flexibility in how you implement your app's user interface. 
</p>

<p>
You can view, create and edit Visualforce pages several different ways in Salesforce. Visualforce pages can also be created and modified using Salesforce APIs, enabling a variety of external tools. 
</p>
</div>

<div id="outline-container-org5d0a85b" class="outline-4">
<h4 id="org5d0a85b"><span class="section-number-4">15.2.1</span> Creating Visualforce Pages in Developer Console</h4>
<div class="outline-text-4" id="text-15-2-1">
<p>
Use the Developer Console to create and edit Visualforce pages, with access to other powerful Lightning Platform development tools. 
</p>

<p>
The Development Console has automatic syntax highlighting, tag pair matching, auto-suggest and auto-complete, smart indenting, and many other features. 
</p>

<p>
Follow these steps to create a Visualforce Page in the Developer Console:
</p>
<ul class="org-ul">
<li>open the developer console</li>
<li>click <b>File</b> &gt; <b>New</b> &gt; <b>Visualforce Page</b></li>
<li>provide the name for the page</li>
<li>enter your markup</li>
<li><b>Save</b></li>
<li>to see your new page click <b>Preview</b> (top left)</li>
<li><b>Preview</b> opens a new page. This shows you your page without Salesforce styling. To see your page in the context of the Lightning Experience, return to your main Lightning Experienc browser window. Open your browser's Javascript console and enter the following code - don't forget to replace the <code>pageName</code> with your page's name:</li>
</ul>
<pre class="example">
$A.get("e.force:navigateToURL").setParams(
    {"url": "/apex/pageName"}).fire();
</pre>
<p>
This javascript fires the Lightning Experience <code>navigateToURL* event, and is the equivalent of entering the classic ~/apex/PageName</code> URL - you can even see that URL pattern in the code
</p>
<ul class="org-ul">
<li>in the editor, add some additional text to your page and save</li>
<li>the preview window automatically refreshes to reflect your changes when you save the page.</li>
</ul>

<p>
Click <b>File</b> &gt; <b>Open</b> to see a list of existing Visualforce Pages. 
</p>
</div>
</div>

<div id="outline-container-orgdd259f6" class="outline-4">
<h4 id="orgdd259f6"><span class="section-number-4">15.2.2</span> Add Atttributes Using Auto-Suggest</h4>
<div class="outline-text-4" id="text-15-2-2">
<p>
Set attributes on Visualforce components to customize their behaviour. Use auto-suggest to quickly add attributes and values to Visualforce component tag. 
</p>

<p>
Follow these steps to add and modify attributes on a Visualforce tag:
</p>
<ul class="org-ul">
<li>in the <code>&lt;apex:page&gt;</code> tag before the closing bracket, type a space and then <code>s</code>. Autocomplete will popup. You can add a sidebar.</li>
</ul>

<p>
If pop-ups don't have what you need, you might see it at the Standard Component Reference at <a href="https://developer.salesforce.com/docs/atlas.en-us.224.0.pages.meta/pages/pages_compref.htm">https://developer.salesforce.com/docs/atlas.en-us.224.0.pages.meta/pages/pages_compref.htm</a>
</p>
</div>
</div>

<div id="outline-container-orgc5ea754" class="outline-4">
<h4 id="orgc5ea754"><span class="section-number-4">15.2.3</span> Add and Compose Components to Form a Page Structure</h4>
<div class="outline-text-4" id="text-15-2-3">
<p>
Add components to the Visualforce page to build the page's structure. 
</p>

<p>
Follow these steps to add new Visualforce tags to your page, and use them to create a structure for the page:
</p>

<ul class="org-ul">
<li>add a <code>&lt;apex:pageBlock&gt;</code> component</li>
<li>add a title attribute <code>&lt;apex:pageBlock title="A Block Title"&gt;</code></li>
<li>add a <code>&lt;apex:pageBlockSection&gt;</code></li>
</ul>

<p>
Now you have a page that displays some structure, with a top-level title, a collapsible section with a title, and some plain text. 
</p>

<pre class="example">
&lt;apex:page&gt;
    &lt;h1&gt;Hello World&lt;/h1&gt;
    &lt;apex:pageBlock title="A Block Title"&gt;
	&lt;apex:pageBlockSection title="A Section Title"&gt;
	    I'm three components deep!
	&lt;/apex:pageBlockSection&gt;
    &lt;/apex:pageBlock&gt;
&lt;/apex:page&gt;
</pre>

<p>
Add another <code>pageBlockSection</code>. You cannot use a child <code>&lt;apex:pageBlockSection&gt;</code> tag without putting it inside a parent <code>&lt;apex:pageBlock&gt;</code> tag. 
</p>

<p>
You can also edit pages through the <b>Setup</b> by entering <b>Visualforce Pages</b> in the <b>Quick find</b> box. This is a more limited editor. 
</p>

<p>
The <code>&lt;apex:pageBlock&gt;</code> and <code>&lt;apex:pageBlockSection&gt;</code> components you added to your page render a user interface that matches that of Salesforce Classic interface elements. There are other components that also let you match the platform visual style, including <code>&lt;apex:pageBlockSectionItem&gt;</code>, <code>&lt;apex:pageBlockButtons&gt;</code>. 
</p>
</div>
</div>

<div id="outline-container-org1a51d7e" class="outline-4">
<h4 id="org1a51d7e"><span class="section-number-4">15.2.4</span> Unit Challenge</h4>
<div class="outline-text-4" id="text-15-2-4">
<p>
Create a Visualforce page without the standard Salesforce header and display an image using the Visualforce image component.
Challenge Requirements
The page must be named DisplayImage
It must NOT display the standard Salesforce header
It must use a Visualforce apex:image component to display this image - <img src="https://developer.salesforce.com/files/salesforce-developer-network-logo.png" alt="salesforce-developer-network-logo.png" />
</p>

<p>
Solution: 
</p>
<pre class="example">
&lt;apex:page showHeader="false"&gt;
    &lt;apex:image id="Logo" alt="Logo"
		url="https://developer.salesforce.com/files/salesforce-developer-network-logo.png" /&gt;
&lt;/apex:page&gt;
</pre>
</div>
</div>
</div>


<div id="outline-container-org57e155b" class="outline-3">
<h3 id="org57e155b"><span class="section-number-3">15.3</span> Use Simple Variables and Formulas</h3>
<div class="outline-text-3" id="text-15-3">
</div>
<div id="outline-container-org5df6f5d" class="outline-4">
<h4 id="org5df6f5d"><span class="section-number-4">15.3.1</span> Introduction to Global Variables and Visualforce Expressions</h4>
<div class="outline-text-4" id="text-15-3-1">
<p>
Visualforce can display data according to variables (e.g. from the database and/or according to who is logged in). Dynamic data is accessed in markup through the use of global variables, calculations, and properties made available by the page's controller. Together these are described as Visualforce expressions. Use expressions for dynamic output or passing values into components by assigning them to attributes. 
</p>

<p>
A visualforce expression is any set of literal values, variables, sub-expressions or operators that can be resolved to a single value. Method calls aren't allowed in expressions. 
</p>

<p>
The expression syntax in Visualforce is <code>{! expression}</code>. 
</p>

<p>
Anything inside the curly brackets delimeters is evaluated and dynamically replaced when the page is rendered, or when the value is used. Whitespace is ignored. 
</p>
</div>
</div>

<div id="outline-container-orgbf369ce" class="outline-4">
<h4 id="orgbf369ce"><span class="section-number-4">15.3.2</span> Global Variables</h4>
<div class="outline-text-4" id="text-15-3-2">
<p>
Use global variables to access and display system values and resources in your Visualforce markup. For example, Visualforce provides information about the logged-in user in a global variable called <code>$User</code>. You can access fields of the <code>$User</code> global variable (and others) using the expression <code>{! $GlobalName.fieldName}</code>. 
</p>

<p>
This will print information about the user:
</p>
<pre class="example">
{! $User.FirstName } {! $User.LastName } 
{! $User.Username }
</pre>

<p>
Visualforce expressions are case-insensitive and spaces within the <code>{! ... }</code> are ignored. 
</p>
</div>
</div>

<div id="outline-container-org4a1eee0" class="outline-4">
<h4 id="org4a1eee0"><span class="section-number-4">15.3.3</span> Formula Expressions</h4>
<div class="outline-text-4" id="text-15-3-3">
<p>
Visualforce lets you use more than just global variables in the expression language. It also supports formulas that let you manipulate values. 
</p>

<p>
For example, the <code>&amp;</code> character is the formula language operator that concatenates strings. 
</p>

<p>
You can change the User.FirstName, User.LastName example above with the below:
</p>
<pre class="example">
{! $User.FirstName &amp; ' ' &amp; $User.LastName }
</pre>

<p>
This will calculate dates: 
</p>
<pre class="example">
&lt;p&gt; Today's Date is {! TODAY() } &lt;/p&gt;
&lt;p&gt; Next week it will be {! TODAY() + 7 } &lt;/p&gt;
</pre>

<p>
This uses the TODAY() function. These are built in calculations: 
</p>

<pre class="example">
&lt;p&gt;The year today is {! YEAR(TODAY()) }&lt;/p&gt;
&lt;p&gt;Tomorrow will be day number  {! DAY(TODAY() + 1) }&lt;/p&gt;
&lt;p&gt;Let's find a maximum: {! MAX(1,2,3,4,5,6,5,4,3,2,1) } &lt;/p&gt;
&lt;p&gt;The square root of 49 is {! SQRT(49) }&lt;/p&gt;
&lt;p&gt;Is it true?  {! CONTAINS('salesforce.com', 'force.com') }&lt;/p&gt;
</pre>

<p>
Some functions take parameters which are passed in the brackets. The <code>CONTAINS()</code> function is interesting. It returns a boolean value: true or false. It compares two arguments of text and returns true if the first argument contains the second argument. If it doesn't it returns false. 
</p>
</div>
</div>

<div id="outline-container-org55062e6" class="outline-4">
<h4 id="org55062e6"><span class="section-number-4">15.3.4</span> Conditional Expressions</h4>
<div class="outline-text-4" id="text-15-3-4">
<p>
Use a conditional expression to display different information based on the value of an expression. For example, if an invoice has no line items, you might want to display the word "none" instead of an empty list. Or if an item has expired, you might want to display "Ended" instead of showing the date and time. 
</p>

<p>
You can do this in Visualforce by using a conditional formula expression such as <code>IF()</code>. The <code>IF()</code> expression takes three arguments:
</p>
<ul class="org-ul">
<li>the first is a boolean (something that is true or false)</li>
<li>the second argument is the value returned if the parameter is true</li>
<li>the third argument is the value returned if the parameter is false</li>
</ul>

<p>
This is an example of an <code>IF()</code> function: 
</p>
<pre class="example">
&lt;p&gt;{! IF( CONTAINS('salesforce.com','force.com'),
     'Yep', 'Nope') }&lt;/p&gt;
&lt;p&gt;{! IF( DAY(TODAY()) &lt; 15,
     'Before the 15th', 'The 15th or after') }&lt;/p&gt;
</pre>

<p>
The IF() function makes the CONTAIN() function more useful (you can display more than just true or false). 
</p>

<p>
This will print the username if the user is active, or "inactive" if the user is not logged in. 
</p>

<pre class="example">
({! IF($User.isActive, $User.Username, 'inactive') })
</pre>

<p>
More global variables are found on the global variables reference here: <a href="https://developer.salesforce.com/docs/atlas.en-us.224.0.pages.meta/pages/pages_variables_global.htm">https://developer.salesforce.com/docs/atlas.en-us.224.0.pages.meta/pages/pages_variables_global.htm</a>
</p>
</div>
</div>

<div id="outline-container-org776d2a6" class="outline-4">
<h4 id="org776d2a6"><span class="section-number-4">15.3.5</span> Unit Challenge</h4>
<div class="outline-text-4" id="text-15-3-5">
<p>
Create a Visualforce page that displays the first name of the logged-in user.
Challenge Requirements
</p>

<ul class="org-ul">
<li>The page must be named DisplayUserInfo</li>
<li>The displayed user information must be generated dynamically from the logged-in user</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-orgf6b510f" class="outline-3">
<h3 id="orgf6b510f"><span class="section-number-3">15.4</span> Use Standard Controllers</h3>
<div class="outline-text-3" id="text-15-4">
<p>
Visualforce uses the traditional <b>model-view-controller</b> (MVC) paradigm. These are called the standard controllers. 
</p>

<p>
The MVC design pattern makes it easy to separate the view and its styling from the underlying database and logic. The view (Visualforce Page) interacts with a controller, and the controller provides functionality to the page. The controller can contain the logic to be executed when a button is clicked. A controller also typically interacts with the model (the database) - making available data that the view might want to display, or pushing changes back to the database. 
</p>

<p>
Most standard and all custom objects have standard controllers that can be used to interact with the data associated with the object, so you don't need to write code for the controller yourself. You can extend the standard controllers to add new functionality, or create custom controllers from scratch. 
</p>
</div>

<div id="outline-container-orga000f9e" class="outline-4">
<h4 id="orga000f9e"><span class="section-number-4">15.4.1</span> Find a Record ID and Add It to the Request URL</h4>
<div class="outline-text-4" id="text-15-4-1">
<p>
Provide the record ID to the standard controller by adding it as a parameter in the request URL. To use the standard controller to reference a specific record, it needs to know the record identifier, or the ID, of the record to work with. It uses the ID to retrieve the data and to save it back to the database when the record data is changed. 
</p>

<p>
While you are working on a Visualforce page in development, it won't have an ID to get a record for. Therefore, for testing you provide a <code>GET</code> parameter in the request URL. To do this, get an ID from a live salesforce org and click on a record that relates to the request URL that you will be building (for example, an Account record). 
</p>

<ul class="org-ul">
<li>open up the account and copy the long string which is the unique ID</li>
<li>switch back to the preview page and post <code>&amp;id=</code> with the id at the end</li>
<li>press return to load that URL</li>
</ul>

<p>
This doesn't necessarily change the appearance of the page yet, but it will come in useful later on. 
</p>

<p>
Remeber that you can also look at the page in the Lightning Experience by passing the following code in to a Javascript console: 
</p>
<pre class="example">
$A.get("e.force:navigateToURL").setParams(
    {"url": "/apex/pageName"}).fire();
</pre>

<p>
To preview a page with a specific ID, you can pass that in the javascript snippet:
</p>
<pre class="example">
$A.get("e.force:navigateToURL").setParams(
    {"url": "/apex/pageName?&amp;id=00141000004jkU0AAI"}).fire();
</pre>
</div>
</div>

<div id="outline-container-org00ba810" class="outline-4">
<h4 id="org00ba810"><span class="section-number-4">15.4.2</span> Display Data from a Single Record</h4>
<div class="outline-text-4" id="text-15-4-2">
<p>
Add the standard controller for accounts to the page, and then reference account fields to display a record's data. 
</p>

<p>
To add the standard controller, you will need to add the following attribute to the <code>&lt;apex:page&gt;</code> tag:
</p>

<pre class="example">
standardController="Account"
</pre>

<p>
Now you can add markup to view details of the record:
</p>
<pre class="example">
Name: {! Account.Name } &lt;br/&gt;
Phone: {! Account.Phone } &lt;br/&gt;
Industry: {! Account.Industry } &lt;br/&gt;
Revenue: {! Account.AnnualRevenue } &lt;br/&gt;
</pre>

<p>
There is a lot of functionality being looked after the standard controllers here. 
</p>

<ol class="org-ol">
<li>When a page is loaded, and the &lt;apex:page&gt; component is activated, it activates a standard controller for the account object</li>
<li>The standard controller sees that there's an ID parameter field in the URL and searches for it and retrieves the matching account record</li>
<li>The standard controller takes the record and puts it in a variable that it makes available to the page. The variable has the same name as the standard controller's sObject:Account. It's an object variable, and contains all of the fields available on the Account sObject.</li>
<li>The four Visualforce expressions all reference the Account variable. They use dot notation to access individual fields within the Account variable. So <code>{! Account.Name }</code> gets the name of the account, and so on.</li>
</ol>

<p>
You can also format fields differently if they are displaying incorrectly. 
</p>
</div>
</div>

<div id="outline-container-orga248b08" class="outline-4">
<h4 id="orga248b08"><span class="section-number-4">15.4.3</span> Display Fields from Related Records</h4>
<div class="outline-text-4" id="text-15-4-3">
<p>
Use dot notation to display data from related records. 
</p>

<p>
For example, while viewing an Account object, you might have noticed that the Account object has a field called Account Owner, and that its type is a <b>Lookup(User)</b>. This field creates a relationship to a User record. By clicking the Account Owner field label link, you'll discover its Field Name is <b>Owner</b>. 
</p>

<p>
The Owner relationship represents a User. And, if from Setup you go to <b>Object Manager</b> &gt; <b>Fields &amp; Relationships</b>, you'll find that the User has a Name field. We can display this with this snippet:
</p>

<pre class="example">
Account owner: {! Account.Owner.Name } &lt;br/&gt;
</pre>

<p>
You traverse the path from the Account, via the Owner field to the User object. 
</p>

<p>
Standard controller also provides methods to edit, create and delete records. 
</p>

<p>
If you want to embed visualforce pages within an object's page layouts, use as object-specific custom actions, or use as mobile cards in the Salesforce app must use the standard controller for the relevant object. 
</p>

<p>
If you've created custom objects and want to know how to reference a field, you have to follow a slightly different procedure. You'll need to check it's API name (ending in <code>__c</code>) and reference it with that. 
</p>
</div>
</div>

<div id="outline-container-org0f12181" class="outline-4">
<h4 id="org0f12181"><span class="section-number-4">15.4.4</span> Unit Challenge</h4>
<div class="outline-text-4" id="text-15-4-4">
<p>
Using the Contact standard controller, create a Visualforce page which displays a Contact's First Name, Last Name and the Email address of the Contact's Owner.
Challenge Requirements
</p>

<p>
The page must be named ContactView
It must reference the Contact standard controller
It should include three bind variables that use the standard controller to display the following Contact record information:
    First Name
    Last Name
    Owner Email
</p>

<p>
Solution: 
</p>

<pre class="example">
&lt;apex:page standardController="Contact"&gt;
    &lt;apex:pageBlock title="Contact"&gt;
       &lt;apex:pageBlockSection &gt;
	    {! Contact.FirstName }
	    {! Contact.LastName } 
	    {! Contact.Owner.Email } 
	&lt;/apex:pageBlockSection&gt;
    &lt;/apex:pageBlock&gt;
&lt;/apex:page&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org79e01df" class="outline-3">
<h3 id="org79e01df"><span class="section-number-3">15.5</span> Display Records, Fields and Tables</h3>
<div class="outline-text-3" id="text-15-5">
</div>
<div id="outline-container-orgd4a2512" class="outline-4">
<h4 id="orgd4a2512"><span class="section-number-4">15.5.1</span> Introduction to Output Components</h4>
<div class="outline-text-4" id="text-15-5-1">
<p>
Components are rendered to HTML, CSS and Javascript when a page is requested. <b>Coarse-grained</b> components provide a significant amount of functionality in a single component, andd might add a lot of information and user interface to the page it is used on. 
</p>

<p>
<b>Fine-grained</b> components provide more focused functionality, and enable you to design  the page to look and behave the way you want. 
</p>

<p>
This will focus on output components - those components that output data from a record and enable you to design a view-only interface. 
</p>
</div>
</div>

<div id="outline-container-org30d60c8" class="outline-4">
<h4 id="org30d60c8"><span class="section-number-4">15.5.2</span> Create a Visualforce Page with a Standard Controller</h4>
<div class="outline-text-4" id="text-15-5-2">
<p>
Use output components with a standard controller to make it easy to access and display record details. 
</p>

<p>
Our page will have a typical Account.Name in it: 
</p>

<pre class="example">
&lt;apex:page standardController="Account"&gt;
    {! Account.Name }
&lt;/apex:page&gt;
</pre>
</div>
</div>

<div id="outline-container-org1ff79a9" class="outline-4">
<h4 id="org1ff79a9"><span class="section-number-4">15.5.3</span> Display Record Details</h4>
<div class="outline-text-4" id="text-15-5-3">
<p>
Use <code>&lt;apex:detail&gt;</code> to quickly add record details to a page that uses a standard controller. 
</p>

<p>
Some output components bring a lot to the party. These <b>"coarse-grained"</b> components offer a lot of functionality, displaying many fields, labels, and other user interface elements. They let you quickly build pages that are variations on the built-in Salesforce user interface. 
</p>

<p>
Replace the <code>{! Account.Name }</code> with the following code: 
</p>
<pre class="example">
&lt;apex:detail /&gt;
</pre>

<p>
This includes nearly all the details for that record. 
</p>

<p>
<code>&lt;apex:detail&gt;</code> is a coarse-grained output component that adds many fields, sections, buttons and other user interface elements in just one line of markup. 
</p>

<p>
You can change the styling with attributes of this markup tag. More can be read about that here <a href="https://trailhead.salesforce.com/content/learn/modules/lex_dev_visualforce/lex_dev_visualforce_design">https://trailhead.salesforce.com/content/learn/modules/lex_dev_visualforce/lex_dev_visualforce_design</a>.
</p>

<p>
Now add this code below the apex:detail tag:
</p>
<pre class="example">
&lt;apex:relatedList list="Contacts"/&gt;
&lt;apex:relatedList list="Opportunities" pageSize="5"/&gt;
</pre>

<p>
The page should now display two related lists, for contacts and opportunities. 
</p>

<p>
The <code>&lt;apex:relatedList&gt;</code> component is another <b>coarse-grained</b> component, but it is lower level than <code>&lt;apex:detail&gt;</code>. The former shows many related lists at once (or none). The latter lets you see one related list at a time. 
</p>
</div>
</div>

<div id="outline-container-org47ae122" class="outline-4">
<h4 id="org47ae122"><span class="section-number-4">15.5.4</span> Display Individual Fields</h4>
<div class="outline-text-4" id="text-15-5-4">
<p>
Use <code>&lt;apex:outputField&gt;</code> to display individual fields from a record. When you need even more control over your page layout, you can add fields individually. 
</p>

<p>
Add the following to your page as individual fields:
</p>
<pre class="example">
&lt;apex:outputField value="{! Account.Name }"/&gt;
&lt;apex:outputField value="{! Account.Phone }"/&gt;
&lt;apex:outputField value="{! Account.Industry }"/&gt;
&lt;apex:outputField value="{! Account.AnnualRevenue }"/&gt;
</pre>

<p>
The formatting isn't as expected. The fields are all displayed on one line, without labels and without any other formatting. When you wrap these in <code>&lt;apex:pageBlock&gt;</code> and <code>&lt;apex:pageBlockSection&gt;</code> components, it's behaviour changes quite a bit. 
</p>

<p>
The pageBlock and pageBlockSection components are required to activate the platform look and feel. 
</p>

<p>
Although outputField seems like a <b>fine-grained</b> component, because it only outputs one field, it's actually doing quite a lot. It knows which components it is being used inside and adapts to that. 
</p>
</div>
</div>

<div id="outline-container-orgec8fc92" class="outline-4">
<h4 id="orgec8fc92"><span class="section-number-4">15.5.5</span> Display a Table</h4>
<div class="outline-text-4" id="text-15-5-5">
<p>
Use <code>&lt;apex:pageBlockTable&gt;</code> to add a table of data to a page. 
</p>

<p>
What is a <i>relatedList</i>? 
</p>
<ul class="org-ul">
<li>it grabs a list of similar data elements</li>
<li>it sets up a table with columns for each field, headers atop each column and so on</li>
<li>for each item in the list - for each related contact - it adds a row to the table and fills in each column with the appropriate detail from that record</li>
</ul>

<p>
You can do the same thing in your own Visualforce markup using iteration components. For example <code>{! Account.contacts }</code> is an expression that evaluates to a list of contacts for an account. You can use this expression with an iteration component to create a list or table with details of these related contacts. 
</p>

<p>
This Visualforce markup will show the contacts for a given account, using a table (and iterating over the contacts:
</p>
<pre class="example">
&lt;apex:pageBlock title="Contacts"&gt;
   &lt;apex:pageBlockTable value="{!Account.contacts}" var="contact"&gt;
      &lt;apex:column value="{!contact.Name}"/&gt;
      &lt;apex:column value="{!contact.Title}"/&gt;
      &lt;apex:column value="{!contact.Phone}"/&gt;
   &lt;/apex:pageBlockTable&gt;
&lt;/apex:pageBlock&gt;
</pre>

<p>
<code>&lt;apex:pageBlockTable&gt;</code> is an iteration component that generates a table of data, complete with platform styling. This is what is going on in the markup:
</p>
<ul class="org-ul">
<li>the value attribute of pageBlockTable is set to the expression mentioned previously, <code>{! Account.contacts }</code>. This is the list of records that the pageBlockTable will work with</li>
<li>for each record in that list, one record at a time, pageBlockTable assigns that record to the variable named in the <code>&lt;apex:pageBlockTable&gt;</code>'s var attribute. In this case, that variable is named contact</li>
<li>for each record, <code>&lt;apex:pageBlockTable&gt; constructs a new row in the table, using the row defined by the set of ~&lt;apex:column&gt;</code> components within the body of <code>&lt;apex:pageBlockTable&gt;</code>. The <code>&lt;apex:column&gt;</code> components, in turn, use the contact variable that represents the current record to pull out the field values for that record</li>
<li>outside of the loop, <code>&lt;apex:pageBlockTable&gt;</code> uses the fields in the <code>&lt;apex:column&gt;</code> component to create column headers, by looking up the label for each field</li>
</ul>
</div>
</div>

<div id="outline-container-orgc642c34" class="outline-4">
<h4 id="orgc642c34"><span class="section-number-4">15.5.6</span> Unit Challenge</h4>
<div class="outline-text-4" id="text-15-5-6">
<p>
Create a page which displays a subset of Opportunity fields using apex:outputField components. Bind the Name, Amount, Close Date and Account Name fields to the apex:outputField components.
Challenge Requirements
</p>

<p>
The page must be named OppView
It must reference the Opportunity standard controller
It must have four apex:outputField components bound to the following Opportunity fields:
    Opportunity Name
    Amount
    Close Date
    Account Name of the Opportunity
</p>

<p>
Solution:
</p>
<pre class="example">
&lt;apex:page standardController="Opportunity"&gt;
    &lt;apex:pageBlock title="Opportunity Details"&gt;
	&lt;apex:pageBlockSection&gt;
		&lt;apex:outputField value="{! Opportunity.Name }"/&gt;
		&lt;apex:outputField value="{! Opportunity.Amount }"/&gt;
		&lt;apex:outputField value="{! Opportunity.CloseDate }"/&gt;
		&lt;apex:outputField value="{! Opportunity.Account.Name }"/&gt;
	&lt;/apex:pageBlockSection&gt;
	&lt;/apex:pageBlock&gt;
&lt;/apex:page&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeb249b1" class="outline-3">
<h3 id="orgeb249b1"><span class="section-number-3">15.6</span> Input Data Using Forms</h3>
<div class="outline-text-3" id="text-15-6">
</div>
<div id="outline-container-org6c2cb44" class="outline-4">
<h4 id="org6c2cb44"><span class="section-number-4">15.6.1</span> Introduction to Visualforce forms</h4>
<div class="outline-text-4" id="text-15-6-1">
<p>
Visualforce provides everything needed to easily create pages that create new records, edit its values and save the changes back to the database. 
</p>

<p>
This will combine the <code>&lt;apex:form&gt;</code> component and a few easy to understand form elements to create a sophisticated record editing page. 
</p>
</div>
</div>
<div id="outline-container-org6947742" class="outline-4">
<h4 id="org6947742"><span class="section-number-4">15.6.2</span> Create a Basic form</h4>
<div class="outline-text-4" id="text-15-6-2">
<p>
Use <code>&lt;apex:form&gt;</code> and <code>&lt;apex:inputField&gt;</code> to create a page to edit data. Combine <code>&lt;apex:commandButton&gt;</code> with the save action built into the standard controller to create a new record, or save changes to an existing one. 
</p>

<p>
A page that lets someone edit and update a record needs to do all the following:
</p>
<ul class="org-ul">
<li>look up the record to edit and retrieve it from the database</li>
<li>put the relevant record data on the page in an editing form</li>
<li>receive a form submission with changed data</li>
<li>validate the new values</li>
<li>save valid changes back to the database</li>
<li>provide appropriate messages to the person about the status of the save</li>
</ul>

<p>
To create a form:
</p>
<ul class="org-ul">
<li>in the developer console, create a new visualforce page</li>
<li>in the editor provide this markup:</li>
</ul>
<pre class="example">
&lt;apex:page standardController="Account"&gt;
    &lt;h1&gt;Edit Account&lt;/h1&gt;
    &lt;apex:form&gt;
	&lt;apex:inputField value="{! Account.Name }"/&gt;
	&lt;apex:commandButton action="{! save }" value="Save" /&gt;
    &lt;/apex:form&gt;
&lt;/apex:page&gt;
</pre>

<p>
You will need the following code to preview:
</p>
<pre class="example">
$A.get("e.force:navigateToURL").setParams(
    {"url": "/apex/AccountEdit?&amp;id=0014K000006szZlQAI"}).fire();
</pre>

<p>
This has carried out quite a few processes: 
</p>
<ul class="org-ul">
<li>the page uses the ID to fetch the data</li>
<li>the form creates the form with the data</li>
<li>the inputField has the entry for the field</li>
<li>the command button allows a save back to the database</li>
</ul>
</div>
</div>

<div id="outline-container-org8d8fe49" class="outline-4">
<h4 id="org8d8fe49"><span class="section-number-4">15.6.3</span> Add Field Labels and Platform Styling</h4>
<div class="outline-text-4" id="text-15-6-3">
<p>
Place form elements within pageBlock and pageBlockSection tags to organize and group them. 
</p>

<ul class="org-ul">
<li>inside the form, component, wrap the two form elements in <code>&lt;apex:pageBlock&gt;</code> and <code>&lt;apex:pageBlockSection&gt;</code> tags:</li>
</ul>
<pre class="example">
&lt;apex:page standardController="Account"&gt;
    &lt;apex:form&gt;
    &lt;apex:pageBlock title="Edit Account"&gt;
	&lt;apex:pageBlockSection&gt;
	    &lt;apex:inputField value="{! Account.Name }"/&gt;
	&lt;/apex:pageBlockSection&gt;
	&lt;apex:pageBlockButtons&gt;
	    &lt;apex:commandButton action="{! save }" value="Save" /&gt;
	&lt;/apex:pageBlockButtons&gt;
    &lt;/apex:pageBlock&gt;
    &lt;/apex:form&gt;
&lt;/apex:page&gt;
</pre>
<p>
The styling now chages and the form is different.
</p>

<p>
When you use input components, they use the same styling provided by the surrounding tags. 
</p>

<p>
Add three more fields:
</p>
<pre class="example">
&lt;apex:pageBlockSection columns="1"&gt;
    &lt;apex:inputField value="{! Account.Name }"/&gt;
    &lt;apex:inputField value="{! Account.Phone }"/&gt;
    &lt;apex:inputField value="{! Account.Industry }"/&gt;
    &lt;apex:inputField value="{! Account.AnnualRevenue }"/&gt;
&lt;/apex:pageBlockSection&gt;
</pre>
</div>
</div>

<div id="outline-container-orgc92e391" class="outline-4">
<h4 id="orgc92e391"><span class="section-number-4">15.6.4</span> Display Form Errors and Messages</h4>
<div class="outline-text-4" id="text-15-6-4">
<p>
Use <code>&lt;apex:pageMessages&gt;</code> to display any form handling error or messages. 
</p>

<p>
This helps provide useful feedback to the user when something goes wrong. The standard controller handles that for you. All you need to do is to tell it where to put the message on the page:
</p>
<ul class="org-ul">
<li>put the following markup under the pageblock opening tag</li>
<li><code>&lt;apex:pageMessages /&gt;</code></li>
</ul>

<p>
If there is a validation problem (e.g. a mandatory field missing, you will get an error box.
</p>
</div>
</div>

<div id="outline-container-org2e9462f" class="outline-4">
<h4 id="org2e9462f"><span class="section-number-4">15.6.5</span> Edit Related Records</h4>
<div class="outline-text-4" id="text-15-6-5">
<p>
This makes it easier for your users, by providing links to related records. Up to now, we have only edited one record, as we have used the controller that allows that, so can only make changes on that object. But what about related objects? 
</p>

<p>
Below the closing pageBlock tag, add the following:
</p>
<pre class="example">
&lt;apex:pageBlock title="Contacts"&gt;
    &lt;apex:pageBlockTable value="{!Account.contacts}" var="contact"&gt;
	&lt;apex:column&gt;
	    &lt;apex:outputLink
		value="{! URLFOR($Action.Contact.Edit, contact.Id) }"&gt;
		Edit
	    &lt;/apex:outputLink&gt;
	    &amp;nbsp;
	    &lt;apex:outputLink
		value="{! URLFOR($Action.Contact.Delete, contact.Id) }"&gt;
		Del
	    &lt;/apex:outputLink&gt;
	&lt;/apex:column&gt;
	&lt;apex:column value="{!contact.Name}"/&gt;
	&lt;apex:column value="{!contact.Title}"/&gt;
	&lt;apex:column value="{!contact.Phone}"/&gt;
    &lt;/apex:pageBlockTable&gt;
&lt;/apex:pageBlock&gt;
</pre>

<p>
This adds a Table view of the related contacts and an edit button. 
</p>

<p>
The above <code>&lt;apex:pageBlockTable&gt;</code> component creates a table with a list of the account's contacts. What's new is the column with the <code>&lt;apex:outputLink&gt;</code> components. These use an expression that references a global variable, <code>$Action</code>, and combines it with the contact's ID inside the <code>URLFOR()</code> function. The result is a link to the contact's edit or delete page depending on the action referenced. 
</p>

<p>
For select lists and radio buttons look for components that start with <code>&lt;apex:select&gt;</code> instead. 
</p>

<p>
The actions here are standard actions. There's a core set that are available for all objects with standard controllers, but many of the built-in standard objects have additional actions that you can use. 
</p>

<p>
To create a new contact, it gets more complicated as there is no referenced lookup. You will need to write a custom controller of your own. 
</p>
</div>
</div>

<div id="outline-container-org63a4542" class="outline-4">
<h4 id="org63a4542"><span class="section-number-4">15.6.6</span> Unit Challenge</h4>
<div class="outline-text-4" id="text-15-6-6">
<p>
Using the Visualforce apex:form component, create a page which will insert a Contact record based on First Name, Last Name and Email. After submitting the form, the user should be redirected to detail page of the new Contact record.
Challenge Requirements
</p>

<p>
The page must be named CreateContact
It must reference the Contact standard controller
It must use a Visualforce apex:form component
It must have three apex:inputField components bound to the following Contact fields:
    First Name
    Last Name
    Email
It must have an apex:commandButton component that uses the save method from the standard controller
</p>


<p>
Solution: 
</p>
<pre class="example">
&lt;apex:page standardController="Contact"&gt;
    &lt;apex:form&gt;
	&lt;apex:pageBlock&gt;
		&lt;apex:pageBlockSection&gt;
		&lt;apex:inputField value="{! Contact.Firstname }" /&gt;
		&lt;apex:inputField value="{! Contact.Lastname }" /&gt;
		&lt;apex:inputField value="{! Contact.Email }" /&gt;
	    &lt;/apex:pageBlockSection&gt;
	    &lt;apex:pageBlockButtons&gt;            
		&lt;apex:commandButton action="{! save }" value="Save" /&gt;
	    &lt;/apex:pageBlockButtons&gt;
	&lt;/apex:pageBlock&gt;
    &lt;/apex:form&gt;
&lt;/apex:page&gt;
</pre>
</div>
</div>


<div id="outline-container-orgeff5fa5" class="outline-4">
<h4 id="orgeff5fa5"><span class="section-number-4">15.6.7</span> Use Standard List Controllers</h4>
</div>
<div id="outline-container-org75785f3" class="outline-4">
<h4 id="org75785f3"><span class="section-number-4">15.6.8</span> Introduction to the Standard List Controller</h4>
<div class="outline-text-4" id="text-15-6-8">
<p>
The standard list controller allows you to create Visualforce pages that can display or act on a set of records. 
</p>

<p>
This provides many powerful automatic behaviours, such as querying for records of a specific object and making the records available in a collection variable, as well as filtering of and pagination through the results. This is similar to the regular standard controller, but with the ability to work with many records at one time. 
</p>
</div>
</div>

<div id="outline-container-orgb6c686d" class="outline-4">
<h4 id="orgb6c686d"><span class="section-number-4">15.6.9</span> Display a List of Records</h4>
<div class="outline-text-4" id="text-15-6-9">
<p>
Use a standard list controller and an interation component to display a list of records. 
</p>

<p>
Because you're dealing with a collection of records you must use an iteration component to display them. 
</p>

<p>
The markup for using the standard list controller is almost identical to the standard record controller. The primary differences are highlighted in bold:
</p>

<pre class="example">
&lt;apex:page standardController="Contact" recordSetVar="contacts"&gt;
    &lt;apex:pageBlock title="Contacts List"&gt;
	&lt;!-- Contacts List --&gt;
	&lt;apex:pageBlockTable value="{! contacts }" var="ct"&gt;
	    &lt;apex:column value="{! ct.FirstName }"/&gt;
	    &lt;apex:column value="{! ct.LastName }"/&gt;
	    &lt;apex:column value="{! ct.Email }"/&gt;
	    &lt;apex:column value="{! ct.Account.Name }"/&gt;
	&lt;/apex:pageBlockTable&gt;
    &lt;/apex:pageBlock&gt;
&lt;/apex:page&gt;
</pre>

<p>
First you set the <code>standardController</code> and then you set the <code>recordSetVar</code> attribute on the same component. The <code>recordSetVar</code> sets the name of the variable to be created with the collection of iterated records. By convention, this variable is usually named the plural of teh oject name. 
</p>

<p>
<code>&lt;apex:pageBlockTable&gt;</code> is an iteration component that generates a table of data, complete with platform styling. 
</p>

<p>
Outsided of the loop, the pageBlockTable uses the <code>&lt;apex:column&gt;</code> components to create column headers. 
</p>
</div>
</div>

<div id="outline-container-org13260e7" class="outline-4">
<h4 id="org13260e7"><span class="section-number-4">15.6.10</span> Add List View Filtering to the List</h4>
<div class="outline-text-4" id="text-15-6-10">
<p>
Use <code>{! listViewOptions }</code> to get a list view filters available for an object. Use <code>{! filterId }</code> to set the list view filter to use for a standard lists controller's results. 
</p>

<p>
You create list view filters declaratively, using clicks instead of code, and the standard list controller lets you use any defined list view filter on the page. 
</p>

<p>
To add a list view filter:
</p>
<ul class="org-ul">
<li>wrap theh entire <code>&lt;apex:pageBlock&gt;</code> in an <code>&lt;apex:form&gt;</code> tag. This is needed to submit bact to the server</li>
<li>in the <code>&lt;apex:pageBlock&gt;</code> tag, add the attribute <code>id="contacts_list"</code>. This provides a name for the block that we can use for a cool Ajax effect</li>
<li>after the opening pageBlock tag, and above the pageBlockTable tag, add the following markup:</li>
</ul>
<pre class="example">
Filter:
&lt;apex:selectList value="{! filterId }" size="1"&gt;
    &lt;apex:selectOptions value="{! listViewOptions }"/&gt;
    &lt;apex:actionSupport event="onchange" reRender="contacts_list"/&gt;
&lt;/apex:selectList&gt;
</pre>

<p>
Then a drop-down appears allowing you to filter on particular fields, without reloading the page. 
</p>
</div>
</div>

<div id="outline-container-orgf2b41d2" class="outline-4">
<h4 id="orgf2b41d2"><span class="section-number-4">15.6.11</span> Add Pagination to the List</h4>
<div class="outline-text-4" id="text-15-6-11">
<p>
Use the pagination features of the standard list controller to allow users to look at a long list of records one "page" at a time. 
</p>

<p>
The standard list controller by default only shows the first 20 records that match your filter criteria. How can you let users access more than 20? 
</p>

<ul class="org-ul">
<li>Add a pagination block of code (underneath the <code>&lt;apex:pageBlocktTable&gt;</code> markup:</li>
</ul>
<pre class="example">
&lt;!-- Pagination --&gt;
&lt;table style="width: 100%"&gt;&lt;tr&gt;
    &lt;td&gt;
	&lt;!-- Page X of Y --&gt;
    &lt;/td&gt;
    &lt;td align="center"&gt;
	&lt;!-- Previous page --&gt;
	&lt;!-- Next page --&gt;
    &lt;/td&gt;
    &lt;td align="right"&gt;
	&lt;!-- Records per page --&gt;
    &lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;
</pre>

<ul class="org-ul">
<li>replace the <code>&lt;! -- Page X of Y -- &gt;</code> with the following markup:</li>
</ul>
<pre class="example">
Page: &lt;apex:outputText
    value=" {!PageNumber} of {! CEILING(ResultSize / PageSize) }"/&gt;
</pre>
<ul class="org-ul">
<li>replace previous and next page comments with:</li>
</ul>
<pre class="example">
&lt;!-- Previous page --&gt;
&lt;!-- active --&gt;
&lt;apex:commandLink action="{! Previous }" value=" Previous"
     rendered="{! HasPrevious }"/&gt;
&lt;!-- inactive (no earlier pages) --&gt;
&lt;apex:outputText style="color: #ccc;" value=" Previous"
     rendered="{! NOT(HasPrevious) }"/&gt;
&amp;nbsp;&amp;nbsp;
&lt;!-- Next page --&gt;
&lt;!-- active --&gt;
&lt;apex:commandLink action="{! Next }" value="Next "
     rendered="{! HasNext }"/&gt;
&lt;!-- inactive (no more pages) --&gt;
&lt;apex:outputText style="color: #ccc;" value="Next "
     rendered="{! NOT(HasNext) }"/&gt;
</pre>

<p>
The whole snippet should be thus:
</p>
<pre class="example">
&lt;!-- Pagination --&gt;
&lt;table style="width: 100%"&gt;&lt;tr&gt;
    &lt;td&gt;
	Page: &lt;apex:outputText value=" {!PageNumber} of {! CEILING(ResultSize / PageSize) }"/&gt;
    &lt;/td&gt;
    &lt;td align="center"&gt;
	&lt;!-- Previous page --&gt;
	&lt;!-- active --&gt;
	&lt;apex:commandLink action="{! Previous }" value=" Previous"
	     rendered="{! HasPrevious }"/&gt;
	&lt;!-- inactive (no earlier pages) --&gt;
	&lt;apex:outputText style="color: #ccc;" value=" Previous"
	     rendered="{! NOT(HasPrevious) }"/&gt;
	&amp;nbsp;&amp;nbsp;
	&lt;!-- Next page --&gt;
	&lt;!-- active --&gt;
	&lt;apex:commandLink action="{! Next }" value="Next "
	     rendered="{! HasNext }"/&gt;
	&lt;!-- inactive (no more pages) --&gt;
	&lt;apex:outputText style="color: #ccc;" value="Next "
	     rendered="{! NOT(HasNext) }"/&gt;
    &lt;/td&gt;
    &lt;td align="right"&gt;
	Records per page:
	&lt;apex:selectList value="{! PageSize }" size="1"&gt;
	    &lt;apex:selectOption itemValue="5" itemLabel="5"/&gt;
	    &lt;apex:selectOption itemValue="20" itemLabel="20"/&gt;
	    &lt;apex:actionSupport event="onchange" reRender="contacts_list"/&gt;
	&lt;/apex:selectList&gt;
    &lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;
</pre>

<p>
The <code>{! HasPrevious }</code> works out if there are previous records to the ones you are looking at. <code>{! HasNext }</code> does the same for following records. There are also <code>First</code> and <code>Last</code> actions you can use on the list.
</p>
</div>
</div>

<div id="outline-container-org58c3b05" class="outline-4">
<h4 id="org58c3b05"><span class="section-number-4">15.6.12</span> Unit Challenge</h4>
<div class="outline-text-4" id="text-15-6-12">
<p>
Create a Visualforce page which shows a list of Accounts linked to their record pages
Using a Standard List Controller, create a Visualforce page which displays a list of Accounts with links to their respective record detail pages.
Challenge Requirements
</p>

<p>
The page must be named AccountList
It must reference the Account standard controller
It must have a recordSetVar attribute equal to accounts
It must have a Visualforce apex:repeat component, with the following:
    Use the var attribute set to a
    Use the &lt;li&gt; HTML list tag
    Use the apex:outputLink component to link to the respective record detail page
HINT: Record detail pages can be reached by placing a record ID at the root of the URL (e.g. &lt;record id&gt;)
</p>

<p>
Solution:
</p>
<pre class="example">
&lt;apex:page standardController="Account" recordSetVar="accounts"&gt;
    &lt;apex:repeat var="a" value="{! accounts}"&gt;
	&lt;li&gt;
	    &lt;apex:outputLink value="/{! a.Id}"&gt;
		{! a.Name}
	    &lt;/apex:outputLink&gt;
	&lt;/li&gt;
    &lt;/apex:repeat&gt;
&lt;/apex:page&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org2d31548" class="outline-3">
<h3 id="org2d31548"><span class="section-number-3">15.7</span> Use Static Resources</h3>
<div class="outline-text-3" id="text-15-7">
</div>
<div id="outline-container-orgaeb9644" class="outline-4">
<h4 id="orgaeb9644"><span class="section-number-4">15.7.1</span> Introduction to Static Resources</h4>
<div class="outline-text-4" id="text-15-7-1">
<p>
Static resources allow you to uploaad content that you can reference in a Visualforce page. Resources can be archives, images, stylesheets, JavaScript, and other files. Static resources are managed by the <code>$Resource</code> global variable, which can be used directly by Visualforce, or as a parameter to functions such as <code>URLFOR()</code>. 
</p>
</div>
</div>

<div id="outline-container-org06e6542" class="outline-4">
<h4 id="org06e6542"><span class="section-number-4">15.7.2</span> Create and Upload a Simple Static Resource</h4>
<div class="outline-text-4" id="text-15-7-2">
<ul class="org-ul">
<li>from setup enter <b>Static Resources</b> in the quick find box, then select Static Resource</li>
<li>click <b>New</b></li>
<li>enter jQuery for the name</li>
<li>click choose file</li>
<li>if you see cache control menu, choose Public</li>
<li>click save</li>
</ul>

<p>
You can call this in a Visualforce page with the global variable <code>{! Resource.jquery }</code>. 
</p>

<p>
This example shows a call to the file:
</p>
<pre class="example">
&lt;apex:page&gt;
    &lt;!-- Add the static resource to page's &lt;head&gt; --&gt;
    &lt;apex:includeScript value="{! $Resource.jQuery }"/&gt;
    &lt;!-- A short bit of jQuery to test it's there --&gt;
    &lt;script type="text/javascript"&gt;
	jQuery.noConflict();
	jQuery(document).ready(function() {
	    jQuery("#message").html("Hello from jQuery!");
	});
    &lt;/script&gt;
    &lt;!-- Where the jQuery message will appear --&gt;
    &lt;h1 id="message"&gt;&lt;/h1&gt;
&lt;/apex:page&gt;
</pre>
</div>
</div>

<div id="outline-container-org9dc6af4" class="outline-4">
<h4 id="org9dc6af4"><span class="section-number-4">15.7.3</span> Create and Upload a Zipped Static Resource</h4>
<div class="outline-text-4" id="text-15-7-3">
<p>
Zipped static resources should be used to group files that are updated together. 
</p>

<p>
This is done exactly the same way as before. 
</p>
</div>
</div>

<div id="outline-container-orgc8522f0" class="outline-4">
<h4 id="orgc8522f0"><span class="section-number-4">15.7.4</span> Add Zipped Static Resources to a Visualforce Page</h4>
<div class="outline-text-4" id="text-15-7-4">
<p>
Use the <code>$Resource</code> variable and the <code>URLFOR()</code> function reference items within a zipped static resource. 
</p>

<p>
The URLFOR() function can combine can combine a reference a zipped static resource and a relative path to an item within to create a URL that can be used within Visualforce components that reference static assets. For example, <code>URLFOR($Resource.jQueryMobile, 'images/icons-png/cloud-black.png')</code> returns a URL to a specific graphic asset within the zipped static resource, which can be used by the <code>&lt;apex:image&gt;</code> component. You can construct similar URLs for JavaScript and stylesheet files for the <code>&lt;apex:includeScript&gt;</code> and <code>&lt;apex:stylesheet&gt;</code> components.
</p>

<p>
The limit for a zip file is 5MB. 
</p>

<p>
This Visualforce code references the zipped resource through the <code>URLFOR()</code> method:
</p>
<pre class="example">
&lt;apex:page showHeader="false" sidebar="false" standardStylesheets="false"&gt;
    &lt;!-- Add static resources to page's &lt;head&gt; --&gt;
    &lt;apex:stylesheet value="{!
	  URLFOR($Resource.jQueryMobile,'jquery.mobile-1.4.5.css')}"/&gt;
    &lt;apex:includeScript value="{! $Resource.jQuery }"/&gt;
    &lt;apex:includeScript value="{!
	 URLFOR($Resource.jQueryMobile,'jquery.mobile-1.4.5.js')}"/&gt;
    &lt;div style="margin-left: auto; margin-right: auto; width: 50%"&gt;
	&lt;!-- Display images directly referenced in a static resource --&gt;
	&lt;h3&gt;Images&lt;/h3&gt;
	&lt;p&gt;A hidden message:
	    &lt;apex:image alt="eye" title="eye"
		 url="{!URLFOR($Resource.jQueryMobile, 'images/icons-png/eye-black.png')}"/&gt;
	    &lt;apex:image alt="heart" title="heart"
		 url="{!URLFOR($Resource.jQueryMobile, 'images/icons-png/heart-black.png')}"/&gt;
	    &lt;apex:image alt="cloud" title="cloud"
		 url="{!URLFOR($Resource.jQueryMobile, 'images/icons-png/cloud-black.png')}"/&gt;
	&lt;/p&gt;
    &lt;!-- Display images referenced by CSS styles,
	 all from a static resource. --&gt;
    &lt;h3&gt;Background Images on Buttons&lt;/h3&gt;
    &lt;button class="ui-btn ui-shadow ui-corner-all
	 ui-btn-icon-left ui-icon-action"&gt;action&lt;/button&gt;
    &lt;button class="ui-btn ui-shadow ui-corner-all
	 ui-btn-icon-left ui-icon-star"&gt;star&lt;/button&gt;
    &lt;/div&gt;
&lt;/apex:page&gt;
</pre>
</div>
</div>

<div id="outline-container-org35cd861" class="outline-4">
<h4 id="org35cd861"><span class="section-number-4">15.7.5</span> Unit Challenge</h4>
<div class="outline-text-4" id="text-15-7-5">
<p>
Upload a specified zip file as a static resource. The zip will have directories with images and you have to display a specific image on a Visualforce page.
Challenge Requirements
</p>

<p>
The page must be named ShowImage
This file must be uploaded as a Static Resource named vfimagetest
The page must have a Visualforce apex:image tag that displays the kitten1.jpg image from the cats directory of the static resource
</p>

<p>
Solution:
</p>
<pre class="example">
&lt;apex:image value="{! URLFOR($Resource.vfimagetest, 'cats/kitten1.jpg')}"/&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org4f1af01" class="outline-3">
<h3 id="org4f1af01"><span class="section-number-3">15.8</span> Create And Use Custom Controllers</h3>
<div class="outline-text-3" id="text-15-8">
<p>
Custom controllers contain custom logic and data manipulation that can be used by a Visualforce page. For example, it can receive a list of items to be displayed, make a callout to an external web service, validate and insert data, and more.
</p>

<p>
Creating a custom controller will override the standard controller. 
</p>
</div>

<div id="outline-container-org4e786e6" class="outline-4">
<h4 id="org4e786e6"><span class="section-number-4">15.8.1</span> Create a Visualforce Page that Uses a Custom Controller</h4>
<div class="outline-text-4" id="text-15-8-1">
<ul class="org-ul">
<li>create new Visualforce page</li>
<li>in the <code>&lt;apex:page&gt;</code> tag declare your controller</li>
<li>create a custom controller Apex class</li>
</ul>

<p>
You cannot inherit from another class, nor does it implement an interface to conform to the requirements of a Visualforce controller. Even complex controllers don't do this as there isn't a class to inherit from. 
</p>
</div>
</div>

<div id="outline-container-orge7abb90" class="outline-4">
<h4 id="orge7abb90"><span class="section-number-4">15.8.2</span> Add a method to Retrieve Records</h4>
<div class="outline-text-4" id="text-15-8-2">
<p>
Create a getter method that runs SOQL query to return records you want to display on your page. 
</p>

<pre class="example">
private String sortOrder = 'LastName';
public List&lt;Contact&gt; getContacts() {
    List&lt;Contact&gt; results = Database.query(
	'SELECT Id, FirstName, LastName, Title, Email ' +
	'FROM Contact ' +
	'ORDER BY ' + sortOrder + ' ASC ' +
	'LIMIT 10'
    );
    return results;
}
</pre>

<p>
The Visualforce code to call this method is:
</p>
<pre class="example">
&lt;!-- Contacts List --&gt;
&lt;apex:pageBlockTable value="{! contacts }" var="ct"&gt;
    &lt;apex:column value="{! ct.FirstName }"/&gt;
    &lt;apex:column value="{! ct.LastName }"/&gt;
    &lt;apex:column value="{! ct.Title }"/&gt;
    &lt;apex:column value="{! ct.Email }"/&gt;
&lt;/apex:pageBlockTable&gt;
</pre>

<p>
This markup is already familiar. The difference is that when <code>{! contacts }</code> expression is evaluated, Visualforce translates that expression into a call to your controller's <code>getContacts()</code> method. 
</p>
</div>
</div>

<div id="outline-container-org73a1499" class="outline-4">
<h4 id="org73a1499"><span class="section-number-4">15.8.3</span> Add a New Action Method</h4>
<div class="outline-text-4" id="text-15-8-3">
<p>
Create action methods in your controller to respond to user input on the page.
</p>

<p>
These two methods will allow us to sort by different data:
</p>
<pre class="example">
public void sortByLastName() {
    this.sortOrder = 'LastName';
}
public void sortByFirstName() {
    this.sortOrder = 'FirstName';
}
</pre>

<p>
The Visualforce code replaces two tags <code>&lt;apex:column value="{! ct.FirstName }"/&gt; &lt;apex:column value="{! ct.LastName }"/&gt;</code> with the following code:
</p>
<pre class="example">
&lt;apex:column value="{! ct.FirstName }"&gt;
    &lt;apex:facet name="header"&gt;
	&lt;apex:commandLink action="{! sortByFirstName }"
	    reRender="contacts_list"&gt;First Name
	&lt;/apex:commandLink&gt;
    &lt;/apex:facet&gt;
&lt;/apex:column&gt;
&lt;apex:column value="{! ct.LastName }"&gt;
    &lt;apex:facet name="header"&gt;
	&lt;apex:commandLink action="{! sortByLastName }"
	    reRender="contacts_list"&gt;Last Name
	&lt;/apex:commandLink&gt;
    &lt;/apex:facet&gt;
&lt;/apex:column&gt;
</pre>

<p>
The <b>action</b> <i>parameter</i> is key here as it makes calls on the new methods to reset the <code>sortOrder</code> variable, and providing a link at the top of the table. 
</p>

<p>
The <code>&lt;apex:facet&gt;</code> is the part that makes the headings clickable. The <code>&lt;apex:commandLink&gt;</code> says what to do if that link is clicked.
</p>

<p>
In this example, the header text is hardcoded in the markup. You can make a call on the table header with <code>&lt;apex:outputText value="{! $ObjectType.Contact.Fields.FirstName.Label }"/&gt;</code> - this allows for different languages. If the field name is ever changed, it will also change in the interface. 
</p>

<p>
There are also <b>setter</b> methods that allow you to submit information back to the database. 
</p>

<p>
An alternative to getters and setters is to use <b>Apex properties</b>. Properties are a combination of a variable with getter and setter methods, with a syntax that groups them together more clearly. A simple property is:
</p>

<pre class="example">
public MyObject__c myVariable { get; set; }
</pre>

<p>
Properties can be public and private, read-only, write-only, by ommitting the get and set. 
</p>

<p>
More about Custom Controllers can be seen here <a href="https://developer.salesforce.com/docs/atlas.en-us.224.0.pages.meta/pages/pages_controller.htm">https://developer.salesforce.com/docs/atlas.en-us.224.0.pages.meta/pages/pages_controller.htm</a>.
</p>
</div>
</div>


<div id="outline-container-orgf860ed3" class="outline-4">
<h4 id="orgf860ed3"><span class="section-number-4">15.8.4</span> Unit Challenge</h4>
<div class="outline-text-4" id="text-15-8-4">
<p>
Create a Visualforce page that uses a custom controller to display a list of cases with the status of 'New'.
Challenge Requirements
</p>

<p>
The page must be named NewCaseList
The custom controller Apex class must be named NewCaseListController and include the following:
    A publicly scoped method named getNewCases
    Use the return type of List&lt;Case&gt;
    Return a list of case records that includes the ID and CaseNumber fields
    Filter the results returned to only have a status of New
The NewCaseList Visualforce page must use an apex:repeat component, which is:
    Bound to newCases
    Refers to the var attribute as case
    With the component tags, bind an apex:outputLink component to the ID of the case. This will cause the the page to direct the user to the detail page of the respective case record.
</p>

<p>
Solution for the visualforce page:
</p>
<pre class="example">
&lt;apex:page controller="NewCaseListController"&gt;
    &lt;apex:pageBlock&gt;
	&lt;apex:repeat var="case" value ="{! newCases }"&gt;
	    &lt;apex:outputLink value="/{! case.Id }"&gt;
		{! case.Id }
	    &lt;/apex:outputLink&gt;
	&lt;/apex:repeat&gt;
    &lt;/apex:pageBlock&gt;
&lt;/apex:page&gt;
</pre>

<p>
Solution for the custom controller:
</p>
<pre class="example">
public class NewCaseListController {
    public List&lt;Case&gt; getNewCases(){
	List&lt;Case&gt; cases = [SELECT Id, CaseNumber from Case WHERE status='New'];
	return cases;
    }
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5b9cde1" class="outline-2">
<h2 id="org5b9cde1"><span class="section-number-2">16</span> Developer Console</h2>
<div class="outline-text-2" id="text-16">
</div>
<div id="outline-container-org605f0b9" class="outline-3">
<h3 id="org605f0b9"><span class="section-number-3">16.1</span> Inspect Objects at Checkpoints</h3>
<div class="outline-text-3" id="text-16-1">
</div>
<div id="outline-container-org9fb5cfa" class="outline-4">
<h4 id="org9fb5cfa"><span class="section-number-4">16.1.1</span> Unit Challenge</h4>
<div class="outline-text-4" id="text-16-1-1">
<p>
Set Checkpoints to Find Errors in Your Code
Set a checkpoint in the EmailMissionSpecialist class. Then, execute the class using a valid email address, and analyze the objects logged at the checkpoint. Make sure that line 12 of your EmailMissionSpecialist Apex class still contains this code:
</p>

<p>
Messaging.SendEmailResult[] results = Messaging.sendEmail(
</p>

<p>
If line 12 doesn't contain that code, find the original version of the EmailMissionSpecialist class in Unit 2: Navigate and Edit Source Code, and replace the contents of EmailMissionSpecialist.apxc with that version. Then, set a checkpoint on line 12 and execute the EmailMissionSpecialist class using the Execute Anonymous statement that you used earlier in this unit.
</p>

<p>
Set a checkpoint on line 12 of the EmailMissionSpecialist class.
Use Execute Anonymous to execute the EmailMissionSpecialist Apex class, using your email address.
Observe the checkpoint results and see the values of the objects in memory.
</p>

<p>
Solution: Set a checkpoint at line 12. 
</p>
</div>
</div>
</div>

<div id="outline-container-orgdabdcfa" class="outline-3">
<h3 id="orgdabdcfa"><span class="section-number-3">16.2</span> Execute SOQL anD SOSL Queries</h3>
<div class="outline-text-3" id="text-16-2">
<p>
Use the query editor. Press execute button to execute query. 
</p>
</div>

<div id="outline-container-orgbcaed94" class="outline-4">
<h4 id="orgbcaed94"><span class="section-number-4">16.2.1</span> Unit Challenge</h4>
<div class="outline-text-4" id="text-16-2-1">
<p>
Now that youve successfully avoided collision with asteroid 2014 QO441, contact Mission Control at the Neptune Space Station to get cleared for landing so you can take a well-deserved break. Write an inline SOSL search to find and return the contact details of the Mission Specialist at the Neptune Space Station.
</p>

<p>
Using Execute Anonymous, like we did when we inserted records for the Control Engineers, insert the contact details for the Mission Specialist on Neptune.
</p>

<p>
Contact thisContact = new Contact( Firstname='Brian', Lastname='Dent', Phone='(619)852-4569', Department='Mission Control', Title='Mission Specialist - Neptune', Email='briandent@trailhead.com');
insert thisContact;
</p>

<p>
Search for the inserted record with an inline SOSL search, using Execute Anonymous. Instead of finding 'Crisis', like we did when we used Execute Anonymous to look for the Control Engineers' records, search for 'Mission Control'. Use the System.debug() method to display the contact's "lastname, firstname" in your debug log .
Make sure that you see the returned records in the debug log. 
</p>

<p>
Solution:
</p>
<pre class="example">
List&lt;List&lt;sObject&gt;&gt; searchList = [FIND 'Mission Control' IN ALL FIELDS RETURNING Contact(FirstName, LastName, Phone, Email, Title)];
Contact[] result = (Contact[])searchList[0];
System.debug(result[0].Lastname + ', ' + result[0].Firstname);
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8534460" class="outline-2">
<h2 id="org8534460"><span class="section-number-2">17</span> Optimizing Search</h2>
<div class="outline-text-2" id="text-17">
<p>
Limit the data that you are searching. Limit the data that you are returning. 
</p>

<p>
Use the <code>IN SearchGroup</code> to limit which data is searched. 
</p>

<pre class="example">
FIND {jsmith@cloudkicks.com} IN EMAIL FIELDS RETURNING Contact
</pre>

<p>
SOSL allows us to return just a few fields. It includes more advanced elements:
</p>
<ul class="org-ul">
<li><code>ObjectTypeName</code> - specifies the object to return</li>
<li><code>FieldList</code> - specifies the fields to return</li>
<li><code>ORDER By</code> - specifies which fields to order the results by. This can be ASC or DESC</li>
<li><code>LIMIT n</code> - sets the maximum number of records returned for the given object</li>
<li><code>OFFSET n</code> - sets the starting row offset into the result set returned by your query</li>
</ul>

<p>
Examples: 
</p>
<ul class="org-ul">
<li><code>FIND {Cloud Kicks} RETURNING Account</code></li>
<li><code>FIND {Cloud Kicks} RETURNING Account(Name, Industry)</code></li>
<li><code>FIND {Cloud Kicks} RETURNING Account (Name, Industry ORDER BY Name)</code></li>
<li><code>FIND {Cloud Kicks} RETURNING Account (Name, Industry ORDER BY Name LIMIT 10)</code></li>
<li><code>FIND {Cloud Kicks} RETURNING Account (Name, Industry ORDER BY Name LIMIT 10 OFFSET 25)</code></li>
</ul>
</div>

<div id="outline-container-orgec60ee9" class="outline-3">
<h3 id="orgec60ee9"><span class="section-number-3">17.1</span> With Statements</h3>
<div class="outline-text-3" id="text-17-1">
<p>
With is used to filter statements, by a given field(s). By filtering, you return fewer results and improve performance. 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Resource</th>
<th scope="col" class="org-left">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>WITH DIVISION</code></td>
<td class="org-left"><code>FIND {Cloud Kicks} RETURNING Account (Name, Industry) WITH DIVISION = 'Global'</code></td>
</tr>

<tr>
<td class="org-left"><code>WITH DATA CATEGORY</code></td>
<td class="org-left"><code>FIND {race} RETURNING KnowledgeArticleVersion (Id, Title WHERE PublishStatus='online' and language='en_US') WITH DATA CATEGORY Location__c AT America__c</code></td>
</tr>

<tr>
<td class="org-left"><code>WITH NETWORK</code></td>
<td class="org-left"><code>FIND {first place} RETURNING User (Id, Name), FeedItem (id, ParentId WHERE CreatedDate = THIS_YEAR Order by CreatedDate DESC) WITH NETWORK = '00000000000001'</code></td>
</tr>

<tr>
<td class="org-left"><code>WITH PRICEBOOK</code></td>
<td class="org-left"><code>Find {shoe} RETURNING Product2 WITH PricebookId = '01sxx0000002MffAAE'</code></td>
</tr>
</tbody>
</table>

<p>
This works very much the same in <b>SOQL</b>. 
</p>

<p>
Limit data - <code>In SearchGroup</code> - <code>WHERE</code>
Specify the data to be returned - <code>Returning FieldSpec</code> - <code>SELECT</code>
Sort results - <code>ORDER BY</code> <code>LIMIT</code> <code>OFFSET</code> - <code>ORDER BY</code> <code>LIMIT</code> <code>OFFSET</code>
Filter data by category - <code>WITH DATA CATEGORY</code> - <code>WITH DATA CATEGORY</code>
</p>
</div>
</div>

<div id="outline-container-org58a9a77" class="outline-3">
<h3 id="org58a9a77"><span class="section-number-3">17.2</span> Display Suggested Results with REST</h3>
<div class="outline-text-3" id="text-17-2">
<p>
REST resources help here. 
</p>

<p>
Types of REST resources:
</p>
<ul class="org-ul">
<li><b>Search Suggested Records</b> - returns a list of suggested records whose names match the user's search string. The suggestions resource provides a shortcut for users to navigate directly to likely relevant records, before performing a full search</li>
<li><b>Search Suggested Article Title Matches</b> - returns a list of Salesforce Knowledge articles whose titles match the user's search query string. Provides a shortcut to navigate directly to likely relevant articles before the user performs a search</li>
<li><b>SObject Suggested Articles for Case</b> - returns a list of suggested Salesforce Knowledge articles for a case</li>
</ul>

<p>
This is basic syntax for <b>Search Suggested Article Title Matches</b>:
</p>
<pre class="example">
/vXX.X/search/suggestTitleMatches?q=search string&amp;language=article language&amp;publishStatus=article publication status
</pre>

<p>
Now, let's use this syntax with a specific example. 
</p>
<pre class="example">
/vXX.X/search/suggestTitleMatches?q=race+tips&amp;language=en_US&amp;publishStatus=Online
</pre>

<p>
And this is the JSON response:
</p>
<pre class="example">
{
  "autoSuggestResults" : [ {
    "attributes" : {
    "type" : "KnowledgeArticleVersion",
    "url" : "/services/data/v30.0/sobjects/KnowledgeArticleVersion/ka0D00000004CcQ"
    },
  "Id" : "ka0D00000004CcQ",
  "UrlName" : "tips-for-your-first-trail-race",
  "Title" : "race tips",
  "KnowledgeArticleId" : "kA0D00000004Cfz",
  "isMasterLanguage" : "1",
  } ],
  "hasMoreResults" : false
}
</pre>
</div>
</div>

<div id="outline-container-org0f92270" class="outline-3">
<h3 id="org0f92270"><span class="section-number-3">17.3</span> Working with Admins</h3>
<div class="outline-text-3" id="text-17-3">
</div>
<div id="outline-container-orge9766d6" class="outline-4">
<h4 id="orge9766d6"><span class="section-number-4">17.3.1</span> Synonyms</h4>
<div class="outline-text-4" id="text-17-3-1">
<p>
A search for 'USB' could mean 'flash drive'. How do we include those? 
</p>
<ul class="org-ul">
<li>in Setup, enter <code>Synonyms</code> in the quick find box</li>
<li>under <b>Custom Synonym Groups</b> click <b>New</b> to start a synonym group or <b>Edit</b> next to an existing one</li>
<li>add two to six synonyms per group - no special characters</li>
</ul>

<p>
You can also import synonyms. 
</p>
</div>
</div>

<div id="outline-container-org3a3c098" class="outline-4">
<h4 id="org3a3c098"><span class="section-number-4">17.3.2</span> Promoted Search Terms</h4>
<div class="outline-text-4" id="text-17-3-2">
<p>
This helps get more eyeballs on an article that you know is commonly used to resolve a support case. Admins find the perfect article and then add terms to the <b>Promoted Search Terms</b> related list. Users who enter those terms, the aprticle pops up. 
</p>

<ul class="org-ul">
<li>the maximum number of characters per term is 100. For the best results, limit each promoted term to a few key words</li>
<li>don't go overboard. Use them selectively. If you do, you could increase the amount of unwanted search results</li>
<li>article search matches a promoted term whenever all keywords within the term occur within the user's search terms, in any sequence. Each keyword must match exactly</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Adam C</p>
<p class="date">Created: 2020-11-15 Sun 09:26</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
